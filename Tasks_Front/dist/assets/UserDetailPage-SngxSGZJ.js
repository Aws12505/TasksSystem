import{h as f,z as N,q as v,j as e,B as o,y as x,A as b}from"./index-CJetGwO1.js";import{C as i,a as t,b as d,d as l}from"./card-CM5R7BK3.js";import{B as h}from"./badge-B-I15EGM.js";import{A as y,a as w}from"./avatar-3aaxr_vA.js";import{u as C}from"./useUser-DPhGi_I1.js";import{A as P}from"./arrow-left-WPG_CFC6.js";import{T as U}from"./trending-up-qxDweo4-.js";import{S as A}from"./square-pen-CzmLflYk.js";import{C as _}from"./calendar-Czyi2Tg8.js";import{K as L}from"./key-p4a57PJI.js";import"./index-DrKw1nON.js";import"./usersStore-DWauOhiO.js";import"./permissionService-BZLxSVwc.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],B=f("mail",k),M=()=>{const{id:j}=N(),{user:s,userRolesPermissions:u,isLoading:p,error:g}=C(j),{hasPermission:a}=v();if(p)return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-8 bg-muted animate-pulse rounded w-48"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"h-64 bg-muted animate-pulse rounded-lg"}),e.jsx("div",{className:"h-64 bg-muted animate-pulse rounded-lg"}),e.jsx("div",{className:"h-64 bg-muted animate-pulse rounded-lg"})]})]});if(g||!s)return e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-destructive",children:g||"User not found"})});const n=s.roles||[],c=s.permissions||[],m=u?.all_permissions||[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(o,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(x,{to:"/users",children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),"Back to Users"]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(y,{className:"w-12 h-12",children:e.jsx(w,{className:"bg-primary text-primary-foreground text-lg",children:s.name?.charAt(0).toUpperCase()||"U"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground font-sans",children:s.name}),e.jsx("p",{className:"text-muted-foreground",children:s.email})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a("view analytics")&&e.jsx(o,{asChild:!0,variant:"outline",children:e.jsxs(x,{to:`/analytics/users/${s.id}`,children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"User Analytics"]})}),a("edit users")&&e.jsx(o,{asChild:!0,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:e.jsxs(x,{to:`/users/${s.id}/edit`,children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),"Edit User"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(i,{className:"bg-card border-border",children:[e.jsx(t,{children:e.jsxs(d,{className:"text-foreground flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4"}),"User Information"]})}),e.jsxs(l,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Name"}),e.jsx("p",{className:"font-medium text-foreground",children:s.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Email"}),e.jsx("p",{className:"font-medium text-foreground",children:s.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Email Verified"}),e.jsx(h,{variant:s.email_verified_at?"default":"secondary",children:s.email_verified_at?"Verified":"Not Verified"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Created"}),e.jsxs("p",{className:"font-medium text-foreground flex items-center gap-2",children:[e.jsx(_,{className:"w-4 h-4"}),new Date(s.created_at).toLocaleDateString()]})]})]})]}),e.jsxs(i,{className:"bg-card border-border",children:[e.jsx(t,{children:e.jsxs(d,{className:"text-foreground flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4"}),"Roles (",n.length,")"]})}),e.jsx(l,{children:e.jsx("div",{className:"space-y-2",children:n.length>0?n.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-accent/50 rounded",children:[e.jsx("span",{className:"font-medium text-foreground",children:r.name}),e.jsxs(h,{variant:"outline",className:"text-xs",children:[r.permissions?.length||0," permissions"]})]},r.id)):e.jsx("p",{className:"text-muted-foreground text-sm",children:"No roles assigned"})})})]}),a("view permissions")&&e.jsxs(i,{className:"bg-card border-border",children:[e.jsx(t,{children:e.jsxs(d,{className:"text-foreground flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4"}),"Direct Permissions (",c.length,")"]})}),e.jsx(l,{children:e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:c.length>0?c.map(r=>e.jsx("div",{className:"p-2 bg-accent/50 rounded",children:e.jsx("span",{className:"text-sm text-foreground",children:r.name})},r.id)):e.jsx("p",{className:"text-muted-foreground text-sm",children:"No direct permissions assigned"})})})]})]}),a("view permissions")&&u&&m.length>0&&e.jsxs(i,{className:"bg-card border-border",children:[e.jsxs(t,{children:[e.jsxs(d,{className:"text-foreground",children:["All Permissions (",m.length,")"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Combined permissions from roles and direct assignments"})]}),e.jsx(l,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:m.map(r=>e.jsx(h,{variant:"secondary",className:"text-xs",children:r.name},r.id))})})]})]})};export{M as default};
