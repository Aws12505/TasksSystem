import{r as _,y as k,j as e,m as f,B as N,x as A,U as p,S as b,n as C,J as P}from"./index-DB2dH0Gn.js";import{C as s,d as a,a as t,b as l}from"./card-Do0T9gHn.js";import{B as x}from"./badge-DBBjrr1q.js";import{P as S}from"./progress-DPvFmz7d.js";import{u as T}from"./analyticsStore-Csw_g5sy.js";import{A as v}from"./arrow-left-C3FmFHG1.js";import{T as B}from"./target-DeYbhqTl.js";import{C as y}from"./clock-B7DVr4d-.js";import"./analyticsService-x8RGf70-.js";const z=(h,m,j)=>{const{projectAnalytics:u,isLoading:g,error:c,fetchProjectAnalytics:r}=T(),d=typeof h=="string"?parseInt(h):h;return _.useEffect(()=>{d&&r(d,m,j)},[d,m,j,r]),{projectAnalytics:u,isLoading:g,error:c,refreshProjectAnalytics:()=>r(d,m,j)}},W=()=>{const{projectId:h}=k(),{projectAnalytics:m,isLoading:j,error:u}=z(h),g=i=>{switch(i){case"excellent":return"text-green-600 bg-green-100";case"good":return"text-blue-600 bg-blue-100";case"fair":return"text-yellow-600 bg-yellow-100";case"poor":return"text-red-600 bg-red-100";default:return"text-muted-foreground bg-muted"}};if(j)return e.jsx("div",{className:"min-h-screen flex flex-col",children:e.jsxs("div",{className:"flex-1 space-y-6 p-4 md:p-6 max-w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(f,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("div",{className:"h-8 bg-muted animate-pulse rounded w-48"}),e.jsx("div",{className:"h-4 bg-muted animate-pulse rounded w-72 mt-2"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(N,{variant:"outline",size:"sm",disabled:!0,children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),"Back to Analytics"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(s,{className:"bg-card border-border",children:e.jsx(a,{className:"p-6",children:e.jsx("div",{className:"h-48 bg-muted animate-pulse rounded"})})}),e.jsx(s,{className:"bg-card border-border",children:e.jsx(a,{className:"p-6",children:e.jsx("div",{className:"h-48 bg-muted animate-pulse rounded"})})}),e.jsx(s,{className:"bg-card border-border",children:e.jsx(a,{className:"p-6",children:e.jsx("div",{className:"h-48 bg-muted animate-pulse rounded"})})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((i,w)=>e.jsx(s,{className:"bg-card border-border",children:e.jsx(a,{className:"p-6",children:e.jsx("div",{className:"h-20 bg-muted animate-pulse rounded"})})},w))})]})});if(u||!m)return e.jsx("div",{className:"min-h-screen flex flex-col",children:e.jsx("div",{className:"flex-1 space-y-6 p-4 md:p-6 max-w-full",children:e.jsx(s,{className:"bg-card border-border",children:e.jsx(a,{className:"p-8 text-center",children:e.jsx("p",{className:"text-destructive",children:u||"Project analytics not found"})})})})});const{basic_info:c,health_score:r,team_analytics:d,task_analytics:o,rating_analytics:n}=m;return e.jsx("div",{className:"min-h-screen flex flex-col",children:e.jsxs("div",{className:"flex-1 space-y-6 p-4 md:p-6 max-w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(f,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground font-sans",children:c.name}),e.jsx("p",{className:"text-muted-foreground",children:"Project Analytics & Health Score"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(x,{variant:"secondary",className:"text-sm capitalize",children:["Status: ",c.status]}),e.jsxs(x,{variant:"outline",className:"text-sm",children:["Progress: ",c.progress_percentage,"%"]}),e.jsx(N,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(A,{to:"/analytics",className:"flex items-center",children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),"Back to Analytics"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(s,{className:"bg-card border-border",children:[e.jsx(t,{children:e.jsx(l,{className:"text-foreground",children:"Project Info"})}),e.jsxs(a,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Status"}),e.jsx(x,{variant:"outline",className:"capitalize",children:c.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Progress"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{value:c.progress_percentage,className:"flex-1"}),e.jsxs("span",{className:"text-sm font-medium",children:[c.progress_percentage,"%"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Stakeholder"}),e.jsx("p",{className:"text-foreground",children:c.stakeholder_name})]})]})]}),e.jsxs(s,{className:"bg-card border-border",children:[e.jsx(t,{children:e.jsxs(l,{className:"text-foreground flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5"}),"Health Score"]})}),e.jsxs(a,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-foreground",children:r.overall_score}),e.jsx(x,{variant:"outline",className:g(r.health_status),children:r.health_status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Completion"}),e.jsx("span",{children:r.completion_score})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Quality"}),e.jsx("span",{children:r.quality_score})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Timeline"}),e.jsx("span",{children:r.timeline_score})]})]})]})]}),e.jsxs(s,{className:"bg-card border-border",children:[e.jsx(t,{children:e.jsxs(l,{className:"text-foreground flex items-center gap-2",children:[e.jsx(p,{className:"w-5 h-5"}),"Team Analytics"]})}),e.jsxs(a,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Team Size"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:d.team_size})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Assignment"}),e.jsxs("p",{className:"text-lg font-medium text-foreground",children:[d.avg_assignment_percentage.toFixed(1),"%"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(s,{className:"bg-card border-border",children:[e.jsxs(t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Total Tasks"}),e.jsx(b,{className:"w-4 h-4"})]}),e.jsxs(a,{children:[e.jsx("div",{className:"text-2xl font-bold text-foreground",children:o.total_tasks}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Weight: ",o.total_weight]})]})]}),e.jsxs(s,{className:"bg-card border-border",children:[e.jsxs(t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Completed Tasks"}),e.jsx(b,{className:"w-4 h-4"})]}),e.jsxs(a,{children:[e.jsx("div",{className:"text-2xl font-bold text-foreground",children:o.completed_tasks}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Weight: ",o.completed_weight]})]})]}),e.jsxs(s,{className:"bg-card border-border",children:[e.jsxs(t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"In Progress"}),e.jsx(y,{className:"w-4 h-4"})]}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:o.in_progress_tasks})})]}),e.jsxs(s,{className:"bg-card border-border",children:[e.jsxs(t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Overdue"}),e.jsx(y,{className:"w-4 h-4"})]}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:o.overdue_tasks})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(s,{className:"bg-card border-border",children:[e.jsx(t,{children:e.jsxs(l,{className:"text-foreground flex items-center gap-2",children:[e.jsx(C,{className:"w-5 h-5"}),"Task Ratings"]})}),e.jsxs(a,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Count"}),e.jsx("span",{className:"font-medium",children:n.task_ratings.count})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Average"}),e.jsxs(x,{variant:"outline",className:"text-yellow-600 bg-yellow-100",children:[n.task_ratings.average,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Highest"}),e.jsxs("span",{className:"font-medium",children:[n.task_ratings.highest,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Lowest"}),e.jsxs("span",{className:"font-medium",children:[n.task_ratings.lowest,"%"]})]})]})]}),e.jsxs(s,{className:"bg-card border-border",children:[e.jsx(t,{children:e.jsxs(l,{className:"text-foreground flex items-center gap-2",children:[e.jsx(p,{className:"w-5 h-5"}),"Stakeholder Ratings"]})}),e.jsxs(a,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Count"}),e.jsx("span",{className:"font-medium",children:n.stakeholder_ratings.count})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Average"}),e.jsxs(x,{variant:"outline",className:"text-blue-600 bg-blue-100",children:[n.stakeholder_ratings.average,"%"]})]}),n.stakeholder_ratings.latest>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Latest"}),e.jsxs("span",{className:"font-medium",children:[n.stakeholder_ratings.latest,"%"]})]})]})]})]}),d.team_members.length>0&&e.jsxs(s,{className:"bg-card border-border",children:[e.jsx(t,{children:e.jsxs(l,{className:"text-foreground flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5"}),"Team Members"]})}),e.jsx(a,{children:e.jsx("div",{className:"space-y-3",children:d.team_members.map(i=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:i.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[i.task_count," tasks"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs(x,{variant:"outline",children:[i.total_assignment_percentage.toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"workload"})]})]},i.user_id))})})]})]})})};export{W as default};
