import{j as e,a as f,b as S,o as _,V as y,r as j,v as b,w as g,x as N,y as c,B as F,L as w,as as v,s as C}from"./index-CP8oIo-X.js";import{F as H,a as x,b as m,c as u,d as h,e as p}from"./form-Cji0qz_8.js";const k=_({description:C().min(1,"Description is required"),task_id:v().min(1,"Task is required"),helper_id:v().nullable().optional()}),q=_({description:C().min(1,"Description is required"),helper_id:v().nullable().optional()}),D=({availableTasks:i,availableUsers:d,taskId:o,onSubmit:l,isLoading:n})=>{const a=f({resolver:S(k),defaultValues:{description:"",task_id:o||0,helper_id:void 0}}),t=async s=>{const r={description:s.description,task_id:s.task_id,helper_id:s.helper_id||void 0};await l(r)};return e.jsx(H,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(t),className:"space-y-6",children:[e.jsx(x,{control:a.control,name:"description",render:({field:s})=>e.jsxs(m,{children:[e.jsx(u,{className:"text-foreground",children:"Description"}),e.jsx(h,{children:e.jsx(y,{placeholder:"Describe what you need help with...",...s,disabled:n,className:"bg-background border-input text-foreground",rows:4})}),e.jsx(p,{className:"text-destructive"})]})}),e.jsx(x,{control:a.control,name:"task_id",render:({field:s})=>e.jsxs(m,{children:[e.jsx(u,{className:"text-foreground",children:"Task"}),e.jsxs(j,{onValueChange:r=>s.onChange(Number(r)),value:s.value?.toString()||"0",disabled:n||!!o,children:[e.jsx(h,{children:e.jsx(b,{className:"bg-background border-input text-foreground",children:e.jsx(g,{placeholder:"Select a task"})})}),e.jsx(N,{children:i.map(r=>e.jsx(c,{value:r.id.toString(),children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:r.name}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[r.section?.project?.name," > ",r.section?.name]})]})},r.id))})]}),e.jsx(p,{className:"text-destructive"})]})}),e.jsx(x,{control:a.control,name:"helper_id",render:({field:s})=>e.jsxs(m,{children:[e.jsxs(u,{className:"text-foreground",children:["Assign Helper ",e.jsx("span",{className:"text-xs text-muted-foreground",children:"(optional)"})]}),e.jsxs(j,{onValueChange:r=>s.onChange(r==="none"?void 0:Number(r)),value:s.value?s.value.toString():"none",disabled:n,children:[e.jsx(h,{children:e.jsx(b,{className:"bg-background border-input text-foreground",children:e.jsx(g,{placeholder:"Leave unassigned or select a helper"})})}),e.jsxs(N,{children:[e.jsx(c,{value:"none",children:"Leave unassigned"}),d.map(r=>e.jsx(c,{value:r.id.toString(),children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:r.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:r.email})]})},r.id))]})]}),e.jsx(p,{className:"text-destructive"})]})}),e.jsxs(F,{type:"submit",disabled:n,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:[n&&e.jsx(w,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Help Request"]})]})})},V=({helpRequest:i,availableUsers:d,onSubmit:o,isLoading:l})=>{const n=f({resolver:S(q),defaultValues:{description:i.description,helper_id:i.helper_id||void 0}}),a=async t=>{const s={description:t.description,helper_id:t.helper_id||void 0};await o(s)};return e.jsx(H,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(a),className:"space-y-6",children:[e.jsx(x,{control:n.control,name:"description",render:({field:t})=>e.jsxs(m,{children:[e.jsx(u,{className:"text-foreground",children:"Description"}),e.jsx(h,{children:e.jsx(y,{placeholder:"Describe what you need help with...",...t,disabled:l,className:"bg-background border-input text-foreground",rows:4})}),e.jsx(p,{className:"text-destructive"})]})}),e.jsx(x,{control:n.control,name:"helper_id",render:({field:t})=>e.jsxs(m,{children:[e.jsxs(u,{className:"text-foreground",children:["Assign Helper ",e.jsx("span",{className:"text-xs text-muted-foreground",children:"(optional)"})]}),e.jsxs(j,{onValueChange:s=>t.onChange(s==="none"?void 0:Number(s)),value:t.value?t.value.toString():"none",disabled:l,children:[e.jsx(h,{children:e.jsx(b,{className:"bg-background border-input text-foreground",children:e.jsx(g,{placeholder:"Leave unassigned or select a helper"})})}),e.jsxs(N,{children:[e.jsx(c,{value:"none",children:"Leave unassigned"}),d.map(s=>e.jsx(c,{value:s.id.toString(),children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.email})]})},s.id))]})]}),e.jsx(p,{className:"text-destructive"})]})}),e.jsxs(F,{type:"submit",disabled:l,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:[l&&e.jsx(w,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Help Request"]})]})})},A=({helpRequest:i,availableTasks:d=[],availableUsers:o=[],taskId:l,onSubmit:n,isLoading:a})=>i?e.jsx(V,{helpRequest:i,availableUsers:o,onSubmit:n,isLoading:a}):e.jsx(D,{availableTasks:d,availableUsers:o,taskId:l,onSubmit:n,isLoading:a});export{A as H};
