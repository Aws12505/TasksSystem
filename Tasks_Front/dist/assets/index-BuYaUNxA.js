import{h as P,q as A,j as e,D as B,v as E,B as R,w as M,x as g,y as w,p as L,I as V}from"./index-BxwgkKmW.js";import{C as x,d as m,a as f,b as u}from"./card-DBdMxQwN.js";import{T as I,a as F,b as j,c as p}from"./tabs-Bwh6CuIw.js";import{u as U}from"./useRatingConfigs-CRErqRXo.js";import{u as H}from"./filtersStore-CG6LUYck.js";import{T as q,a as Q,b as T,c,d as $,e as o}from"./table-Bcc-c1Hx.js";import{B as z}from"./badge-DHsVyZTE.js";import{A as G,a as J}from"./avatar-NUj46C0k.js";import{R as K,P as O}from"./RatingConfigTypeBadge-DtPSFTE_.js";import{E as W}from"./ellipsis-B6mTkNOr.js";import{E as X}from"./eye-DQPdJmEg.js";import{S as Y}from"./square-pen-Cvcj-ZnK.js";import{T as Z}from"./trash-2-BQUsqliG.js";import{S as _}from"./settings-BkELsH5W.js";import{P as ee}from"./plus-CmAL8o1_.js";import{C as se}from"./circle-check-CPtg3vvI.js";import{C as ae}from"./clock-CrH7iAOy.js";import"./ratingConfigsStore-DGMKKDoK.js";import"./ratingConfigService-BewYkW1C.js";import"./index-CIZoh-jD.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],re=P("database",te),N=({ratingConfigs:t,isLoading:l,onDelete:b,onActivate:v,showActions:h=!0})=>{const{hasPermission:d}=A();return l?e.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((a,r)=>e.jsx("div",{className:"h-16 bg-muted animate-pulse rounded-lg"},r))}):t.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"No rating configurations found"})}):e.jsx("div",{className:"border border-border rounded-lg bg-card",children:e.jsxs(q,{children:[e.jsx(Q,{children:e.jsxs(T,{className:"border-border",children:[e.jsx(c,{className:"text-foreground",children:"Name"}),e.jsx(c,{className:"text-foreground",children:"Type"}),e.jsx(c,{className:"text-foreground",children:"Status"}),e.jsx(c,{className:"text-foreground",children:"Creator"}),e.jsx(c,{className:"text-foreground",children:"Created"}),h&&e.jsx(c,{className:"text-foreground w-[50px]",children:"Actions"})]})}),e.jsx($,{children:t.map(a=>{const r=d("view rating configs"),n=d("edit rating configs"),i=d("delete rating configs"),y=r||n||i;return e.jsxs(T,{className:"border-border hover:bg-accent/50",children:[e.jsx(o,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:a.name}),a.description&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:a.description})]})}),e.jsx(o,{children:e.jsx(K,{type:a.type})}),e.jsx(o,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(z,{variant:a.is_active?"default":"secondary",className:a.is_active?"text-green-600 bg-green-100":"",children:a.is_active?"Active":"Inactive"})})}),e.jsx(o,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{className:"w-6 h-6",children:e.jsx(J,{className:"bg-primary text-primary-foreground text-xs",children:a.creator?.name?.charAt(0).toUpperCase()||"U"})}),e.jsx("span",{className:"text-sm text-foreground",children:a.creator?.name||"Unknown User"})]})}),e.jsx(o,{className:"text-muted-foreground",children:new Date(a.created_at).toLocaleDateString()}),h&&e.jsx(o,{children:y?e.jsxs(B,{children:[e.jsx(E,{asChild:!0,children:e.jsx(R,{variant:"ghost",className:"h-8 w-8 p-0 hover:bg-accent",children:e.jsx(W,{className:"h-4 w-4"})})}),e.jsxs(M,{align:"end",className:"bg-popover border-border",children:[r&&e.jsx(g,{asChild:!0,className:"hover:bg-accent hover:text-accent-foreground",children:e.jsxs(w,{to:`/rating-configs/${a.id}`,className:"flex items-center",children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"View"]})}),n&&e.jsx(g,{asChild:!0,className:"hover:bg-accent hover:text-accent-foreground",children:e.jsxs(w,{to:`/rating-configs/${a.id}/edit`,className:"flex items-center",children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"Edit"]})}),n&&!a.is_active&&e.jsxs(g,{onClick:()=>v(a.id),className:"hover:bg-accent hover:text-accent-foreground",children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Activate"]}),i&&e.jsxs(g,{onClick:()=>b(a.id),className:"text-destructive hover:bg-destructive hover:text-destructive-foreground",children:[e.jsx(Z,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]}):e.jsx("span",{className:"text-muted-foreground text-xs",children:"No actions"})})]},a.id)})})]})})},ke=()=>{const{ratingConfigs:t,isLoading:l,deleteRatingConfig:b,activateRatingConfig:v,fetchRatingConfigsByType:h}=U(),{searchQuery:d,setSearchQuery:a}=H(),{hasPermission:r}=A(),n=async s=>{r("delete rating configs")&&window.confirm("Are you sure you want to delete this rating configuration?")&&await b(s)},i=async s=>{r("edit rating configs")&&await v(s)},y=async s=>{s==="all"||await h(s)},D=t.filter(s=>s.is_active).length,C=t.filter(s=>s.type==="task_rating").length,S=t.filter(s=>s.type==="stakeholder_rating").length,k=t.filter(s=>s.type==="final_rating").length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(_,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground font-sans",children:"Rating Configurations"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage rating system configurations"})]})]}),r("create rating configs")&&e.jsx(R,{asChild:!0,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:e.jsxs(w,{to:"/rating-configs/create",children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"New Configuration"]})})]}),e.jsx(x,{className:"bg-card border-border",children:e.jsx(m,{className:"p-4",children:e.jsxs("div",{className:"relative max-w-sm",children:[e.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(V,{placeholder:"Search configurations...",value:d,onChange:s=>a(s.target.value),className:"pl-10 bg-background border-input text-foreground"})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(x,{className:"bg-card border-border",children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-sm font-medium text-muted-foreground",children:"Total Configurations"}),e.jsx(re,{className:"w-4 h-4 text-chart-1"})]}),e.jsx(m,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:t.length})})]}),e.jsxs(x,{className:"bg-card border-border",children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-sm font-medium text-muted-foreground",children:"Active"}),e.jsx(se,{className:"w-4 h-4 text-green-500"})]}),e.jsx(m,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:D})})]}),e.jsxs(x,{className:"bg-card border-border",children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-sm font-medium text-muted-foreground",children:"Task Rating"}),e.jsx(ae,{className:"w-4 h-4 text-blue-500"})]}),e.jsx(m,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:C})})]}),e.jsxs(x,{className:"bg-card border-border",children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-sm font-medium text-muted-foreground",children:"Final Rating"}),e.jsx(_,{className:"w-4 h-4 text-purple-500"})]}),e.jsx(m,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:k})})]})]}),e.jsxs(I,{defaultValue:"all",className:"space-y-4",onValueChange:y,children:[e.jsxs(F,{className:"bg-muted",children:[e.jsxs(j,{value:"all",children:["All (",t.length,")"]}),e.jsxs(j,{value:"task_rating",children:["Task Rating (",C,")"]}),e.jsxs(j,{value:"stakeholder_rating",children:["Stakeholder (",S,")"]}),e.jsxs(j,{value:"final_rating",children:["Final Rating (",k,")"]})]}),e.jsx(p,{value:"all",children:e.jsx(N,{ratingConfigs:t,isLoading:l,onDelete:n,onActivate:i})}),e.jsx(p,{value:"task_rating",children:e.jsx(N,{ratingConfigs:t.filter(s=>s.type==="task_rating"),isLoading:l,onDelete:n,onActivate:i})}),e.jsx(p,{value:"stakeholder_rating",children:e.jsx(N,{ratingConfigs:t.filter(s=>s.type==="stakeholder_rating"),isLoading:l,onDelete:n,onActivate:i})}),e.jsx(p,{value:"final_rating",children:e.jsx(N,{ratingConfigs:t.filter(s=>s.type==="final_rating"),isLoading:l,onDelete:n,onActivate:i})})]})]})};export{ke as default};
