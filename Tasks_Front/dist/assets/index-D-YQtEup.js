import{q as y,j as e,D,v as _,B as C,w as k,x,y as h,U as b,p as E,I as S}from"./index-BOfNqdHU.js";import{C as g,d as j,a as M,b as B}from"./card-VRr8nV95.js";import{P as I,a as L,b as f,c as H,d as R,e as $,f as q}from"./pagination-Dwx5XK5W.js";import{u as F}from"./useUsers-CRqS-VrX.js";import{u as Q}from"./filtersStore-BXwbMU63.js";import{T as V,a as z,b as v,c,d as G,e as o}from"./table-C-IIjzmt.js";import{B as w}from"./badge-XdKDng72.js";import{A as J,a as K}from"./avatar-topmWw3Q.js";import{E as O}from"./ellipsis-Br2SwrZN.js";import{E as W}from"./eye-BRQmxKBX.js";import{T as X}from"./trending-up-DjOgL2L_.js";import{S as Y}from"./square-pen-DRxYo37W.js";import{T as Z}from"./trash-2-DSrtDu12.js";import{P as ee}from"./plus-ZkbNUsEY.js";import"./usersStore-D2Vr2NZu.js";import"./permissionService-BiQt4wXC.js";import"./index-ChJeZxSk.js";const se=({users:i,isLoading:a,onDelete:u})=>{const{hasPermission:t}=y();return a?e.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((r,l)=>e.jsx("div",{className:"h-16 bg-muted animate-pulse rounded-lg"},l))}):i.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"No users found"})}):e.jsx("div",{className:"border border-border rounded-lg bg-card",children:e.jsxs(V,{children:[e.jsx(z,{children:e.jsxs(v,{className:"border-border",children:[e.jsx(c,{className:"text-foreground",children:"User"}),e.jsx(c,{className:"text-foreground",children:"Email"}),e.jsx(c,{className:"text-foreground",children:"Roles"}),e.jsx(c,{className:"text-foreground",children:"Created"}),e.jsx(c,{className:"text-foreground w-[50px]",children:"Actions"})]})}),e.jsx(G,{children:i.map(r=>{const l=t("view users")||t("edit users")||t("delete users")||t("view analytics");return e.jsxs(v,{className:"border-border hover:bg-accent/50",children:[e.jsx(o,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(J,{className:"w-8 h-8",children:e.jsx(K,{className:"bg-primary text-primary-foreground text-sm",children:r.name.charAt(0).toUpperCase()})}),e.jsx("div",{children:e.jsx("p",{className:"text-sm font-medium text-foreground",children:r.name})})]})}),e.jsx(o,{className:"text-foreground",children:r.email}),e.jsx(o,{children:e.jsxs("div",{className:"flex gap-1 flex-wrap",children:[r.roles.slice(0,2).map(d=>e.jsx(w,{variant:"secondary",className:"text-xs",children:d.name},d.id)),r.roles.length>2&&e.jsxs(w,{variant:"outline",className:"text-xs",children:["+",r.roles.length-2]})]})}),e.jsx(o,{className:"text-muted-foreground",children:new Date(r.created_at).toLocaleDateString()}),e.jsx(o,{children:l?e.jsxs(D,{children:[e.jsx(_,{asChild:!0,children:e.jsx(C,{variant:"ghost",className:"h-8 w-8 p-0 hover:bg-accent",children:e.jsx(O,{className:"h-4 w-4"})})}),e.jsxs(k,{align:"end",className:"bg-popover border-border",children:[t("view users")&&e.jsx(x,{asChild:!0,className:"hover:bg-accent hover:text-accent-foreground",children:e.jsxs(h,{to:`/users/${r.id}`,className:"flex items-center",children:[e.jsx(W,{className:"mr-2 h-4 w-4"}),"View"]})}),t("view analytics")&&e.jsx(x,{asChild:!0,className:"hover:bg-accent hover:text-accent-foreground",children:e.jsxs(h,{to:`/analytics/users/${r.id}`,className:"flex items-center",children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"User Analytics"]})}),t("edit users")&&e.jsx(x,{asChild:!0,className:"hover:bg-accent hover:text-accent-foreground",children:e.jsxs(h,{to:`/users/${r.id}/edit`,className:"flex items-center",children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"Edit"]})}),t("delete users")&&e.jsxs(x,{onClick:()=>u(r.id),className:"text-destructive hover:bg-destructive hover:text-destructive-foreground",children:[e.jsx(Z,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]}):e.jsx("span",{className:"text-muted-foreground text-xs",children:"No actions"})})]},r.id)})})]})})},Ne=()=>{const{users:i,pagination:a,isLoading:u,deleteUser:t,goToPage:r,nextPage:l,prevPage:d}=F(),{searchQuery:P,setSearchQuery:T}=Q(),{hasPermission:N}=y(),U=async s=>{N("delete users")&&window.confirm("Are you sure you want to delete this user?")&&await t(s)},A=()=>{if(!a)return[];const s=[],{current_page:n,last_page:m}=a;n>3&&(s.push(1),n>4&&s.push("ellipsis-start"));for(let p=Math.max(1,n-2);p<=Math.min(m,n+2);p++)s.push(p);return n<m-2&&(n<m-3&&s.push("ellipsis-end"),s.push(m)),s};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(b,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground font-sans",children:"Users"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage system users and their permissions"})]})]}),N("create users")&&e.jsx(C,{asChild:!0,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:e.jsxs(h,{to:"/users/create",children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Add User"]})})]}),e.jsx(g,{className:"bg-card border-border",children:e.jsx(j,{className:"p-4",children:e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(E,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(S,{placeholder:"Search users...",value:P,onChange:s=>T(s.target.value),className:"pl-10 bg-background border-input text-foreground"})]})})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.jsxs(g,{className:"bg-card border-border",children:[e.jsxs(M,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium text-muted-foreground",children:"Total Users"}),e.jsx(b,{className:"w-4 h-4 text-chart-1"})]}),e.jsx(j,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:a?.total||i.length})})]})}),e.jsx(se,{users:i,isLoading:u,onDelete:U}),a&&a.last_page>1&&e.jsx(g,{className:"bg-card border-border",children:e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",a.from||0," to ",a.to||0," of ",a.total," results"]}),e.jsx(I,{children:e.jsxs(L,{children:[e.jsx(f,{children:e.jsx(H,{onClick:d,className:a.current_page===1?"pointer-events-none opacity-50":"cursor-pointer"})}),A().map((s,n)=>e.jsx(f,{children:s==="ellipsis-start"||s==="ellipsis-end"?e.jsx(R,{}):e.jsx($,{onClick:()=>r(s),isActive:a.current_page===s,className:"cursor-pointer",children:s})},n)),e.jsx(f,{children:e.jsx(q,{onClick:l,className:a.current_page===a.last_page?"pointer-events-none opacity-50":"cursor-pointer"})})]})})]})})})]})};export{Ne as default};
