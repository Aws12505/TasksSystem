import{D as N,j as e,A as k,p as C,q as D,B as m,a2 as w,ax as S,az as B,aA as T,aB as y,b6 as A,b7 as R,b8 as E}from"./index-By6KAy--.js";import{T as F,a as O,b as g,c as a,d as H,e as t}from"./table-DQWJ7GOy.js";import{B as I}from"./badge-7ejjz1pu.js";import{b as M,d as U,e as p,c as d,f as u,C as W}from"./clockingCalculations-BKczp_N2.js";import{C as $}from"./circle-alert-WL9ZmFoH.js";import{C as q}from"./chevron-left-BPSde7NC.js";const V=({records:h,companyTimezone:l,pagination:r,showUser:j=!1,onPageChange:f})=>{const[b,n]=N.useState(!1),[c,_]=N.useState(null);return h.length?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-lg border border-border overflow-hidden bg-card",children:e.jsxs(F,{children:[e.jsx(O,{children:e.jsxs(g,{className:"bg-accent",children:[j&&e.jsx(a,{className:"text-foreground",children:"Employee"}),e.jsx(a,{className:"text-foreground",children:"Date"}),e.jsx(a,{className:"text-foreground",children:"Clock In"}),e.jsx(a,{className:"text-foreground",children:"Clock Out"}),e.jsx(a,{className:"text-foreground",children:"Work Time"}),e.jsx(a,{className:"text-foreground",children:"Break Time"}),e.jsx(a,{className:"text-foreground",children:"Breaks"}),e.jsx(a,{className:"text-foreground",children:"Status"})]})}),e.jsx(H,{children:h.map(s=>{const o=M(s.clock_in_utc,s.clock_out_utc,s.break_records),i=U(s.break_records);return e.jsxs(g,{className:"border-border hover:bg-accent/50 cursor-pointer",role:"button",onClick:()=>{_(s),n(!0)},children:[j&&e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(k,{className:"h-8 w-8",children:[e.jsx(C,{src:s.user.avatar_url||void 0}),e.jsx(D,{className:"bg-primary text-primary-foreground",children:s.user.name.split(" ").map(x=>x[0]).join("").toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:s.user.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.user.email})]})]})}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-foreground",children:p({sessionDate:s.session_date,companyTimezone:l,utcFallback:s.clock_in_utc,locale:"en-US"})}),s.crosses_midnight&&e.jsx($,{className:"w-4 h-4 text-chart-2"})]})}),e.jsx(t,{className:"text-foreground",children:d(s.clock_in_utc,l).split(", ")[1]}),e.jsx(t,{className:"text-foreground",children:s.clock_out_utc?d(s.clock_out_utc,l).split(", ")[1]:"—"}),e.jsx(t,{children:e.jsx("span",{className:"font-bold text-chart-3 font-mono tabular-nums",children:u(o)})}),e.jsx(t,{children:e.jsx("span",{className:"font-bold text-chart-2 font-mono tabular-nums",children:u(i)})}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-foreground",children:s.break_records?.length||0})]})}),e.jsx(t,{children:e.jsx(I,{variant:s.status==="completed"?"secondary":s.status==="active"?"default":"outline",children:s.status==="completed"?"Completed":s.status==="active"?"Active":"On Break"})})]},s.id)})})]})}),r&&r.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",r.from||0," to ",r.to||0," of ",r.total," records"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>f?.(r.current_page-1),disabled:r.current_page===1,className:"border-input",children:[e.jsx(q,{className:"w-4 h-4"}),"Previous"]}),e.jsxs("span",{className:"text-sm px-4 text-foreground",children:["Page ",r.current_page," of ",r.last_page]}),e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>f?.(r.current_page+1),disabled:r.current_page===r.last_page,className:"border-input",children:["Next",e.jsx(w,{className:"w-4 h-4"})]})]})]}),e.jsx(S,{open:b,onOpenChange:n,children:e.jsxs(B,{className:"bg-card border-border text-foreground max-w-lg",children:[e.jsxs(T,{children:[e.jsx(y,{children:"Session Details"}),e.jsx(A,{className:"text-muted-foreground",children:c?`Date: ${p({sessionDate:c.session_date,companyTimezone:l,utcFallback:c.clock_in_utc,locale:"en-US"})} • ${c.crosses_midnight?"Crossed midnight":"Same day"}`:""})]}),c?.break_records?.length?e.jsx("div",{className:"space-y-4",children:c.break_records.map((s,o)=>{const i=d(s.break_start_utc,l).split(", ")[1],x=s.break_end_utc?d(s.break_end_utc,l).split(", ")[1]:null,v=s.break_end_utc?Math.max(0,Math.floor((new Date(s.break_end_utc).getTime()-new Date(s.break_start_utc).getTime())/1e3)):0;return e.jsxs("div",{className:"rounded-md border border-border p-4 bg-accent",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm font-medium",children:["Break ",o+1," ",s.status==="active"?e.jsx("span",{className:"ml-2 inline-block rounded bg-chart-2 px-2 py-0.5 text-xs text-white",children:"Active"}):null]}),s.status==="completed"?e.jsx("div",{className:"text-sm font-mono tabular-nums text-foreground",children:u(v)}):null]}),e.jsx(R,{className:"my-3 bg-border"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-foreground",children:"Start:"})," ",i]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-foreground",children:"End:"})," ",x??"—"]}),s.description?e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-foreground",children:"Notes:"})," ",s.description]}):null]})]},s.id)})}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"No breaks recorded for this session."}),e.jsx(E,{className:"mt-4",children:e.jsx(m,{variant:"outline",className:"border-input",onClick:()=>n(!1),children:"Close"})})]})})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"No records found"})})};export{V as R};
