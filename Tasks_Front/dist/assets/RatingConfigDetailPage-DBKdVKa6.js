import{h as D,y as k,p as R,R as S,j as e,B as m,x as j,C as B}from"./index-DB2dH0Gn.js";import{C as a,d as r,a as n,b as c}from"./card-Do0T9gHn.js";import{B as l}from"./badge-DBBjrr1q.js";import{A as P,a as U}from"./avatar-BZWEtldt.js";import{A as L,a as T,b as F,c as z,d as O,e as E,f as I,g as V}from"./alert-dialog-kR6fC0Dz.js";import{u as H}from"./useRatingConfig-vwmauY54.js";import{R as f}from"./RatingConfigTypeBadge-yil1wQop.js";import{S as p}from"./settings-BWMHeYeG.js";import{A as u}from"./arrow-left-C3FmFHG1.js";import{P as M}from"./play-BUQJgYOJ.js";import{S as q}from"./square-pen-Cf53-zlk.js";import{C as h}from"./calendar-DEN2tVaj.js";import"./index-D75iUVLY.js";import"./ratingConfigsStore-2mUuLK8N.js";import"./ratingConfigService-B3itJf9t.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],G=D("code",$),le=()=>{const{id:N}=k(),{ratingConfig:s,isLoading:v,error:g,activateConfig:b}=H(N),{hasPermission:o}=R(),[y,d]=S.useState(!1),w=async()=>{o("edit rating configs")&&d(!0)},C=async()=>{if(!o("edit rating configs")){d(!1);return}await b(),d(!1)},A=()=>{if(!s)return null;if(s.type==="final_rating"){const t=s.config_data;return e.jsxs(a,{className:"bg-card border-border",children:[e.jsx(n,{children:e.jsxs(c,{className:"text-foreground flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4"}),"Formula Configuration"]})}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Expression"}),e.jsx("div",{className:"mt-1 p-3 bg-accent/20 rounded-lg overflow-x-auto",children:e.jsx("code",{className:"text-sm font-mono text-foreground whitespace-pre",children:t.expression})})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-muted-foreground mb-3",children:["Variables (",t.variables.length,")"]}),e.jsx("div",{className:"space-y-3",children:t.variables.map((i,_)=>e.jsx("div",{className:"p-3 border border-border rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Variable Name"}),e.jsx("p",{className:"text-sm font-mono text-foreground",children:i.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Operation"}),e.jsx(l,{variant:"outline",className:"text-xs",children:i.operation.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Model"}),e.jsx("p",{className:"text-sm text-foreground",children:i.model})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Column"}),e.jsx("p",{className:"text-sm font-mono text-foreground",children:i.column})]})]})},_))})]})]})]})}const x=s.config_data;return e.jsxs(a,{className:"bg-card border-border",children:[e.jsx(n,{children:e.jsx(c,{className:"text-foreground",children:"Rating Fields"})}),e.jsx(r,{children:e.jsx("div",{className:"space-y-3",children:x.fields.map((t,i)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:t.name}),t.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.description})]}),e.jsxs(l,{variant:"outline",className:"text-sm",children:["Max: ",t.max_value]})]},i))})})]})};return v?e.jsx("div",{className:"min-h-screen flex flex-col",children:e.jsxs("div",{className:"flex-1 space-y-6 p-4 md:p-6 max-w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(p,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("div",{className:"h-8 bg-muted animate-pulse rounded w-48"}),e.jsx("div",{className:"h-4 bg-muted animate-pulse rounded w-64 mt-2"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(m,{variant:"outline",size:"sm",disabled:!0,children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),"Back to Configurations"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(a,{className:"bg-card border-border lg:col-span-2",children:e.jsx(r,{className:"p-6",children:e.jsx("div",{className:"h-40 bg-muted animate-pulse rounded"})})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(a,{className:"bg-card border-border",children:e.jsx(r,{className:"p-6",children:e.jsx("div",{className:"h-14 bg-muted animate-pulse rounded"})})}),e.jsx(a,{className:"bg-card border-border",children:e.jsx(r,{className:"p-6",children:e.jsx("div",{className:"h-24 bg-muted animate-pulse rounded"})})}),e.jsx(a,{className:"bg-card border-border",children:e.jsx(r,{className:"p-6",children:e.jsx("div",{className:"h-24 bg-muted animate-pulse rounded"})})})]})]})]})}):g||!s?e.jsx("div",{className:"min-h-screen flex flex-col",children:e.jsx("div",{className:"flex-1 space-y-6 p-4 md:p-6 max-w-full",children:e.jsx(a,{className:"bg-card border-border",children:e.jsx(r,{className:"p-8 text-center",children:e.jsx("p",{className:"text-destructive",children:g||"Rating configuration not found"})})})})}):e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsxs("div",{className:"flex-1 space-y-6 p-4 md:p-6 max-w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(p,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground font-sans",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{type:s.type}),e.jsx(l,{variant:s.is_active?"default":"secondary",className:s.is_active?"text-green-600 bg-green-100":"",children:s.is_active?"Active":"Inactive"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o("edit rating configs")&&!s.is_active&&e.jsxs(m,{variant:"outline",size:"sm",onClick:w,children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),"Activate"]}),o("edit rating configs")&&e.jsx(m,{asChild:!0,className:"bg-primary text-primary-foreground hover:bg-primary/90",size:"sm",children:e.jsxs(j,{to:`/rating-configs/${s.id}/edit`,children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Edit"]})}),e.jsx(m,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(j,{to:"/rating-configs",className:"flex items-center",children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),"Back to Configurations"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.description&&e.jsxs(a,{className:"bg-card border-border",children:[e.jsx(n,{children:e.jsx(c,{className:"text-foreground",children:"Description"})}),e.jsx(r,{children:e.jsx("p",{className:"text-foreground",children:s.description})})]}),A()]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(a,{className:"bg-card border-border",children:[e.jsx(n,{children:e.jsxs(c,{className:"text-foreground flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4"}),"Creator"]})}),e.jsx(r,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(P,{className:"w-10 h-10",children:e.jsx(U,{className:"bg-primary text-primary-foreground",children:s.creator?.name?.charAt(0).toUpperCase()||"U"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:s.creator?.name||"Unknown User"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.creator?.email})]})]})})]}),e.jsxs(a,{className:"bg-card border-border",children:[e.jsx(n,{children:e.jsxs(c,{className:"text-foreground flex items-center gap-2",children:[e.jsx(h,{className:"w-4 h-4"}),"Timeline"]})}),e.jsxs(r,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(h,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Created:"}),e.jsx("span",{className:"text-foreground",children:new Date(s.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(h,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Updated:"}),e.jsx("span",{className:"text-foreground",children:new Date(s.updated_at).toLocaleDateString()})]})]})]}),e.jsxs(a,{className:"bg-card border-border",children:[e.jsx(n,{children:e.jsx(c,{className:"text-foreground",children:"Summary"})}),e.jsxs(r,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Type"}),e.jsx(f,{type:s.type})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Status"}),e.jsx(l,{variant:s.is_active?"default":"secondary",className:s.is_active?"text-green-600 bg-green-100":"",children:s.is_active?"Active":"Inactive"})]}),s.type!=="final_rating"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Fields"}),e.jsx(l,{variant:"outline",children:s.config_data.fields.length})]}),s.type==="final_rating"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Variables"}),e.jsx(l,{variant:"outline",children:s.config_data.variables.length})]})]})]})]})]})]}),e.jsx(L,{open:y,onOpenChange:x=>!x&&d(!1),children:e.jsxs(T,{className:"sm:max-w-[480px]",children:[e.jsxs(F,{children:[e.jsx(z,{children:"Activate configuration"}),e.jsx(O,{children:"Are you sure you want to activate this rating configuration? This may affect how ratings are calculated."})]}),e.jsxs(E,{children:[e.jsx(I,{onClick:()=>d(!1),children:"Cancel"}),e.jsx(V,{onClick:C,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:"Activate"})]})]})})]})};export{le as default};
