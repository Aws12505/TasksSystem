import{a as b,b as h,o as p,j as e,F as g,c as n,d as l,e as d,f as c,I as i,g as x,B as w,L as N,s as a,G as f}from"./index-DbgasQnk.js";const F=p({name:a().min(1,"Name is required").max(255),email:a().email("Invalid email address").max(255),password:a().min(8,"Password must be at least 8 characters")}),y=p({name:a().min(1,"Name is required").max(255),email:a().email("Invalid email address").max(255),password:a().min(8,"Password must be at least 8 characters").optional().or(f(""))}),E=({user:m,onSubmit:u,isLoading:r})=>{const t=!!m,o=b({resolver:h(t?y:F),defaultValues:{name:m?.name||"",email:m?.email||"",password:""}}),j=async s=>{t&&(!s.password||s.password==="")&&delete s.password,await u(s)};return e.jsx(g,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(j),className:"space-y-6",children:[e.jsx(n,{control:o.control,name:"name",render:({field:s})=>e.jsxs(l,{children:[e.jsx(d,{className:"text-foreground",children:"Name"}),e.jsx(c,{children:e.jsx(i,{placeholder:"Enter user name",...s,disabled:r,className:"bg-background border-input text-foreground"})}),e.jsx(x,{className:"text-destructive"})]})}),e.jsx(n,{control:o.control,name:"email",render:({field:s})=>e.jsxs(l,{children:[e.jsx(d,{className:"text-foreground",children:"Email"}),e.jsx(c,{children:e.jsx(i,{type:"email",placeholder:"Enter email address",...s,disabled:r,className:"bg-background border-input text-foreground"})}),e.jsx(x,{className:"text-destructive"})]})}),e.jsx(n,{control:o.control,name:"password",render:({field:s})=>e.jsxs(l,{children:[e.jsxs(d,{className:"text-foreground",children:["Password ",t&&e.jsx("span",{className:"text-muted-foreground text-sm",children:"(leave empty to keep current)"})]}),e.jsx(c,{children:e.jsx(i,{type:"password",placeholder:t?"Enter new password":"Enter password",...s,disabled:r,className:"bg-background border-input text-foreground"})}),e.jsx(x,{className:"text-destructive"})]})}),e.jsxs(w,{type:"submit",disabled:r,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:[r&&e.jsx(N,{className:"mr-2 h-4 w-4 animate-spin"}),t?"Update User":"Create User"]})]})})};export{E as U};
