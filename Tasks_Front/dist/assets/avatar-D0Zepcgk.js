import{r as i,j as d,R as w,W as v,ac as b,_ as f,l as p}from"./index-CWjV9tuG.js";import{r as C}from"./index-CS9qSGI_.js";var I=C();function _(){return I.useSyncExternalStore(j,()=>!0,()=>!1)}function j(){return()=>{}}var m="Avatar",[y,H]=w(m),[k,S]=y(m),x=i.forwardRef((a,t)=>{const{__scopeAvatar:n,...r}=a,[o,e]=i.useState("idle");return d.jsx(k,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:e,children:d.jsx(v.span,{...r,ref:t})})});x.displayName=m;var L="AvatarImage",N=i.forwardRef((a,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...e}=a,l=S(L,n),s=F(r,e),u=b(c=>{o(c),l.onImageLoadingStatusChange(c)});return f(()=>{s!=="idle"&&u(s)},[s,u]),s==="loaded"?d.jsx(v.img,{...e,ref:t,src:r}):null});N.displayName=L;var E="AvatarFallback",h=i.forwardRef((a,t)=>{const{__scopeAvatar:n,delayMs:r,...o}=a,e=S(E,n),[l,s]=i.useState(r===void 0);return i.useEffect(()=>{if(r!==void 0){const u=window.setTimeout(()=>s(!0),r);return()=>window.clearTimeout(u)}},[r]),l&&e.imageLoadingStatus!=="loaded"?d.jsx(v.span,{...o,ref:t}):null});h.displayName=E;function A(a,t){return a?t?(a.src!==t&&(a.src=t),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function F(a,{referrerPolicy:t,crossOrigin:n}){const r=_(),o=i.useRef(null),e=r?(o.current||(o.current=new window.Image),o.current):null,[l,s]=i.useState(()=>A(e,a));return f(()=>{s(A(e,a))},[e,a]),f(()=>{const u=R=>()=>{s(R)};if(!e)return;const c=u("loaded"),g=u("error");return e.addEventListener("load",c),e.addEventListener("error",g),t&&(e.referrerPolicy=t),typeof n=="string"&&(e.crossOrigin=n),()=>{e.removeEventListener("load",c),e.removeEventListener("error",g)}},[e,n,t]),l}var M=x,P=h;function W({className:a,...t}){return d.jsx(M,{"data-slot":"avatar",className:p("relative flex size-8 shrink-0 overflow-hidden rounded-full",a),...t})}function $({className:a,...t}){return d.jsx(P,{"data-slot":"avatar-fallback",className:p("bg-muted flex size-full items-center justify-center rounded-full",a),...t})}export{W as A,$ as a};
