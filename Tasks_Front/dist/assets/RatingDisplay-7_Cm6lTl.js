import{r as d,az as ue,j as n,a9 as fe,aL as me,ac as E,aa as K,a7 as N,a8 as he,af as G,aB as pe,aA as xe,i as V,n as Se,E as $}from"./index-C-8X4UdE.js";import{C as ge,a as ve,b as be,d as we}from"./card-C5R7LjTr.js";import{B as ye}from"./badge-CdenegGE.js";import{P as X}from"./progress-DutzFcni.js";import{C as je}from"./calendar-BtqsTB4H.js";var W=["PageUp","PageDown"],q=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],J={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},_="Slider",[H,Re,Pe]=me(_),[Q,Ge]=fe(_,[Pe]),[De,B]=Q(_),Z=d.forwardRef((e,t)=>{const{name:o,min:r=0,max:s=100,step:l=1,orientation:a="horizontal",disabled:c=!1,minStepsBetweenThumbs:u=0,defaultValue:v=[r],value:x,onValueChange:i=()=>{},onValueCommit:f=()=>{},inverted:g=!1,form:y,...S}=e,h=d.useRef(new Set),m=d.useRef(0),b=a==="horizontal"?Ee:Ne,[p=[],C]=ue({prop:x,defaultProp:v,onChange:w=>{[...h.current][m.current]?.focus(),i(w)}}),I=d.useRef(p);function k(w){const j=Ke(p,w);M(w,j)}function ce(w){M(w,m.current)}function de(){const w=I.current[m.current];p[m.current]!==w&&f(p)}function M(w,j,{commit:T}={commit:!1}){const U=Te(l),z=ze(Math.round((w-r)/l)*l+r,U),A=G(z,[r,s]);C((D=[])=>{const R=Me(D,A,j);if(ke(R,u*l)){m.current=R.indexOf(A);const Y=String(R)!==String(D);return Y&&T&&f(R),Y?R:D}else return D})}return n.jsx(De,{scope:e.__scopeSlider,name:o,disabled:c,min:r,max:s,valueIndexToChangeRef:m,thumbs:h.current,values:p,orientation:a,form:y,children:n.jsx(H.Provider,{scope:e.__scopeSlider,children:n.jsx(H.Slot,{scope:e.__scopeSlider,children:n.jsx(b,{"aria-disabled":c,"data-disabled":c?"":void 0,...S,ref:t,onPointerDown:E(S.onPointerDown,()=>{c||(I.current=p)}),min:r,max:s,inverted:g,onSlideStart:c?void 0:k,onSlideMove:c?void 0:ce,onSlideEnd:c?void 0:de,onHomeKeyDown:()=>!c&&M(r,0,{commit:!0}),onEndKeyDown:()=>!c&&M(s,p.length-1,{commit:!0}),onStepKeyDown:({event:w,direction:j})=>{if(!c){const z=W.includes(w.key)||w.shiftKey&&q.includes(w.key)?10:1,A=m.current,D=p[A],R=l*z*j;M(D+R,A,{commit:!0})}}})})})})});Z.displayName=_;var[ee,te]=Q(_,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Ee=d.forwardRef((e,t)=>{const{min:o,max:r,dir:s,inverted:l,onSlideStart:a,onSlideMove:c,onSlideEnd:u,onStepKeyDown:v,...x}=e,[i,f]=d.useState(null),g=N(t,b=>f(b)),y=d.useRef(void 0),S=he(s),h=S==="ltr",m=h&&!l||!h&&l;function P(b){const p=y.current||i.getBoundingClientRect(),C=[0,p.width],k=F(C,m?[o,r]:[r,o]);return y.current=p,k(b-p.left)}return n.jsx(ee,{scope:e.__scopeSlider,startEdge:m?"left":"right",endEdge:m?"right":"left",direction:m?1:-1,size:"width",children:n.jsx(ne,{dir:S,"data-orientation":"horizontal",...x,ref:g,style:{...x.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const p=P(b.clientX);a?.(p)},onSlideMove:b=>{const p=P(b.clientX);c?.(p)},onSlideEnd:()=>{y.current=void 0,u?.()},onStepKeyDown:b=>{const C=J[m?"from-left":"from-right"].includes(b.key);v?.({event:b,direction:C?-1:1})}})})}),Ne=d.forwardRef((e,t)=>{const{min:o,max:r,inverted:s,onSlideStart:l,onSlideMove:a,onSlideEnd:c,onStepKeyDown:u,...v}=e,x=d.useRef(null),i=N(t,x),f=d.useRef(void 0),g=!s;function y(S){const h=f.current||x.current.getBoundingClientRect(),m=[0,h.height],b=F(m,g?[r,o]:[o,r]);return f.current=h,b(S-h.top)}return n.jsx(ee,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:n.jsx(ne,{"data-orientation":"vertical",...v,ref:i,style:{...v.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:S=>{const h=y(S.clientY);l?.(h)},onSlideMove:S=>{const h=y(S.clientY);a?.(h)},onSlideEnd:()=>{f.current=void 0,c?.()},onStepKeyDown:S=>{const m=J[g?"from-bottom":"from-top"].includes(S.key);u?.({event:S,direction:m?-1:1})}})})}),ne=d.forwardRef((e,t)=>{const{__scopeSlider:o,onSlideStart:r,onSlideMove:s,onSlideEnd:l,onHomeKeyDown:a,onEndKeyDown:c,onStepKeyDown:u,...v}=e,x=B(_,o);return n.jsx(K.span,{...v,ref:t,onKeyDown:E(e.onKeyDown,i=>{i.key==="Home"?(a(i),i.preventDefault()):i.key==="End"?(c(i),i.preventDefault()):W.concat(q).includes(i.key)&&(u(i),i.preventDefault())}),onPointerDown:E(e.onPointerDown,i=>{const f=i.target;f.setPointerCapture(i.pointerId),i.preventDefault(),x.thumbs.has(f)?f.focus():r(i)}),onPointerMove:E(e.onPointerMove,i=>{i.target.hasPointerCapture(i.pointerId)&&s(i)}),onPointerUp:E(e.onPointerUp,i=>{const f=i.target;f.hasPointerCapture(i.pointerId)&&(f.releasePointerCapture(i.pointerId),l(i))})})}),re="SliderTrack",oe=d.forwardRef((e,t)=>{const{__scopeSlider:o,...r}=e,s=B(re,o);return n.jsx(K.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:t})});oe.displayName=re;var L="SliderRange",se=d.forwardRef((e,t)=>{const{__scopeSlider:o,...r}=e,s=B(L,o),l=te(L,o),a=d.useRef(null),c=N(t,a),u=s.values.length,v=s.values.map(f=>le(f,s.min,s.max)),x=u>1?Math.min(...v):0,i=100-Math.max(...v);return n.jsx(K.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:c,style:{...e.style,[l.startEdge]:x+"%",[l.endEdge]:i+"%"}})});se.displayName=L;var O="SliderThumb",ae=d.forwardRef((e,t)=>{const o=Re(e.__scopeSlider),[r,s]=d.useState(null),l=N(t,c=>s(c)),a=d.useMemo(()=>r?o().findIndex(c=>c.ref.current===r):-1,[o,r]);return n.jsx(_e,{...e,ref:l,index:a})}),_e=d.forwardRef((e,t)=>{const{__scopeSlider:o,index:r,name:s,...l}=e,a=B(O,o),c=te(O,o),[u,v]=d.useState(null),x=N(t,P=>v(P)),i=u?a.form||!!u.closest("form"):!0,f=pe(u),g=a.values[r],y=g===void 0?0:le(g,a.min,a.max),S=Ae(r,a.values.length),h=f?.[c.size],m=h?Be(h,y,c.direction):0;return d.useEffect(()=>{if(u)return a.thumbs.add(u),()=>{a.thumbs.delete(u)}},[u,a.thumbs]),n.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${y}% + ${m}px)`},children:[n.jsx(H.ItemSlot,{scope:e.__scopeSlider,children:n.jsx(K.span,{role:"slider","aria-label":e["aria-label"]||S,"aria-valuemin":a.min,"aria-valuenow":g,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...l,ref:x,style:g===void 0?{display:"none"}:e.style,onFocus:E(e.onFocus,()=>{a.valueIndexToChangeRef.current=r})})}),i&&n.jsx(ie,{name:s??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:g},r)]})});ae.displayName=O;var Ce="RadioBubbleInput",ie=d.forwardRef(({__scopeSlider:e,value:t,...o},r)=>{const s=d.useRef(null),l=N(s,r),a=xe(t);return d.useEffect(()=>{const c=s.current;if(!c)return;const u=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(u,"value").set;if(a!==t&&x){const i=new Event("input",{bubbles:!0});x.call(c,t),c.dispatchEvent(i)}},[a,t]),n.jsx(K.input,{style:{display:"none"},...o,ref:l,defaultValue:t})});ie.displayName=Ce;function Me(e=[],t,o){const r=[...e];return r[o]=t,r.sort((s,l)=>s-l)}function le(e,t,o){const l=100/(o-t)*(e-t);return G(l,[0,100])}function Ae(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Ke(e,t){if(e.length===1)return 0;const o=e.map(s=>Math.abs(s-t)),r=Math.min(...o);return o.indexOf(r)}function Be(e,t,o){const r=e/2,l=F([0,50],[0,r]);return(r-l(t)*o)*o}function Ie(e){return e.slice(0,-1).map((t,o)=>e[o+1]-t)}function ke(e,t){if(t>0){const o=Ie(e);return Math.min(...o)>=t}return!0}function F(e,t){return o=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(o-e[0])}}function Te(e){return(String(e).split(".")[1]||"").length}function ze(e,t){const o=Math.pow(10,t);return Math.round(e*o)/o}var Ve=Z,He=oe,Le=se,Oe=ae;function We({className:e,defaultValue:t,value:o,min:r=0,max:s=100,...l}){const a=d.useMemo(()=>Array.isArray(o)?o:Array.isArray(t)?t:[r,s],[o,t,r,s]);return n.jsxs(Ve,{"data-slot":"slider",defaultValue:t,value:o,min:r,max:s,className:V("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...l,children:[n.jsx(He,{"data-slot":"slider-track",className:V("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:n.jsx(Le,{"data-slot":"slider-range",className:V("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:a.length},(c,u)=>n.jsx(Oe,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},u))]})}const qe=({rating:e,maxRating:t=100})=>{const o=Object.entries(e.rating_data);return n.jsxs(ge,{className:"bg-card border-border",children:[n.jsx(ve,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(be,{className:"text-foreground flex items-center gap-2",children:[n.jsx(Se,{className:"w-5 h-5 text-yellow-500"}),"Rating #",e.id]}),n.jsxs(ye,{variant:"outline",className:"text-lg px-3 py-1",children:[e.final_rating,"%"]})]})}),n.jsxs(we,{className:"space-y-4",children:[n.jsx("div",{className:"space-y-3",children:o.map(([r,s])=>{const l=e.config_snapshot?.fields?.find(a=>a.name===r);return n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-sm font-medium text-foreground",children:r}),l?.description&&n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:l.description})]}),n.jsx("span",{className:"text-sm text-muted-foreground",children:s})]}),n.jsx(X,{value:s/t*100,className:"h-2"})]},r)})}),n.jsxs("div",{className:"pt-4 border-t border-border",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"font-medium text-foreground",children:"Overall Rating"}),n.jsxs("span",{className:"text-lg font-bold text-foreground",children:[e.final_rating,"%"]})]}),n.jsx(X,{value:e.final_rating,className:"h-3"})]}),n.jsx("div",{className:"pt-4 border-t border-border",children:n.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[e.rater&&n.jsxs(n.Fragment,{children:[n.jsx($,{className:"w-4 h-4"}),n.jsxs("span",{children:["Rated by ",e.rater.name]})]}),e.stakeholder&&n.jsxs(n.Fragment,{children:[n.jsx($,{className:"w-4 h-4"}),n.jsxs("span",{children:["Rated by ",e.stakeholder.name]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(je,{className:"w-4 h-4"}),n.jsx("span",{children:new Date(e.rated_at).toLocaleDateString()})]})]})})]})]})};export{qe as R,We as S};
