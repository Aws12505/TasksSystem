import{h as de,k as me,t as d,ai as ue,r as C,j as e,U as xe,B as p,M as G,N as J,O as K,P as W,Q as F,I as z,aj as ge,a as he,b as pe,o as ee,F as je,c as T,d as L,e as A,f as U,g as E,R as fe,L as be,a2 as Ne,ak as se,s as _,al as ke,q as ae,D as ve,v as ye,w as Se,x as X,z as we,y as V,S as Y,n as Ce}from"./index-BOfNqdHU.js";import{C as D,a as R,b as O,d as M}from"./card-VRr8nV95.js";import{B as P}from"./badge-XdKDng72.js";import{s as w,u as _e}from"./subtaskService-B2JsagRJ.js";import{a as te,T as Pe}from"./TaskPriorityBadge-m8ZUfrJY.js";import{A as Te,a as Le}from"./avatar-topmWw3Q.js";import{P as re}from"./plus-ZkbNUsEY.js";import{C as ne}from"./checkbox-CwVYOTt6.js";import{P as Ae,a as Ue,b as I,c as Fe,d as De,e as Me,f as Be}from"./pagination-Dwx5XK5W.js";import{L as Ee}from"./list-TJr94-9C.js";import{C as ie}from"./calendar-Mvv9E9t0.js";import{E as ze}from"./ellipsis-Br2SwrZN.js";import{S as le}from"./square-pen-DRxYo37W.js";import{T as qe}from"./trash-2-DSrtDu12.js";import{A as $e}from"./arrow-left-nl7Vto6a.js";import"./index-ChJeZxSk.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]],Ie=de("weight",Ve),Re=me((a,i)=>({subtasks:[],currentSubtask:null,pagination:null,taskPagination:{},currentTaskId:null,isLoading:!1,error:null,fetchSubtasksByTask:async(r,t=1)=>{a({isLoading:!0,error:null,currentTaskId:r});try{const s=await w.getSubtasksByTask(r,t);s.success?a(o=>({subtasks:s.data,taskPagination:{...o.taskPagination,[r]:s.pagination||{current_page:1,total:s.data.length,per_page:15,last_page:1,from:s.data.length>0?1:null,to:s.data.length}},pagination:s.pagination||{current_page:1,total:s.data.length,per_page:15,last_page:1,from:s.data.length>0?1:null,to:s.data.length},isLoading:!1})):(a({error:s.message,isLoading:!1}),d.error(s.message))}catch(s){const o=s.message||"Failed to fetch subtasks";a({error:o,isLoading:!1}),d.error(o)}},fetchSubtask:async r=>{a({isLoading:!0,error:null});try{const t=await w.getSubtask(r);t.success?a({currentSubtask:t.data,isLoading:!1}):(a({error:t.message,isLoading:!1}),d.error(t.message))}catch(t){const s=t.message||"Failed to fetch subtask";a({error:s,isLoading:!1}),d.error(s)}},createSubtask:async r=>{a({isLoading:!0,error:null});try{const t=await w.createSubtask(r);return t.success?(a({isLoading:!1}),d.success("Subtask created successfully"),i().fetchSubtasksByTask(r.task_id),t.data):(a({error:t.message,isLoading:!1}),d.error(t.message),null)}catch(t){const s=t.message||"Failed to create subtask";return a({error:s,isLoading:!1}),d.error(s),null}},updateSubtask:async(r,t)=>{a({isLoading:!0,error:null});try{const s=await w.updateSubtask(r,t);return s.success?(a({currentSubtask:s.data,isLoading:!1}),d.success("Subtask updated successfully"),t.task_id&&i().fetchSubtasksByTask(t.task_id),s.data):(a({error:s.message,isLoading:!1}),d.error(s.message),null)}catch(s){const o=s.message||"Failed to update subtask";return a({error:o,isLoading:!1}),d.error(o),null}},updateTaskStatus:async(r,t)=>{try{const s=await ue.updateTaskStatus(r,t);return s.success?(d.success("Task status updated"),s.data):(d.error(s.message),null)}catch(s){return d.error(s.message||"Failed to update task status"),null}},deleteSubtask:async r=>{a({isLoading:!0,error:null});try{const t=await w.deleteSubtask(r);return t.success?(a({isLoading:!1}),d.success("Subtask deleted successfully"),!0):(a({error:t.message,isLoading:!1}),d.error(t.message),!1)}catch(t){const s=t.message||"Failed to delete subtask";return a({error:s,isLoading:!1}),d.error(s),!1}},toggleSubtaskCompletion:async r=>{try{const t=await w.toggleSubtaskCompletion(r);return t.success?(d.success("Subtask completion toggled"),a(s=>({subtasks:s.subtasks.map(o=>o.id===r?t.data:o)})),t.data):(d.error(t.message),null)}catch(t){return d.error(t.message||"Failed to toggle subtask completion"),null}},clearCurrentSubtask:()=>a({currentSubtask:null,error:null})})),ce=a=>{const{subtasks:i,pagination:r,taskPagination:t,currentTaskId:s,isLoading:o,error:x,fetchSubtasksByTask:g,createSubtask:c,updateSubtask:j,updateTaskStatus:u,deleteSubtask:v,toggleSubtaskCompletion:h}=Re();C.useEffect(()=>{a&&s!==a&&g(a,1)},[a,s,g]);const m=a?t[a]||null:r,f=S=>{a&&g(a,S)};return{subtasks:i,pagination:m,isLoading:o,error:x,fetchSubtasks:S=>g(S),createSubtask:c,updateSubtask:j,updateTaskStatus:u,deleteSubtask:v,toggleCompletion:h,goToPage:f,nextPage:()=>{m&&m.current_page<m.last_page&&f(m.current_page+1)},prevPage:()=>{m&&m.current_page>1&&f(m.current_page-1)}}},Oe=({taskWithAssignments:a,availableUsers:i,onAddUser:r,onUpdateAssignment:t,onRemoveUser:s,isLoading:o=!1})=>{const[x,g]=C.useState(!1),[c,j]=C.useState(""),[u,v]=C.useState(10);if(!a)return null;const h=a.assigned_users||[],m=h.map(l=>l.id),f=i.filter(l=>!m.includes(l.id)),N=a.total_assigned_percentage||0,y=100-N,S=async()=>{if(!c||u<=0)return;await r(Number(c),u)&&(j(""),v(10),g(!1))},q=async(l,k)=>{k<=0||k>100||await t(l,k)};return e.jsxs(D,{className:"bg-card border-border",children:[e.jsxs(R,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(O,{className:"text-foreground flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5"}),"Task Assignments (",h.length,")"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(P,{variant:"outline",className:"text-xs",children:[N,"% assigned"]}),f.length>0&&e.jsxs(p,{size:"sm",onClick:()=>g(!0),className:"bg-primary text-primary-foreground hover:bg-primary/90",disabled:y<=0,children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Assign User"]})]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(N,100)}%`}})})]}),e.jsxs(M,{className:"space-y-4",children:[x&&e.jsxs("div",{className:"p-4 border border-border rounded-lg bg-accent/20",children:[e.jsx("h4",{className:"text-sm font-medium text-foreground mb-3",children:"Assign User to Task"}),e.jsxs("div",{className:"flex items-end gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Select User"}),e.jsxs(G,{value:c,onValueChange:j,children:[e.jsx(J,{className:"bg-background border-input",children:e.jsx(K,{placeholder:"Choose a user"})}),e.jsx(W,{children:f.map(l=>e.jsx(F,{value:l.id.toString(),children:l.name},l.id))})]})]}),e.jsxs("div",{className:"w-24",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Percentage"}),e.jsx(z,{type:"number",value:u,onChange:l=>v(Number(l.target.value)),min:"1",max:y,className:"bg-background border-input text-foreground"})]}),e.jsx(p,{size:"sm",onClick:S,disabled:!c||u<=0||u>y,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:"Add"}),e.jsx(p,{size:"sm",variant:"outline",onClick:()=>g(!1),children:"Cancel"})]}),y<u&&e.jsxs("p",{className:"text-xs text-destructive mt-2",children:["Only ",y,"% remaining to assign"]})]}),o?e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((l,k)=>e.jsx("div",{className:"h-16 bg-muted animate-pulse rounded-lg"},k))}):h.length===0?e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No users assigned to this task yet."}):h.map(l=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Te,{className:"w-8 h-8",children:e.jsx(Le,{className:"bg-primary text-primary-foreground text-sm",children:l.name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:l.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:l.email})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20",children:e.jsx(z,{type:"number",value:l.pivot.percentage,onChange:k=>q(l.id,Number(k.target.value)),min:"1",max:"100",className:"text-xs h-8 bg-background border-input text-foreground"})}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"%"}),e.jsx(p,{size:"sm",variant:"ghost",onClick:()=>s(l.id),className:"h-8 w-8 p-0 text-destructive hover:bg-destructive hover:text-destructive-foreground",children:e.jsx(ge,{className:"h-4 w-4"})})]})]},l.id)),e.jsxs("div",{className:"pt-2 border-t border-border",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Assigned:"}),e.jsxs("span",{className:`font-medium ${a.is_fully_assigned?"text-chart-3":N>100?"text-destructive":"text-muted-foreground"}`,children:[N,"%"]})]}),N>100&&e.jsx("p",{className:"text-xs text-destructive mt-1",children:"Task is over-assigned. Please adjust percentages."}),a.is_fully_assigned&&e.jsx("p",{className:"text-xs text-chart-3 mt-1",children:"Task is fully assigned."})]})]})]})},He=ee({name:_().min(1,"Subtask name is required").max(255),description:_().optional(),due_date:_().min(1,"Due date is required"),priority:se(["low","medium","high","critical"]),task_id:ke()}),Qe=ee({name:_().min(1,"Subtask name is required").max(255),description:_().optional(),due_date:_().min(1,"Due date is required"),priority:se(["low","medium","high","critical"]),is_complete:Ne().optional()}),Z=({subtask:a,taskId:i,onSubmit:r,onCancel:t,isLoading:s})=>{const o=!!a,x=he({resolver:pe(o?Qe:He),defaultValues:{name:a?.name||"",description:a?.description||"",due_date:a?.due_date?new Date(a.due_date).toISOString().split("T")[0]:"",priority:a?.priority||"medium",is_complete:a?.is_complete||!1,task_id:i}}),g=async c=>{const j={...c,...i&&{task_id:i}};await r(j)};return e.jsx(je,{...x,children:e.jsxs("form",{onSubmit:x.handleSubmit(g),className:"space-y-4",children:[e.jsx(T,{control:x.control,name:"name",render:({field:c})=>e.jsxs(L,{children:[e.jsx(A,{className:"text-foreground",children:"Subtask Name"}),e.jsx(U,{children:e.jsx(z,{placeholder:"Enter subtask name",...c,disabled:s,className:"bg-background border-input text-foreground"})}),e.jsx(E,{className:"text-destructive"})]})}),e.jsx(T,{control:x.control,name:"description",render:({field:c})=>e.jsxs(L,{children:[e.jsx(A,{className:"text-foreground",children:"Description"}),e.jsx(U,{children:e.jsx(fe,{placeholder:"Enter subtask description (optional)",...c,disabled:s,className:"bg-background border-input text-foreground",rows:2})}),e.jsx(E,{className:"text-destructive"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(T,{control:x.control,name:"due_date",render:({field:c})=>e.jsxs(L,{children:[e.jsx(A,{className:"text-foreground",children:"Due Date"}),e.jsx(U,{children:e.jsx(z,{type:"date",...c,disabled:s,className:"bg-background border-input text-foreground"})}),e.jsx(E,{className:"text-destructive"})]})}),e.jsx(T,{control:x.control,name:"priority",render:({field:c})=>e.jsxs(L,{children:[e.jsx(A,{className:"text-foreground",children:"Priority"}),e.jsxs(G,{onValueChange:c.onChange,defaultValue:c.value,disabled:s,children:[e.jsx(U,{children:e.jsx(J,{className:"bg-background border-input text-foreground",children:e.jsx(K,{placeholder:"Select priority"})})}),e.jsxs(W,{children:[e.jsx(F,{value:"low",children:"Low"}),e.jsx(F,{value:"medium",children:"Medium"}),e.jsx(F,{value:"high",children:"High"}),e.jsx(F,{value:"critical",children:"Critical"})]})]}),e.jsx(E,{className:"text-destructive"})]})})]}),o&&e.jsx(T,{control:x.control,name:"is_complete",render:({field:c})=>e.jsxs(L,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(U,{children:e.jsx(ne,{checked:c.value,onCheckedChange:c.onChange,disabled:s})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(A,{className:"text-foreground",children:"Mark as completed"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Check this box if the subtask is completed"})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(p,{type:"submit",size:"sm",disabled:s,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:[s&&e.jsx(be,{className:"mr-2 h-3 w-3 animate-spin"}),o?"Update":"Create"]}),e.jsx(p,{type:"button",variant:"outline",size:"sm",onClick:t,disabled:s,children:"Cancel"})]})]})})},Xe=({taskId:a})=>{const{subtasks:i,pagination:r,isLoading:t,createSubtask:s,updateSubtask:o,deleteSubtask:x,toggleCompletion:g,goToPage:c,nextPage:j,prevPage:u}=ce(a),[v,h]=C.useState(!1),[m,f]=C.useState(null),N=async n=>{await s({...n,task_id:a}),h(!1)},y=async n=>{m&&(await o(m.id,n),f(null))},S=async n=>{window.confirm("Are you sure you want to delete this subtask?")&&await x(n)},q=async n=>{await g(n)},{hasPermission:l,hasAnyPermission:k}=ae(),H=i.filter(n=>n.is_complete).length,Q=i.length>0?Math.round(H/i.length*100):0,oe=()=>{if(!r)return[];const n=[],{current_page:b,last_page:B}=r;b>3&&(n.push(1),b>4&&n.push("ellipsis-start"));for(let $=Math.max(1,b-2);$<=Math.min(B,b+2);$++)n.push($);return b<B-2&&(b<B-3&&n.push("ellipsis-end"),n.push(B)),n};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(D,{className:"bg-card border-border",children:[e.jsxs(R,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(O,{className:"text-foreground flex items-center gap-2",children:[e.jsx(Ee,{className:"w-5 h-5"}),"Subtasks (",r?.total||i.length,")"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(P,{variant:"outline",className:"text-xs",children:[H,"/",r?.total||i.length," completed"]}),e.jsxs(P,{variant:"secondary",className:"text-xs",children:[Q,"%"]}),l("create subtasks")&&e.jsxs(p,{size:"sm",onClick:()=>h(!0),className:"bg-primary text-primary-foreground hover:bg-primary/90",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Add Subtask"]})]})]}),i.length>0&&e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-chart-3 h-2 rounded-full transition-all duration-300",style:{width:`${Q}%`}})})]}),e.jsxs(M,{className:"space-y-4",children:[v&&e.jsxs("div",{className:"p-4 border border-border rounded-lg bg-accent/20",children:[e.jsx("h4",{className:"text-sm font-medium text-foreground mb-3",children:"Create New Subtask"}),e.jsx(Z,{taskId:a,onSubmit:N,onCancel:()=>h(!1),isLoading:t})]}),t?e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((n,b)=>e.jsx("div",{className:"h-20 bg-muted animate-pulse rounded-lg"},b))}):i.length===0?e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No subtasks yet. Create your first subtask to break down this task."}):i.map(n=>e.jsx("div",{children:m?.id===n.id?e.jsxs("div",{className:"p-4 border border-border rounded-lg bg-accent/20",children:[e.jsx("h4",{className:"text-sm font-medium text-foreground mb-3",children:"Edit Subtask"}),e.jsx(Z,{subtask:m,taskId:a,onSubmit:y,onCancel:()=>f(null),isLoading:t})]}):e.jsxs("div",{className:"flex items-start justify-between p-4 border border-border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx(ne,{checked:n.is_complete,onCheckedChange:()=>q(n.id),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:`font-medium text-foreground ${n.is_complete?"line-through text-muted-foreground":""}`,children:n.name}),e.jsx(te,{priority:n.priority})]}),n.description&&e.jsx("p",{className:`text-sm mt-1 ${n.is_complete?"line-through text-muted-foreground":"text-muted-foreground"}`,children:n.description}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(ie,{className:"w-3 h-3"}),new Date(n.due_date).toLocaleDateString()]}),n.is_complete&&e.jsx(P,{variant:"outline",className:"text-xs text-chart-3",children:"Completed"})]})]})]}),k(["edit subtasks","delete subtasks"])&&e.jsxs(ve,{children:[e.jsx(ye,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(ze,{className:"h-4 w-4"})})}),e.jsxs(Se,{align:"end",className:"bg-popover border-border",children:[l("edit subtasks")&&e.jsxs(X,{onClick:()=>f(n),className:"hover:bg-accent hover:text-accent-foreground",children:[e.jsx(le,{className:"mr-2 h-4 w-4"}),"Edit"]}),l("delete subtasks")&&e.jsxs(X,{onClick:()=>S(n.id),className:"text-destructive hover:bg-destructive hover:text-destructive-foreground",children:[e.jsx(qe,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})},n.id))]})]}),r&&r.last_page>1&&e.jsx(D,{className:"bg-card border-border",children:e.jsx(M,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",r.from||0," to ",r.to||0," of ",r.total," results"]}),e.jsx(Ae,{children:e.jsxs(Ue,{children:[e.jsx(I,{children:e.jsx(Fe,{onClick:u,className:r.current_page===1?"pointer-events-none opacity-50":"cursor-pointer"})}),oe().map((n,b)=>e.jsx(I,{children:n==="ellipsis-start"||n==="ellipsis-end"?e.jsx(De,{}):e.jsx(Me,{onClick:()=>c(n),isActive:r.current_page===n,className:"cursor-pointer",children:n})},b)),e.jsx(I,{children:e.jsx(Be,{onClick:j,className:r.current_page===r.last_page?"pointer-events-none opacity-50":"cursor-pointer"})})]})})]})})})]})},ds=()=>{const{id:a}=we(),{task:i,taskWithAssignments:r,availableUsers:t,isLoading:s,error:o,addUser:x,updateAssignment:g,removeUser:c}=_e(a),{updateTaskStatus:j}=ce(),{hasPermission:u,hasAnyPermission:v}=ae();if(s)return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-8 bg-muted animate-pulse rounded w-48"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"h-64 bg-muted animate-pulse rounded-lg"}),e.jsx("div",{className:"h-64 bg-muted animate-pulse rounded-lg"})]})]});if(o||!i)return e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-destructive",children:o||"Task not found"})});const h=async m=>{u("edit tasks")&&await j(i.id,{status:m})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(p,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(V,{to:"/tasks",children:[e.jsx($e,{className:"mr-2 h-4 w-4"}),"Back to Tasks"]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(Y,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground font-sans",children:i.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{status:i.status}),e.jsx(te,{priority:i.priority})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[u("view tasks")&&e.jsxs(e.Fragment,{children:[e.jsx(p,{variant:"outline",size:"sm",onClick:()=>h("in_progress"),disabled:i.status==="in_progress",children:"Mark In Progress"}),e.jsx(p,{variant:"outline",size:"sm",onClick:()=>h("done"),disabled:i.status==="done",children:"Mark Complete"})]}),u("edit tasks")&&e.jsx(p,{asChild:!0,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:e.jsxs(V,{to:`/tasks/${i.id}/edit`,children:[e.jsx(le,{className:"mr-2 h-4 w-4"}),"Edit Task"]})}),v(["create task ratings","edit task ratings"])&&e.jsx(p,{asChild:!0,variant:"outline",children:e.jsxs(V,{to:`/ratings/tasks/${i.id}`,children:[e.jsx(Ce,{className:"mr-2 h-4 w-4"}),"Rate Task"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs(D,{className:"bg-card border-border",children:[e.jsx(R,{children:e.jsxs(O,{className:"text-foreground flex items-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4"}),"Task Information"]})}),e.jsxs(M,{className:"space-y-4",children:[i.description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Description"}),e.jsx("p",{className:"text-foreground",children:i.description})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Section"}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:i.section?.name||"Unknown Section"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Project: ",i.section?.project?.name||"Unknown Project"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Weight"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4 text-muted-foreground"}),e.jsx(P,{variant:"outline",className:"text-sm",children:i.weight})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Due Date"}),e.jsxs("p",{className:"text-sm text-foreground flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4"}),new Date(i.due_date).toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Subtasks"}),e.jsxs(P,{variant:"secondary",className:"text-sm",children:[i.subtasks?.length||0," subtasks"]})]})]})]}),u("edit tasks")&&e.jsx(Oe,{taskWithAssignments:r,availableUsers:t,onAddUser:x,onUpdateAssignment:g,onRemoveUser:c,isLoading:s})]}),e.jsx("div",{className:"lg:col-span-2",children:u("view subtasks")?e.jsx(Xe,{taskId:i.id}):e.jsx(D,{className:"bg-card border-border",children:e.jsx(M,{className:"p-6 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"You don't have permission to view subtasks"})})})})]})]})};export{ds as default};
