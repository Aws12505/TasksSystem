import{q as w,j as e,D as C,v as S,B as y,w as A,x as o,y as u,K as T,m as i,p as D,I as k,M as E,N as M,O as _,P as F,Q as x}from"./index-BtSm9GAx.js";import{C as m,d as h,a as f,b as p}from"./card-DiBnygtK.js";import{u as I}from"./useProjects-DOU8NzNh.js";import{u as V}from"./filtersStore-CQKcTqty.js";import{T as B,a as K,b as v,c,d as L,e as n}from"./table-BW_MQVeD.js";import{A as $,a as H}from"./avatar-BP10rGmT.js";import{P as Q}from"./progress-xdjWevt0.js";import{P as R,K as U}from"./ProjectStatusBadge-DQ1mxkly.js";import{E as q}from"./ellipsis-Aj2Gw5_7.js";import{E as O}from"./eye-BeBqE5hW.js";import{S as z}from"./square-pen-C_0X-HqN.js";import{T as G}from"./trash-2-CjQObxBH.js";import{P as J}from"./plus-ELv8ldGU.js";import"./index-D-tanFGN.js";import"./badge-CQGa5WH8.js";const W=({projects:a,isLoading:N,onDelete:b})=>{const{hasPermission:l}=w();return N?e.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((s,t)=>e.jsx("div",{className:"h-16 bg-muted animate-pulse rounded-lg"},t))}):a.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"No projects found"})}):e.jsx("div",{className:"border border-border rounded-lg bg-card",children:e.jsxs(B,{children:[e.jsx(K,{children:e.jsxs(v,{className:"border-border",children:[e.jsx(c,{className:"text-foreground",children:"Project"}),e.jsx(c,{className:"text-foreground",children:"Stakeholder"}),e.jsx(c,{className:"text-foreground",children:"Status"}),e.jsx(c,{className:"text-foreground",children:"Progress"}),e.jsx(c,{className:"text-foreground",children:"Created"}),e.jsx(c,{className:"text-foreground w-[50px]",children:"Actions"})]})}),e.jsx(L,{children:a.map(s=>{const t=l("view projects"),j=l("edit projects"),d=l("delete projects"),g=l("view analytics"),r=t||j||d||g;return e.jsxs(v,{className:"border-border hover:bg-accent/50",children:[e.jsx(n,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:s.name}),s.description&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:s.description})]})}),e.jsx(n,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{className:"w-6 h-6",children:e.jsx(H,{className:"bg-primary text-primary-foreground text-xs",children:s.stakeholder?.name?.charAt(0).toUpperCase()||"U"})}),e.jsx("span",{className:"text-sm text-foreground",children:s.stakeholder?.name||"Unassigned"})]})}),e.jsx(n,{children:e.jsx(R,{status:s.status})}),e.jsx(n,{className:"w-32",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{value:s.progress_percentage,className:"flex-1"}),e.jsxs("span",{className:"text-xs text-muted-foreground min-w-[3ch]",children:[s.progress_percentage,"%"]})]})}),e.jsx(n,{className:"text-muted-foreground",children:new Date(s.created_at).toLocaleDateString()}),e.jsx(n,{children:r?e.jsxs(C,{children:[e.jsx(S,{asChild:!0,children:e.jsx(y,{variant:"ghost",className:"h-8 w-8 p-0 hover:bg-accent",children:e.jsx(q,{className:"h-4 w-4"})})}),e.jsxs(A,{align:"end",className:"bg-popover border-border",children:[t&&e.jsx(o,{asChild:!0,className:"hover:bg-accent hover:text-accent-foreground",children:e.jsxs(u,{to:`/projects/${s.id}`,className:"flex items-center",children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"View"]})}),g&&e.jsx(o,{asChild:!0,className:"hover:bg-accent hover:text-accent-foreground",children:e.jsxs(u,{to:`/analytics/projects/${s.id}`,className:"flex items-center",children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),"Analytics"]})}),t&&e.jsx(o,{asChild:!0,className:"hover:bg-accent hover:text-accent-foreground",children:e.jsxs(u,{to:`/projects/${s.id}/kanban`,className:"flex items-center",children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"Kanban"]})}),j&&e.jsx(o,{asChild:!0,className:"hover:bg-accent hover:text-accent-foreground",children:e.jsxs(u,{to:`/projects/${s.id}/edit`,className:"flex items-center",children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"Edit"]})}),d&&e.jsxs(o,{onClick:()=>b(s.id),className:"text-destructive hover:bg-destructive hover:text-destructive-foreground",children:[e.jsx(G,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]}):e.jsx("span",{className:"text-muted-foreground text-xs",children:"No actions"})})]},s.id)})})]})})},me=()=>{const{projects:a,isLoading:N,deleteProject:b}=I(),{searchQuery:l,statusFilter:s,setSearchQuery:t,setStatusFilter:j}=V(),{hasPermission:d}=w(),g=async r=>{d("delete projects")&&window.confirm("Are you sure you want to delete this project?")&&await b(r)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(i,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground font-sans",children:"Projects"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your projects and track progress"})]})]}),d("create projects")&&e.jsx(y,{asChild:!0,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:e.jsxs(u,{to:"/projects/create",children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),"New Project"]})})]}),e.jsx(m,{className:"bg-card border-border",children:e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(D,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(k,{placeholder:"Search projects...",value:l,onChange:r=>t(r.target.value),className:"pl-10 bg-background border-input text-foreground"})]}),e.jsxs(E,{value:s,onValueChange:j,children:[e.jsx(M,{className:"w-48",children:e.jsx(_,{placeholder:"Filter by status"})}),e.jsxs(F,{children:[e.jsx(x,{value:"all",children:"All Status"}),e.jsx(x,{value:"pending",children:"Pending"}),e.jsx(x,{value:"in_progress",children:"In Progress"}),e.jsx(x,{value:"done",children:"Done"}),e.jsx(x,{value:"rated",children:"Rated"})]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(m,{className:"bg-card border-border",children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium text-muted-foreground",children:"Total Projects"}),e.jsx(i,{className:"w-4 h-4 text-chart-1"})]}),e.jsx(h,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:a.length})})]}),e.jsxs(m,{className:"bg-card border-border",children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium text-muted-foreground",children:"In Progress"}),e.jsx(i,{className:"w-4 h-4 text-chart-2"})]}),e.jsx(h,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:a.filter(r=>r.status==="in_progress").length})})]}),e.jsxs(m,{className:"bg-card border-border",children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium text-muted-foreground",children:"Completed"}),e.jsx(i,{className:"w-4 h-4 text-chart-3"})]}),e.jsx(h,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:a.filter(r=>r.status==="done").length})})]}),e.jsxs(m,{className:"bg-card border-border",children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium text-muted-foreground",children:"Avg Progress"}),e.jsx(i,{className:"w-4 h-4 text-chart-4"})]}),e.jsx(h,{children:e.jsxs("div",{className:"text-2xl font-bold text-foreground",children:[a.length>0?Math.round(a.reduce((r,P)=>r+P.progress_percentage,0)/a.length):0,"%"]})})]})]}),e.jsx(W,{projects:a,isLoading:N,onDelete:g})]})};export{me as default};
