import{q as f,j as e,D as v,v as w,B as N,w as y,x as m,y as x,A as h,p as C,I as T}from"./index-BxwgkKmW.js";import{C as u,d as j,a as D,b as R}from"./card-DBdMxQwN.js";import{u as A}from"./useRoles-Xe_82kG4.js";import{u as P}from"./filtersStore-CG6LUYck.js";import{T as S,a as E,b as g,c as n,d as B,e as d}from"./table-Bcc-c1Hx.js";import{B as p}from"./badge-DHsVyZTE.js";import{E as M}from"./ellipsis-B6mTkNOr.js";import{E as H}from"./eye-DQPdJmEg.js";import{S as L}from"./square-pen-Cvcj-ZnK.js";import{T as k}from"./trash-2-BQUsqliG.js";import{P as I}from"./plus-CmAL8o1_.js";import"./rolesStore-dECtab6w.js";import"./permissionService-DYbwhnu6.js";const _=({roles:l,isLoading:c,onDelete:i})=>{const{hasPermission:a}=f();return c?e.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((s,r)=>e.jsx("div",{className:"h-16 bg-muted animate-pulse rounded-lg"},r))}):l.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"No roles found"})}):e.jsx("div",{className:"border border-border rounded-lg bg-card",children:e.jsxs(S,{children:[e.jsx(E,{children:e.jsxs(g,{className:"border-border",children:[e.jsx(n,{className:"text-foreground",children:"Role Name"}),e.jsx(n,{className:"text-foreground",children:"Permissions"}),e.jsx(n,{className:"text-foreground",children:"Guard Name"}),e.jsx(n,{className:"text-foreground",children:"Created"}),e.jsx(n,{className:"text-foreground w-[50px]",children:"Actions"})]})}),e.jsx(B,{children:l.map(s=>{const r=a("view roles"),o=a("edit roles"),t=a("delete roles"),b=r||o||t;return e.jsxs(g,{className:"border-border hover:bg-accent/50",children:[e.jsx(d,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-primary font-medium text-sm",children:s.name.charAt(0).toUpperCase()})}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:s.name})]})}),e.jsx(d,{children:a("view permissions")?e.jsxs(p,{variant:"secondary",className:"text-xs",children:[s.permissions?.length||0," permissions"]}):e.jsx(p,{variant:"outline",className:"text-xs",children:"Hidden"})}),e.jsx(d,{className:"text-muted-foreground text-sm",children:s.guard_name}),e.jsx(d,{className:"text-muted-foreground",children:new Date(s.created_at).toLocaleDateString()}),e.jsx(d,{children:b?e.jsxs(v,{children:[e.jsx(w,{asChild:!0,children:e.jsx(N,{variant:"ghost",className:"h-8 w-8 p-0 hover:bg-accent",children:e.jsx(M,{className:"h-4 w-4"})})}),e.jsxs(y,{align:"end",className:"bg-popover border-border",children:[r&&e.jsx(m,{asChild:!0,className:"hover:bg-accent hover:text-accent-foreground",children:e.jsxs(x,{to:`/roles/${s.id}`,className:"flex items-center",children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"View"]})}),o&&e.jsx(m,{asChild:!0,className:"hover:bg-accent hover:text-accent-foreground",children:e.jsxs(x,{to:`/roles/${s.id}/edit`,className:"flex items-center",children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),"Edit"]})}),t&&e.jsxs(m,{onClick:()=>i(s.id),className:"text-destructive hover:bg-destructive hover:text-destructive-foreground",children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]}):e.jsx("span",{className:"text-muted-foreground text-xs",children:"No actions"})})]},s.id)})})]})})},Y=()=>{const{roles:l,isLoading:c,deleteRole:i}=A(),{searchQuery:a,setSearchQuery:s}=P(),{hasPermission:r}=f(),o=async t=>{r("delete roles")&&window.confirm("Are you sure you want to delete this role?")&&await i(t)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(h,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground font-sans",children:"Roles"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage system roles and their permissions"})]})]}),r("create roles")&&e.jsx(N,{asChild:!0,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:e.jsxs(x,{to:"/roles/create",children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Add Role"]})})]}),e.jsx(u,{className:"bg-card border-border",children:e.jsx(j,{className:"p-4",children:e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(C,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(T,{placeholder:"Search roles...",value:a,onChange:t=>s(t.target.value),className:"pl-10 bg-background border-input text-foreground"})]})})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.jsxs(u,{className:"bg-card border-border",children:[e.jsxs(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(R,{className:"text-sm font-medium text-muted-foreground",children:"Total Roles"}),e.jsx(h,{className:"w-4 h-4 text-chart-1"})]}),e.jsx(j,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:l.length})})]})}),e.jsx(_,{roles:l,isLoading:c,onDelete:o})]})};export{Y as default};
