import{r as l,p as c}from"./permissionService-DLyizhG3.js";import{i as t,t as a}from"./index-CLnmuTsT.js";const d=t((r,i)=>({roles:[],currentRole:null,availablePermissions:[],pagination:null,isLoading:!1,error:null,fetchRoles:async(o=1)=>{r({isLoading:!0,error:null});try{const e=await l.getRoles(o);e.success?r({roles:e.data,pagination:e.pagination,isLoading:!1}):(r({error:e.message,isLoading:!1}),a.error(e.message))}catch(e){const s=e.message||"Failed to fetch roles";r({error:s,isLoading:!1}),a.error(s)}},fetchRole:async o=>{r({isLoading:!0,error:null});try{const e=await l.getRole(o);e.success?r({currentRole:e.data,isLoading:!1}):(r({error:e.message,isLoading:!1}),a.error(e.message))}catch(e){const s=e.message||"Failed to fetch role";r({error:s,isLoading:!1}),a.error(s)}},fetchAvailablePermissions:async()=>{try{const o=await c.getPermissions();o.success&&r({availablePermissions:o.data})}catch(o){console.error("Failed to fetch permissions:",o)}},createRole:async o=>{r({isLoading:!0,error:null});try{const e=await l.createRole(o);return e.success?(r({isLoading:!1}),a.success("Role created successfully"),i().fetchRoles(),e.data):(r({error:e.message,isLoading:!1}),a.error(e.message),null)}catch(e){const s=e.message||"Failed to create role";return r({error:s,isLoading:!1}),a.error(s),null}},updateRole:async(o,e)=>{r({isLoading:!0,error:null});try{const s=await l.updateRole(o,e);return s.success?(r({currentRole:s.data,isLoading:!1}),a.success("Role updated successfully"),i().fetchRoles(),s.data):(r({error:s.message,isLoading:!1}),a.error(s.message),null)}catch(s){const n=s.message||"Failed to update role";return r({error:n,isLoading:!1}),a.error(n),null}},deleteRole:async o=>{r({isLoading:!0,error:null});try{const e=await l.deleteRole(o);return e.success?(r({isLoading:!1}),a.success("Role deleted successfully"),i().fetchRoles(),!0):(r({error:e.message,isLoading:!1}),a.error(e.message),!1)}catch(e){const s=e.message||"Failed to delete role";return r({error:s,isLoading:!1}),a.error(s),!1}},clearCurrentRole:()=>r({currentRole:null,error:null})}));export{d as u};
