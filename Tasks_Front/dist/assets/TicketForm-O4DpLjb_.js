import{j as e,a as y,b as S,o as C,F as _,c,d,e as o,f as x,I as k,g as u,$ as T,K as h,M as j,N as g,O as p,P as a,B as V,L as w,ah as F,ag as N,s as f}from"./index-BIXuByyq.js";const q=C({title:f().min(1,"Title is required").max(255),description:f().min(1,"Description is required"),type:N(["quick_fix","bug_investigation","user_support"]),priority:N(["low","medium","high","critical"]),assigned_to:F().optional()}),D=C({title:f().min(1,"Title is required").max(255),description:f().min(1,"Description is required"),type:N(["quick_fix","bug_investigation","user_support"]),priority:N(["low","medium","high","critical"]),status:N(["open","in_progress","resolved"]).optional(),assigned_to:F().optional()}),I=({availableUsers:i,typeOptions:b,onSubmit:v,isLoading:n})=>{const t=y({resolver:S(q),defaultValues:{title:"",description:"",type:"quick_fix",priority:"medium",assigned_to:void 0}}),m=async r=>{const s={title:r.title,description:r.description,type:r.type,priority:r.priority,assigned_to:r.assigned_to};await v(s)};return e.jsx(_,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(m),className:"space-y-6",children:[e.jsx(c,{control:t.control,name:"title",render:({field:r})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-foreground",children:"Title"}),e.jsx(x,{children:e.jsx(k,{placeholder:"Enter ticket title",...r,disabled:n,className:"bg-background border-input text-foreground"})}),e.jsx(u,{className:"text-destructive"})]})}),e.jsx(c,{control:t.control,name:"description",render:({field:r})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-foreground",children:"Description"}),e.jsx(x,{children:e.jsx(T,{placeholder:"Describe the issue or request...",...r,disabled:n,className:"bg-background border-input text-foreground",rows:4})}),e.jsx(u,{className:"text-destructive"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(c,{control:t.control,name:"type",render:({field:r})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-foreground",children:"Type"}),e.jsxs(h,{onValueChange:r.onChange,defaultValue:r.value,disabled:n,children:[e.jsx(x,{children:e.jsx(j,{className:"bg-background border-input text-foreground",children:e.jsx(g,{placeholder:"Select ticket type"})})}),e.jsx(p,{children:b.map(s=>e.jsx(a,{value:s.value,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.label}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.estimatedTime})]})},s.value))})]}),e.jsx(u,{className:"text-destructive"})]})}),e.jsx(c,{control:t.control,name:"priority",render:({field:r})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-foreground",children:"Priority"}),e.jsxs(h,{onValueChange:r.onChange,defaultValue:r.value,disabled:n,children:[e.jsx(x,{children:e.jsx(j,{className:"bg-background border-input text-foreground",children:e.jsx(g,{placeholder:"Select priority"})})}),e.jsxs(p,{children:[e.jsx(a,{value:"low",children:"Low"}),e.jsx(a,{value:"medium",children:"Medium"}),e.jsx(a,{value:"high",children:"High"}),e.jsx(a,{value:"critical",children:"Critical"})]})]}),e.jsx(u,{className:"text-destructive"})]})})]}),e.jsx(c,{control:t.control,name:"assigned_to",render:({field:r})=>e.jsxs(d,{children:[e.jsxs(o,{className:"text-foreground",children:["Assign to ",e.jsx("span",{className:"text-xs text-muted-foreground",children:"(optional)"})]}),e.jsxs(h,{onValueChange:s=>r.onChange(s==="unassigned"?void 0:Number(s)),value:r.value===void 0?"unassigned":r.value.toString(),disabled:n,children:[e.jsx(x,{children:e.jsx(j,{className:"bg-background border-input text-foreground",children:e.jsx(g,{placeholder:"Leave unassigned or select a user"})})}),e.jsxs(p,{children:[e.jsx(a,{value:"unassigned",children:"Leave unassigned"}),i.map(s=>e.jsx(a,{value:s.id.toString(),children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.email})]})},s.id))]})]}),e.jsx(u,{className:"text-destructive"})]})}),e.jsxs(V,{type:"submit",disabled:n,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:[n&&e.jsx(w,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Ticket"]})]})})},E=({ticket:i,availableUsers:b,typeOptions:v,onSubmit:n,isLoading:t})=>{const m=y({resolver:S(D),defaultValues:{title:i.title,description:i.description,type:i.type,priority:i.priority,status:i.status,assigned_to:i.assigned_to||void 0}}),r=async s=>{const l={title:s.title,description:s.description,type:s.type,priority:s.priority,status:s.status,assigned_to:s.assigned_to};await n(l)};return e.jsx(_,{...m,children:e.jsxs("form",{onSubmit:m.handleSubmit(r),className:"space-y-6",children:[e.jsx(c,{control:m.control,name:"title",render:({field:s})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-foreground",children:"Title"}),e.jsx(x,{children:e.jsx(k,{placeholder:"Enter ticket title",...s,disabled:t,className:"bg-background border-input text-foreground"})}),e.jsx(u,{className:"text-destructive"})]})}),e.jsx(c,{control:m.control,name:"description",render:({field:s})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-foreground",children:"Description"}),e.jsx(x,{children:e.jsx(T,{placeholder:"Describe the issue or request...",...s,disabled:t,className:"bg-background border-input text-foreground",rows:4})}),e.jsx(u,{className:"text-destructive"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(c,{control:m.control,name:"type",render:({field:s})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-foreground",children:"Type"}),e.jsxs(h,{onValueChange:s.onChange,defaultValue:s.value,disabled:t,children:[e.jsx(x,{children:e.jsx(j,{className:"bg-background border-input text-foreground",children:e.jsx(g,{placeholder:"Select ticket type"})})}),e.jsx(p,{children:v.map(l=>e.jsx(a,{value:l.value,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:l.label}),e.jsx("span",{className:"text-xs text-muted-foreground",children:l.estimatedTime})]})},l.value))})]}),e.jsx(u,{className:"text-destructive"})]})}),e.jsx(c,{control:m.control,name:"priority",render:({field:s})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-foreground",children:"Priority"}),e.jsxs(h,{onValueChange:s.onChange,defaultValue:s.value,disabled:t,children:[e.jsx(x,{children:e.jsx(j,{className:"bg-background border-input text-foreground",children:e.jsx(g,{placeholder:"Select priority"})})}),e.jsxs(p,{children:[e.jsx(a,{value:"low",children:"Low"}),e.jsx(a,{value:"medium",children:"Medium"}),e.jsx(a,{value:"high",children:"High"}),e.jsx(a,{value:"critical",children:"Critical"})]})]}),e.jsx(u,{className:"text-destructive"})]})}),e.jsx(c,{control:m.control,name:"status",render:({field:s})=>e.jsxs(d,{children:[e.jsx(o,{className:"text-foreground",children:"Status"}),e.jsxs(h,{onValueChange:s.onChange,defaultValue:s.value,disabled:t,children:[e.jsx(x,{children:e.jsx(j,{className:"bg-background border-input text-foreground",children:e.jsx(g,{placeholder:"Select status"})})}),e.jsxs(p,{children:[e.jsx(a,{value:"open",children:"Open"}),e.jsx(a,{value:"in_progress",children:"In Progress"}),e.jsx(a,{value:"resolved",children:"Resolved"})]})]}),e.jsx(u,{className:"text-destructive"})]})})]}),e.jsx(c,{control:m.control,name:"assigned_to",render:({field:s})=>e.jsxs(d,{children:[e.jsxs(o,{className:"text-foreground",children:["Assign to ",e.jsx("span",{className:"text-xs text-muted-foreground",children:"(optional)"})]}),e.jsxs(h,{onValueChange:l=>s.onChange(l==="unassigned"?void 0:Number(l)),value:s.value===void 0?"unassigned":s.value.toString(),disabled:t,children:[e.jsx(x,{children:e.jsx(j,{className:"bg-background border-input text-foreground",children:e.jsx(g,{placeholder:"Leave unassigned or select a user"})})}),e.jsxs(p,{children:[e.jsx(a,{value:"unassigned",children:"Leave unassigned"}),b.map(l=>e.jsx(a,{value:l.id.toString(),children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:l.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:l.email})]})},l.id))]})]}),e.jsx(u,{className:"text-destructive"})]})}),e.jsxs(V,{type:"submit",disabled:t,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:[t&&e.jsx(w,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Ticket"]})]})})},P=({ticket:i,availableUsers:b=[],typeOptions:v,onSubmit:n,isLoading:t})=>i?e.jsx(E,{ticket:i,availableUsers:b,typeOptions:v,onSubmit:n,isLoading:t}):e.jsx(I,{availableUsers:b,typeOptions:v,onSubmit:n,isLoading:t});export{P as T};
