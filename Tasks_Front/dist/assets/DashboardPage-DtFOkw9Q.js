import{g as b,h as S,i as W,t as w,k as Q,j as e,C as c,c as i,d,f as o,l as T,m as C,S as G,n as H,U as A,T as z,A as E,p as U,q as X,r as J,v as K,w as Z,x as ee,y as se,z as te,D as ae,L as $}from"./index-Y4t2xSJ4.js";import{C as k}from"./circle-check-DW5ky0G0.js";import{B as q}from"./badge-8i_sBa4H.js";import{C as v}from"./calendar-DPOZX07o.js";import{t as g,c as re,n as P,g as L,a as ne,e as le,m as O,b as _,f as R}from"./format-C-V0FnqD.js";import{C as Y}from"./circle-alert-BgPD_ERP.js";import{T as ce}from"./trending-up-DBLYaQUY.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],V=b("briefcase",ie);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],oe=b("chart-column",de);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],me=b("chart-pie",xe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ue=b("circle-play",he);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],F=b("trophy",je);class pe{async getEmployeeDashboard(){return S.get("/dashboard/employee")}async getManagerAnalytics(r="today"){return S.get("/dashboard/analytics",{period:r})}}const I=new pe,fe=W((t,r)=>({employeeDashboard:null,managerAnalytics:null,currentPeriod:"today",isLoading:!1,error:null,fetchEmployeeDashboard:async()=>{t({isLoading:!0,error:null});try{const s=await I.getEmployeeDashboard();s.success&&s.data?t({employeeDashboard:s.data,isLoading:!1}):(t({error:s.message||"Failed to fetch dashboard",isLoading:!1}),w.error(s.message||"Failed to fetch dashboard"))}catch(s){const a=s.message||"Failed to fetch dashboard";t({error:a,isLoading:!1}),w.error(a)}},fetchManagerAnalytics:async s=>{t({isLoading:!0,error:null,currentPeriod:s});try{const a=await I.getManagerAnalytics(s);a.success&&a.data?t({managerAnalytics:a.data,isLoading:!1}):(t({error:a.message||"Failed to fetch analytics",isLoading:!1}),w.error(a.message||"Failed to fetch analytics"))}catch(a){const n=a.message||"Failed to fetch analytics";t({error:n,isLoading:!1}),w.error(n)}},setPeriod:s=>{t({currentPeriod:s}),r().fetchManagerAnalytics(s)},clearError:()=>t({error:null})})),ge=()=>{const{employeeDashboard:t,managerAnalytics:r,currentPeriod:s,isLoading:a,error:n,fetchEmployeeDashboard:x,fetchManagerAnalytics:h,setPeriod:l,clearError:u}=fe(),{hasPermission:j}=Q(),p=j("view analytics");return{employeeDashboard:t,managerAnalytics:r,currentPeriod:s,isLoading:a,error:n,fetchEmployeeDashboard:x,fetchManagerAnalytics:h,setPeriod:l,clearError:u,canViewAnalytics:p}},Ne=({data:t})=>e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(c,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"My Tasks"}),e.jsx(k,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.assigned_tasks.total}),e.jsxs("div",{className:"mt-2 space-y-1 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(T,{className:"h-3 w-3"})," Pending"]}),e.jsx("span",{className:"font-medium",children:t.assigned_tasks.pending})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ue,{className:"h-3 w-3"})," In Progress"]}),e.jsx("span",{className:"font-medium",children:t.assigned_tasks.in_progress})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(k,{className:"h-3 w-3 text-green-600"})," Done"]}),e.jsx("span",{className:"font-medium text-green-600",children:t.assigned_tasks.done})]})]})]})]}),e.jsxs(c,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Projects"}),e.jsx(V,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.projects.total}),e.jsxs("div",{className:"mt-2 space-y-1 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"As Stakeholder"}),e.jsx("span",{className:"font-medium",children:t.projects.as_stakeholder})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"As Contributor"}),e.jsx("span",{className:"font-medium",children:t.projects.as_contributor})]})]})]})]}),e.jsxs(c,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Help Requests"}),e.jsx(C,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.help_requests.helped_others}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Times helped others"}),e.jsxs("div",{className:"mt-2 space-y-1 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Requested Help"}),e.jsx("span",{className:"font-medium",children:t.help_requests.requested})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Pending"}),e.jsx("span",{className:"font-medium",children:t.help_requests.pending})]})]})]})]}),e.jsxs(c,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"This Week"}),e.jsx(G,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.this_week.tasks_completed}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tasks completed"}),e.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Helped Colleagues"}),e.jsx("span",{className:"font-medium",children:t.this_week.helped_colleagues})]})})]})]})]});function M(t,r){const s=+g(t)-+g(r);return s<0?-1:s>0?1:s}function ye(t){return re(t,Date.now())}function ve(t,r,s){const[a,n]=P(s?.in,t,r),x=a.getFullYear()-n.getFullYear(),h=a.getMonth()-n.getMonth();return x*12+h}function be(t){return r=>{const a=(t?Math[t]:Math.trunc)(r);return a===0?0:a}}function we(t,r){return+g(t)-+g(r)}function _e(t,r){const s=g(t,r?.in);return s.setHours(23,59,59,999),s}function Me(t,r){const s=g(t,r?.in),a=s.getMonth();return s.setFullYear(s.getFullYear(),a+1,0),s.setHours(23,59,59,999),s}function ke(t,r){const s=g(t,r?.in);return+_e(s,r)==+Me(s,r)}function De(t,r,s){const[a,n,x]=P(s?.in,t,t,r),h=M(n,x),l=Math.abs(ve(n,x));if(l<1)return 0;n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-h*l);let u=M(n,x)===-h;ke(a)&&l===1&&M(a,x)===1&&(u=!1);const j=h*(l-+u);return j===0?0:j}function Te(t,r,s){const a=we(t,r)/1e3;return be(s?.roundingMethod)(a)}function Ce(t,r,s){const a=ne(),n=s?.locale??a.locale??le,x=2520,h=M(t,r);if(isNaN(h))throw new RangeError("Invalid time value");const l=Object.assign({},s,{addSuffix:s?.addSuffix,comparison:h}),[u,j]=P(s?.in,...h>0?[r,t]:[t,r]),p=Te(j,u),B=(L(j)-L(u))/1e3,m=Math.round((p-B)/60);let N;if(m<2)return s?.includeSeconds?p<5?n.formatDistance("lessThanXSeconds",5,l):p<10?n.formatDistance("lessThanXSeconds",10,l):p<20?n.formatDistance("lessThanXSeconds",20,l):p<40?n.formatDistance("halfAMinute",0,l):p<60?n.formatDistance("lessThanXMinutes",1,l):n.formatDistance("xMinutes",1,l):m===0?n.formatDistance("lessThanXMinutes",1,l):n.formatDistance("xMinutes",m,l);if(m<45)return n.formatDistance("xMinutes",m,l);if(m<90)return n.formatDistance("aboutXHours",1,l);if(m<O){const f=Math.round(m/60);return n.formatDistance("aboutXHours",f,l)}else{if(m<x)return n.formatDistance("xDays",1,l);if(m<_){const f=Math.round(m/O);return n.formatDistance("xDays",f,l)}else if(m<_*2)return N=Math.round(m/_),n.formatDistance("aboutXMonths",N,l)}if(N=De(j,u),N<12){const f=Math.round(m/_);return n.formatDistance("xMonths",f,l)}else{const f=N%12,D=Math.trunc(N/12);return f<3?n.formatDistance("aboutXYears",D,l):f<9?n.formatDistance("overXYears",D,l):n.formatDistance("almostXYears",D+1,l)}}function Ae(t,r){return Ce(t,ye(t),r)}const Pe={low:"bg-gray-500",medium:"bg-blue-500",high:"bg-orange-500",critical:"bg-red-500"},Se=({tasks:t})=>{const r=H();return t.length===0?e.jsxs(c,{children:[e.jsx(i,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-5 w-5"}),"Upcoming Tasks"]})}),e.jsx(o,{children:e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No upcoming tasks in the next 7 days"})})]}):e.jsxs(c,{children:[e.jsx(i,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-5 w-5"}),"Upcoming Tasks (",t.length,")"]})}),e.jsx(o,{children:e.jsx("div",{className:"space-y-3",children:t.map(s=>e.jsx("div",{onClick:()=>r(`/projects/${s.project.id}`),className:"flex items-start justify-between p-3 border rounded-lg hover:bg-accent cursor-pointer transition-colors",children:e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:s.name}),e.jsx(q,{variant:"outline",className:`${Pe[s.priority]} text-white text-xs`,children:s.priority})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.project.name}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(v,{className:"h-3 w-3"}),R(new Date(s.due_date),"MMM d, yyyy")]}),e.jsxs("span",{className:`flex items-center gap-1 ${s.days_until_due<=2?"text-red-600 font-medium":""}`,children:[e.jsx(Y,{className:"h-3 w-3"}),s.days_until_due===0?"Due today":`${s.days_until_due} days left`]})]})]})},s.id))})})]})},$e=({activities:t})=>t.length===0?e.jsxs(c,{children:[e.jsx(i,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5"}),"Recent Activity"]})}),e.jsx(o,{children:e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No recent activity"})})]}):e.jsxs(c,{children:[e.jsx(i,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5"}),"Recent Activity"]})}),e.jsx(o,{children:e.jsx("div",{className:"space-y-3",children:t.map((r,s)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[e.jsx("div",{className:`p-2 rounded-full ${r.type==="task_completed"?"bg-green-100":"bg-blue-100"}`,children:r.type==="task_completed"?e.jsx(k,{className:"h-4 w-4 text-green-600"}):e.jsx(A,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:r.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.project}),e.jsx("p",{className:"text-xs text-muted-foreground",children:Ae(new Date(r.timestamp),{addSuffix:!0})})]})]},s))})})]}),y=({title:t,value:r,description:s,icon:a,trend:n})=>e.jsxs(c,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:t}),a&&e.jsx(a,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold",children:r}),s&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s}),n&&e.jsxs("p",{className:`text-xs mt-1 ${n.isPositive?"text-green-600":"text-red-600"}`,children:[n.isPositive?"↑":"↓"," ",Math.abs(n.value),"%"]})]})]}),Le=({data:t})=>e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(y,{title:"Total Employees",value:t.total_employees,icon:A,description:"Active team members"}),e.jsx(y,{title:"Active Projects",value:t.active_projects,icon:V,description:"In progress or pending"}),e.jsx(y,{title:"Tasks Completed",value:t.completed_tasks,icon:k,description:`Out of ${t.total_tasks} total tasks`}),e.jsx(y,{title:"Completion Rate",value:`${t.average_task_completion_rate}%`,icon:ce,description:"Average task completion"}),e.jsx(y,{title:"Pending Help Requests",value:t.pending_help_requests,icon:C,description:"Awaiting assistance"}),e.jsx(y,{title:"Open Tickets",value:t.open_tickets,icon:z,description:"Need attention"})]}),Oe=({performers:t})=>{const r=s=>s.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2);return t.length===0?e.jsxs(c,{children:[e.jsx(i,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),"Top Performers"]})}),e.jsx(o,{children:e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No performance data available"})})]}):e.jsxs(c,{children:[e.jsx(i,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),"Top Performers"]})}),e.jsx(o,{children:e.jsx("div",{className:"space-y-4",children:t.map((s,a)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full font-bold text-sm ${a===0?"bg-yellow-100 text-yellow-700":a===1?"bg-gray-100 text-gray-700":a===2?"bg-orange-100 text-orange-700":"bg-muted text-muted-foreground"}`,children:a+1}),e.jsxs(E,{className:"h-10 w-10",children:[e.jsx(U,{src:s.avatar_url||void 0,alt:s.user_name}),e.jsx(X,{children:r(s.user_name)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:s.user_name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.completed_tasks," tasks completed"]})]})]},s.user_id))})})]})},Fe=({data:t})=>{const r=Object.values(t.by_status).reduce((s,a)=>s+a,0);return e.jsxs(c,{children:[e.jsx(i,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5"}),"Task Distribution"]})}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-3",children:"By Status"}),e.jsx("div",{className:"space-y-2",children:Object.entries(t.by_status).map(([s,a])=>{const n=r>0?a/r*100:0;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"capitalize",children:s.replace("_"," ")}),e.jsx("span",{className:"font-medium",children:a})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary rounded-full transition-all",style:{width:`${n}%`}})})]},s)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-3",children:"By Priority"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(t.by_priority).map(([s,a])=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsx("span",{className:"text-xs capitalize",children:s}),e.jsx("span",{className:"text-sm font-bold",children:a})]},s))})]}),t.overdue>0&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("p",{className:"text-sm font-medium text-red-800",children:[t.overdue," overdue task",t.overdue!==1?"s":""]})})]})})]})},Ie=({data:t})=>{const r=Object.values(t.by_status).reduce((a,n)=>a+n,0),s={pending:"bg-gray-500",in_progress:"bg-blue-500",done:"bg-green-500",rated:"bg-purple-500"};return e.jsxs(c,{children:[e.jsx(i,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-5 w-5"}),"Project Status"]})}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-2",children:Object.entries(t.by_status).map(([a,n])=>{const x=r>0?n/r*100:0;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:"capitalize flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded ${s[a]}`}),a.replace("_"," ")]}),e.jsxs("span",{className:"font-medium",children:[n," (",x.toFixed(0),"%)"]})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${s[a]} rounded-full transition-all`,style:{width:`${x}%`}})})]},a)})}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Average Progress"}),e.jsxs("span",{className:"text-lg font-bold",children:[t.average_progress.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-green-500 rounded-full transition-all",style:{width:`${t.average_progress}%`}})})]}),t.at_risk>0&&e.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("p",{className:"text-sm font-medium text-yellow-800",children:["⚠️ ",t.at_risk," project",t.at_risk!==1?"s":""," at risk"]}),e.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"Less than 50% complete"})]})]})})]})},He=({helpRequests:t,tickets:r})=>{const s=a=>a.split(" ").map(n=>n[0]).join("").toUpperCase().slice(0,2);return e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(c,{children:[e.jsx(i,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),"Help Requests"]})}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold",children:t.total}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total"})]}),e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:t.completed}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed"})]}),e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:t.pending}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending"})]})]}),t.top_helpers.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Top Helpers"}),e.jsx("div",{className:"space-y-2",children:t.top_helpers.map(a=>e.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded",children:[e.jsxs(E,{className:"h-8 w-8",children:[e.jsx(U,{src:a.avatar_url||void 0,alt:a.user_name}),e.jsx(X,{className:"text-xs",children:s(a.user_name)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:a.user_name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.help_count," helps"]})]})]},a.user_id))})]})]})})]}),e.jsxs(c,{children:[e.jsx(i,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5"}),"Tickets"]})}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold",children:r.total}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total"})]}),e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:r.open}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Open"})]}),e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:r.in_progress}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"In Progress"})]})]}),e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-sm font-medium text-green-800",children:["✓ ",r.resolved," Resolved"]})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"By Type"}),e.jsx("div",{className:"space-y-2",children:Object.entries(r.by_type).map(([a,n])=>e.jsxs("div",{className:"flex justify-between items-center p-2 border rounded",children:[e.jsx("span",{className:"text-xs capitalize",children:a.replace("_"," ")}),e.jsx("span",{className:"text-sm font-bold",children:n})]},a))})]})]})})]})]})},ze={low:"bg-gray-500",medium:"bg-blue-500",high:"bg-orange-500",critical:"bg-red-500"},Ee=({deadlines:t})=>{const r=H();return t.length===0?e.jsxs(c,{children:[e.jsx(i,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-5 w-5"}),"Upcoming Deadlines"]})}),e.jsx(o,{children:e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No upcoming deadlines in the next 7 days"})})]}):e.jsxs(c,{children:[e.jsx(i,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-5 w-5"}),"Upcoming Deadlines (",t.length,")"]})}),e.jsx(o,{children:e.jsx("div",{className:"space-y-2",children:t.map(s=>e.jsxs("div",{onClick:()=>r(`/projects/${s.project.id}`),className:"flex items-center justify-between p-3 border rounded-lg hover:bg-accent cursor-pointer transition-colors",children:[e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:s.name}),e.jsx(q,{variant:"outline",className:`${ze[s.priority]} text-white text-xs`,children:s.priority})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.project.name})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(A,{className:"h-3 w-3"}),s.assigned_users_count]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(v,{className:"h-3 w-3"}),R(new Date(s.due_date),"MMM d")]}),e.jsxs("span",{className:`flex items-center gap-1 font-medium ${s.days_until_due<=2?"text-red-600":""}`,children:[e.jsx(Y,{className:"h-3 w-3"}),s.days_until_due===0?"Today":`${s.days_until_due}d`]})]})]},s.id))})})]})},Ue=[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"this_week",label:"This Week"},{value:"last_week",label:"Last Week"},{value:"month_to_date",label:"Month to Date"},{value:"this_month",label:"This Month"},{value:"last_month",label:"Last Month"}],Xe=({value:t,onChange:r})=>e.jsxs(J,{value:t,onValueChange:r,children:[e.jsx(K,{className:"w-[200px]",children:e.jsx(Z,{placeholder:"Select period"})}),e.jsx(ee,{children:Ue.map(s=>e.jsx(se,{value:s.value,children:s.label},s.value))})]}),Ge=()=>{const{user:t}=te(),{employeeDashboard:r,managerAnalytics:s,currentPeriod:a,isLoading:n,fetchEmployeeDashboard:x,fetchManagerAnalytics:h,setPeriod:l,canViewAnalytics:u}=ge();return ae.useEffect(()=>{x(),u&&h(a)},[]),n&&!r?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx($,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsx("div",{className:"min-h-screen flex flex-col",children:e.jsxs("div",{className:"flex-1 space-y-6 p-4 md:p-6 max-w-full",children:[e.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),e.jsxs("p",{className:"text-muted-foreground",children:["Welcome back, ",t?.name,"!"]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"My Overview"}),r&&e.jsxs(e.Fragment,{children:[e.jsx(Ne,{data:r.overview}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsx(Se,{tasks:r.upcoming_tasks}),e.jsx($e,{activities:r.recent_activity})]})]})]}),u&&e.jsxs("div",{className:"space-y-6 pt-6 border-t",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Team Analytics"}),e.jsx(Xe,{value:a,onChange:l})]}),n&&!s?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx($,{className:"h-8 w-8 animate-spin text-primary"})}):s?e.jsxs(e.Fragment,{children:[e.jsx(Le,{data:s.overview}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsx(Ie,{data:s.project_status}),e.jsx(Fe,{data:s.task_distribution}),e.jsx(Oe,{performers:s.top_performers})]}),e.jsx(He,{helpRequests:s.help_requests_stats,tickets:s.tickets_stats}),e.jsx(Ee,{deadlines:s.upcoming_deadlines})]}):null]})]})})};export{Ge as default};
