import{p as A,j as e,D as _,q as E,B as T,v as I,w as v,x as y,R as M,z as C,I as B}from"./index-aIDF15FF.js";import{C as t,d as u,a as H,b as L}from"./card-DegwiSso.js";import{P as q,a as F,b as w,c as Q,d as V,e as $,f as z}from"./pagination-B4XyrHhv.js";import{A as G,a as O,b as U,c as J,d as K,e as W,f as X,g as Y}from"./alert-dialog-ds1JXdri.js";import{u as Z}from"./useRoles-XB51K2Yu.js";import{u as ee}from"./filtersStore-jmA0_qHt.js";import{T as se,a as re,b as D,c as d,d as ae,e as m}from"./table-DocBqU00.js";import{B as P}from"./badge-D7aLlcYV.js";import{E as le}from"./ellipsis-DsHtDR5U.js";import{E as te}from"./eye-C1We8Kzb.js";import{S as ne}from"./square-pen-B8hD18R8.js";import{T as ie}from"./trash-2-CAuoNeFC.js";import{P as oe}from"./plus-DsrYCZRf.js";import{S as ce}from"./search-xnRKQA1g.js";import"./rolesStore-CYG9AUNp.js";import"./permissionService-B5huWhq-.js";const de=({roles:o,isLoading:r,onDelete:p})=>{const{hasPermission:n}=A();return r?e.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((a,i)=>e.jsx("div",{className:"h-16 bg-muted animate-pulse rounded-lg"},i))}):o.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"No roles found"})}):e.jsx("div",{className:"border border-border rounded-lg bg-card",children:e.jsxs(se,{children:[e.jsx(re,{children:e.jsxs(D,{className:"border-border",children:[e.jsx(d,{className:"text-foreground",children:"Role Name"}),e.jsx(d,{className:"text-foreground",children:"Permissions"}),e.jsx(d,{className:"text-foreground",children:"Guard Name"}),e.jsx(d,{className:"text-foreground",children:"Created"}),e.jsx(d,{className:"text-foreground w-[50px]",children:"Actions"})]})}),e.jsx(ae,{children:o.map(a=>{const i=n("view roles"),x=n("edit roles"),h=n("delete roles"),j=i||x||h;return e.jsxs(D,{className:"border-border hover:bg-accent/50",children:[e.jsx(m,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-primary font-medium text-sm",children:a.name.charAt(0).toUpperCase()})}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:a.name})]})}),e.jsx(m,{children:n("view permissions")?e.jsxs(P,{variant:"secondary",className:"text-xs",children:[a.permissions?.length||0," permissions"]}):e.jsx(P,{variant:"outline",className:"text-xs",children:"Hidden"})}),e.jsx(m,{className:"text-muted-foreground text-sm",children:a.guard_name}),e.jsx(m,{className:"text-muted-foreground",children:new Date(a.created_at).toLocaleDateString()}),e.jsx(m,{children:j?e.jsxs(_,{children:[e.jsx(E,{asChild:!0,children:e.jsx(T,{variant:"ghost",className:"h-8 w-8 p-0 hover:bg-accent",children:e.jsx(le,{className:"h-4 w-4"})})}),e.jsxs(I,{align:"end",className:"bg-popover border-border",children:[i&&e.jsx(v,{asChild:!0,className:"hover:bg-accent hover:text-accent-foreground",children:e.jsxs(y,{to:`/roles/${a.id}`,className:"flex items-center",children:[e.jsx(te,{className:"mr-2 h-4 w-4"}),"View"]})}),x&&e.jsx(v,{asChild:!0,className:"hover:bg-accent hover:text-accent-foreground",children:e.jsxs(y,{to:`/roles/${a.id}/edit`,className:"flex items-center",children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),"Edit"]})}),h&&e.jsxs(v,{onClick:()=>p(a.id),className:"text-destructive hover:bg-destructive hover:text-destructive-foreground",children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]}):e.jsx("span",{className:"text-muted-foreground text-xs",children:"No actions"})})]},a.id)})})]})})},Ae=()=>{const{roles:o,pagination:r,isLoading:p,deleteRole:n,goToPage:a,nextPage:i,prevPage:x}=Z(),{searchQuery:h,setSearchQuery:j}=ee(),{hasPermission:f}=A(),[N,c]=M.useState(null),k=async s=>{f("delete roles")&&c(s)},R=async()=>{if(!f("delete roles")){c(null);return}N!=null&&(await n(N),c(null))},S=()=>{if(!r)return[];const s=[],{current_page:l,last_page:g}=r;l>3&&(s.push(1),l>4&&s.push("ellipsis-start"));for(let b=Math.max(1,l-2);b<=Math.min(g,l+2);b++)s.push(b);return l<g-2&&(l<g-3&&s.push("ellipsis-end"),s.push(g)),s};return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsxs("div",{className:"flex-1 space-y-6 p-4 md:p-6 max-w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(C,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground font-sans",children:"Roles"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage system roles and their permissions"})]})]}),f("create roles")&&e.jsx(T,{asChild:!0,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:e.jsxs(y,{to:"/roles/create",children:[e.jsx(oe,{className:"mr-2 h-4 w-4"}),"Add Role"]})})]}),e.jsx(t,{className:"bg-card border-border",children:e.jsx(u,{className:"p-4 space-y-3",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative lg:col-span-2",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(B,{placeholder:"Search roles (name, permission)â€¦",value:h,onChange:s=>j(s.target.value),className:"pl-10 bg-background border-input text-foreground"})]}),e.jsx("div",{className:"hidden lg:block"}),e.jsx("div",{className:"hidden lg:block"})]})})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(t,{className:"bg-card border-border",children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium text-muted-foreground",children:"Total Roles"}),e.jsx(C,{className:"w-4 h-4 text-chart-1"})]}),e.jsx(u,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:r?.total||o.length||0})})]}),e.jsx("div",{className:"hidden sm:block",children:e.jsx(t,{className:"bg-card border-border h-full opacity-0 pointer-events-none"})}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(t,{className:"bg-card border-border h-full opacity-0 pointer-events-none"})}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(t,{className:"bg-card border-border h-full opacity-0 pointer-events-none"})})]}),e.jsx(t,{className:"bg-card border-border flex-1 flex flex-col min-h-0",children:e.jsx(u,{className:"p-0 flex-1 flex flex-col min-h-0",children:e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(de,{roles:o,isLoading:p,onDelete:async s=>{await k(s)}})})})}),r&&r.last_page>1&&e.jsx(t,{className:"bg-card border-border",children:e.jsx(u,{className:"p-3",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground text-center sm:text-left",children:["Showing ",r.from||0," to ",r.to||0," of ",r.total||0," results"]}),e.jsx(q,{children:e.jsxs(F,{children:[e.jsx(w,{children:e.jsx(Q,{onClick:x,className:r.current_page===1?"pointer-events-none opacity-50":"cursor-pointer"})}),S().map((s,l)=>e.jsx(w,{children:s==="ellipsis-start"||s==="ellipsis-end"?e.jsx(V,{}):e.jsx($,{onClick:()=>a(s),isActive:r.current_page===s,className:"cursor-pointer",children:s})},l)),e.jsx(w,{children:e.jsx(z,{onClick:i,className:r.current_page===r.last_page?"pointer-events-none opacity-50":"cursor-pointer"})})]})})]})})})]}),e.jsx(G,{open:N!==null,onOpenChange:s=>!s&&c(null),children:e.jsxs(O,{className:"sm:max-w-[480px]",children:[e.jsxs(U,{children:[e.jsx(J,{children:"Delete role"}),e.jsx(K,{children:"Are you sure you want to delete this role? This action cannot be undone."})]}),e.jsxs(W,{children:[e.jsx(X,{onClick:()=>c(null),children:"Cancel"}),e.jsx(Y,{onClick:R,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})};export{Ae as default};
