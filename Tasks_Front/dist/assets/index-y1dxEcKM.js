import{q as p,j as e,D as b,v,B as N,w,x as d,y as i,U as h,p as y,I as C}from"./index-D14aCydU.js";import{C as u,d as j,a as T,b as U}from"./card-vgImVvDX.js";import{u as A}from"./useUsers-f_4eEDlz.js";import{u as D}from"./filtersStore-DLrDhWIW.js";import{T as E,a as P,b as g,c as l,d as S,e as n}from"./table-BJiSr6fB.js";import{B as f}from"./badge-CGZ4hFPH.js";import{A as B,a as M}from"./avatar--2bQ5FjZ.js";import{E as k}from"./ellipsis-CgSiJLvW.js";import{E as L}from"./eye-C0ZgRVJM.js";import{T as H}from"./trending-up-6IBUAY2t.js";import{S as I}from"./square-pen-Dd2lxkdM.js";import{T as R}from"./trash-2-BOZnMgTQ.js";import{P as $}from"./plus-CmWdoRfB.js";import"./usersStore-PLx0t5ck.js";import"./permissionService-DH1L8Xjh.js";import"./index-BBhImiVH.js";const q=({users:t,isLoading:o,onDelete:m})=>{const{hasPermission:r}=p();return o?e.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((s,a)=>e.jsx("div",{className:"h-16 bg-muted animate-pulse rounded-lg"},a))}):t.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"No users found"})}):e.jsx("div",{className:"border border-border rounded-lg bg-card",children:e.jsxs(E,{children:[e.jsx(P,{children:e.jsxs(g,{className:"border-border",children:[e.jsx(l,{className:"text-foreground",children:"User"}),e.jsx(l,{className:"text-foreground",children:"Email"}),e.jsx(l,{className:"text-foreground",children:"Roles"}),e.jsx(l,{className:"text-foreground",children:"Created"}),e.jsx(l,{className:"text-foreground w-[50px]",children:"Actions"})]})}),e.jsx(S,{children:t.map(s=>{const a=r("view users")||r("edit users")||r("delete users")||r("view analytics");return e.jsxs(g,{className:"border-border hover:bg-accent/50",children:[e.jsx(n,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(B,{className:"w-8 h-8",children:e.jsx(M,{className:"bg-primary text-primary-foreground text-sm",children:s.name.charAt(0).toUpperCase()})}),e.jsx("div",{children:e.jsx("p",{className:"text-sm font-medium text-foreground",children:s.name})})]})}),e.jsx(n,{className:"text-foreground",children:s.email}),e.jsx(n,{children:e.jsxs("div",{className:"flex gap-1 flex-wrap",children:[s.roles.slice(0,2).map(c=>e.jsx(f,{variant:"secondary",className:"text-xs",children:c.name},c.id)),s.roles.length>2&&e.jsxs(f,{variant:"outline",className:"text-xs",children:["+",s.roles.length-2]})]})}),e.jsx(n,{className:"text-muted-foreground",children:new Date(s.created_at).toLocaleDateString()}),e.jsx(n,{children:a?e.jsxs(b,{children:[e.jsx(v,{asChild:!0,children:e.jsx(N,{variant:"ghost",className:"h-8 w-8 p-0 hover:bg-accent",children:e.jsx(k,{className:"h-4 w-4"})})}),e.jsxs(w,{align:"end",className:"bg-popover border-border",children:[r("view users")&&e.jsx(d,{asChild:!0,className:"hover:bg-accent hover:text-accent-foreground",children:e.jsxs(i,{to:`/users/${s.id}`,className:"flex items-center",children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),"View"]})}),r("view analytics")&&e.jsx(d,{asChild:!0,className:"hover:bg-accent hover:text-accent-foreground",children:e.jsxs(i,{to:`/analytics/users/${s.id}`,className:"flex items-center",children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"User Analytics"]})}),r("edit users")&&e.jsx(d,{asChild:!0,className:"hover:bg-accent hover:text-accent-foreground",children:e.jsxs(i,{to:`/users/${s.id}/edit`,className:"flex items-center",children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Edit"]})}),r("delete users")&&e.jsxs(d,{onClick:()=>m(s.id),className:"text-destructive hover:bg-destructive hover:text-destructive-foreground",children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]}):e.jsx("span",{className:"text-muted-foreground text-xs",children:"No actions"})})]},s.id)})})]})})},ae=()=>{const{users:t,isLoading:o,deleteUser:m}=A(),{searchQuery:r,setSearchQuery:s}=D(),{hasPermission:a}=p(),c=async x=>{a("delete users")&&window.confirm("Are you sure you want to delete this user?")&&await m(x)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(h,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground font-sans",children:"Users"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage system users and their permissions"})]})]}),a("create users")&&e.jsx(N,{asChild:!0,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:e.jsxs(i,{to:"/users/create",children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"Add User"]})})]}),e.jsx(u,{className:"bg-card border-border",children:e.jsx(j,{className:"p-4",children:e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(C,{placeholder:"Search users...",value:r,onChange:x=>s(x.target.value),className:"pl-10 bg-background border-input text-foreground"})]})})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.jsxs(u,{className:"bg-card border-border",children:[e.jsxs(T,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Total Users"}),e.jsx(h,{className:"w-4 h-4 text-chart-1"})]}),e.jsx(j,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:t.length})})]})}),e.jsx(q,{users:t,isLoading:o,onDelete:c})]})};export{ae as default};
