import{g as N,a0 as v,y as b,j as e,G as w,H as y,J as C,B as h,Z as j,C as i,c as l,d,f as t,E as _,a1 as P,a2 as u,a3 as g}from"./index-DIb22iSE.js";import{B as o}from"./badge-Bfn6bh6Z.js";import{u as U}from"./useUser-uqgBaiF_.js";import{A}from"./arrow-left-DjCU2v7P.js";import{S as B}from"./square-pen-Bxr162oT.js";import{K as L}from"./key-Cwr05vxL.js";import"./usersStore-B-ndnV49.js";import"./permissionService-BBi_Eg8z.js";const S=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],k=N("mail",S),K=()=>{const{id:p}=v(),{user:s,userRolesPermissions:r,isLoading:f,error:x}=U(p),{hasPermission:n}=b();if(f)return e.jsx("div",{className:"min-h-screen flex flex-col",children:e.jsxs("div",{className:"flex-1 space-y-6 p-4 md:p-6 max-w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-muted animate-pulse"}),e.jsxs("div",{children:[e.jsx("div",{className:"h-8 bg-muted animate-pulse rounded w-48"}),e.jsx("div",{className:"h-4 bg-muted animate-pulse rounded w-64 mt-2"})]})]}),e.jsx("div",{className:"h-9 w-36 bg-muted animate-pulse rounded"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"h-64 bg-muted animate-pulse rounded-lg"}),e.jsx("div",{className:"h-64 bg-muted animate-pulse rounded-lg"}),e.jsx("div",{className:"h-64 bg-muted animate-pulse rounded-lg"})]})]})});if(x||!s)return e.jsx("div",{className:"min-h-screen flex flex-col",children:e.jsx("div",{className:"flex-1 space-y-6 p-4 md:p-6 max-w-full",children:e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-destructive",children:x||"User not found"})})})});const c=s.permissions||[],m=r?.all_permissions||[];return e.jsx("div",{className:"min-h-screen flex flex-col",children:e.jsxs("div",{className:"flex-1 space-y-6 p-4 md:p-6 max-w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(w,{className:"w-12 h-12",children:[typeof s.avatar_url=="string"&&s.avatar_url.trim()!==""&&e.jsx(y,{src:s.avatar_url,alt:s.name||"User avatar",className:"object-cover"}),e.jsx(C,{className:"bg-primary text-primary-foreground text-lg",children:s.name?.charAt(0).toUpperCase()||"U"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground font-sans",children:s.name}),e.jsx("p",{className:"text-muted-foreground",children:s.email})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(j,{to:"/users",children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),"Back to Users"]})}),n("edit users")&&e.jsx(h,{asChild:!0,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:e.jsxs(j,{to:`/users/${s.id}/edit`,children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"Edit User"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(i,{className:"bg-card border-border",children:[e.jsx(l,{children:e.jsxs(d,{className:"text-foreground flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4"}),"User Information"]})}),e.jsxs(t,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Name"}),e.jsx("p",{className:"font-medium text-foreground",children:s.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Email"}),e.jsx("p",{className:"font-medium text-foreground",children:s.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Email Verified"}),e.jsx(o,{variant:s.email_verified_at?"default":"secondary",children:s.email_verified_at?"Verified":"Not Verified"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Created"}),e.jsxs("p",{className:"font-medium text-foreground flex items-center gap-2",children:[e.jsx(_,{className:"w-4 h-4"}),new Date(s.created_at).toLocaleDateString()]})]})]})]}),e.jsxs(i,{className:"bg-card border-border",children:[e.jsx(l,{children:e.jsxs(d,{className:"text-foreground flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4"}),"Roles ",(r?.roles?.length??0)>0?`(${r?.roles?.length})`:"(0)"]})}),e.jsx(t,{children:e.jsx("div",{className:"space-y-2",children:(r?.roles?.length??0)>0?(r?.roles??[]).map(a=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-accent/50 rounded",children:[e.jsx("span",{className:"font-medium text-foreground",children:a.name}),e.jsxs(o,{variant:"outline",className:"text-xs",children:[a.permissions?.length||0," permissions"]})]},a.id)):e.jsx("p",{className:"text-muted-foreground text-sm",children:"No roles assigned"})})})]}),n("view permissions")&&e.jsxs(i,{className:"bg-card border-border overflow-hidden",children:[e.jsx(l,{children:e.jsxs(d,{className:"text-foreground flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4"}),"Direct Permissions (",c.length,")"]})}),e.jsx(t,{className:"p-0",children:e.jsxs(u,{className:"h-48",children:[e.jsx("div",{className:"space-y-2 p-4 pr-6",children:c.length>0?c.map(a=>e.jsx("div",{className:"p-2 bg-accent/50 rounded",children:e.jsx("span",{className:"text-sm text-foreground",children:a.name})},a.id)):e.jsx("p",{className:"text-muted-foreground text-sm p-2",children:"No direct permissions assigned"})}),e.jsx(g,{orientation:"vertical"})]})})]})]}),n("view permissions")&&r&&m.length>0&&e.jsxs(i,{className:"bg-card border-border overflow-hidden",children:[e.jsxs(l,{children:[e.jsxs(d,{className:"text-foreground",children:["All Permissions (",m.length,")"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Combined permissions from roles and direct assignments"})]}),e.jsx(t,{className:"p-0",children:e.jsxs(u,{className:"h-64",children:[e.jsx("div",{className:"p-4 pr-6",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:m.map(a=>e.jsx(o,{variant:"secondary",className:"text-xs",children:a.name},a.id))})}),e.jsx(g,{orientation:"vertical"})]})})]})]})})};export{K as default};
