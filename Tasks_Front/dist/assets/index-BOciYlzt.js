import{h as K,q,j as e,D as O,v as W,B as Q,w as X,x as v,y as L,p as Y,I as Z}from"./index-Zu_vECNa.js";import{C as c,d as o,a as y,b as C}from"./card-BEr3QNnL.js";import{T as ee,a as se,b as w,c as _}from"./tabs-DR-YrqT6.js";import{P as k,a as T,b as i,c as A,d as P,e as R,f as D}from"./pagination-BuOP3ZWf.js";import{u as ae}from"./useRatingConfigs-BmzmIKGG.js";import{u as re}from"./filtersStore-Bzkg2oTq.js";import{T as te,a as ne,b as U,c as h,d as ie,e as g}from"./table-BG5bWP2S.js";import{B as le}from"./badge-DxFSLxNv.js";import{A as ce,a as oe}from"./avatar-DLajZ5eL.js";import{R as de}from"./RatingConfigTypeBadge-Dmd1NGDK.js";import{E as xe}from"./ellipsis-BlRS9ixv.js";import{E as me}from"./eye-CMXziqT6.js";import{S as he}from"./square-pen-nXKqUES0.js";import{P as ge}from"./play-B4YllFD2.js";import{T as pe}from"./trash-2-CfGhK2lt.js";import{S as H}from"./settings-Dei-lQEr.js";import{P as ue}from"./plus-BVAq3NVV.js";import{C as je}from"./circle-check-Darv1scT.js";import{C as fe}from"./clock-D2BjIf0k.js";import"./ratingConfigsStore-BvDltYfQ.js";import"./ratingConfigService-g0a8J4aT.js";import"./index-C8ilSr3e.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],be=K("database",Ne),S=({ratingConfigs:n,isLoading:a,onDelete:m,onActivate:M,showActions:u=!0})=>{const{hasPermission:p}=q();return a?e.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((r,l)=>e.jsx("div",{className:"h-16 bg-muted animate-pulse rounded-lg"},l))}):n.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"No rating configurations found"})}):e.jsx("div",{className:"border border-border rounded-lg bg-card",children:e.jsxs(te,{children:[e.jsx(ne,{children:e.jsxs(U,{className:"border-border",children:[e.jsx(h,{className:"text-foreground",children:"Name"}),e.jsx(h,{className:"text-foreground",children:"Type"}),e.jsx(h,{className:"text-foreground",children:"Status"}),e.jsx(h,{className:"text-foreground",children:"Creator"}),e.jsx(h,{className:"text-foreground",children:"Created"}),u&&e.jsx(h,{className:"text-foreground w-[50px]",children:"Actions"})]})}),e.jsx(ie,{children:n.map(r=>{const l=p("view rating configs"),d=p("edit rating configs"),x=p("delete rating configs"),E=l||d||x;return e.jsxs(U,{className:"border-border hover:bg-accent/50",children:[e.jsx(g,{children:e.jsx("div",{className:"space-y-1",children:e.jsx("p",{className:"text-sm font-medium text-foreground",children:r.name})})}),e.jsx(g,{children:e.jsx(de,{type:r.type})}),e.jsx(g,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(le,{variant:r.is_active?"default":"secondary",className:r.is_active?"text-green-600 bg-green-100":"",children:r.is_active?"Active":"Inactive"})})}),e.jsx(g,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce,{className:"w-6 h-6",children:e.jsx(oe,{className:"bg-primary text-primary-foreground text-xs",children:r.creator?.name?.charAt(0).toUpperCase()||"U"})}),e.jsx("span",{className:"text-sm text-foreground",children:r.creator?.name||"Unknown User"})]})}),e.jsx(g,{className:"text-muted-foreground",children:new Date(r.created_at).toLocaleDateString()}),u&&e.jsx(g,{children:E?e.jsxs(O,{children:[e.jsx(W,{asChild:!0,children:e.jsx(Q,{variant:"ghost",className:"h-8 w-8 p-0 hover:bg-accent",children:e.jsx(xe,{className:"h-4 w-4"})})}),e.jsxs(X,{align:"end",className:"bg-popover border-border",children:[l&&e.jsx(v,{asChild:!0,className:"hover:bg-accent hover:text-accent-foreground",children:e.jsxs(L,{to:`/rating-configs/${r.id}`,className:"flex items-center",children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),"View"]})}),d&&e.jsx(v,{asChild:!0,className:"hover:bg-accent hover:text-accent-foreground",children:e.jsxs(L,{to:`/rating-configs/${r.id}/edit`,className:"flex items-center",children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),"Edit"]})}),d&&!r.is_active&&e.jsxs(v,{onClick:()=>M(r.id),className:"hover:bg-accent hover:text-accent-foreground",children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),"Activate"]}),x&&e.jsxs(v,{onClick:()=>m(r.id),className:"text-destructive hover:bg-destructive hover:text-destructive-foreground",children:[e.jsx(pe,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]}):e.jsx("span",{className:"text-muted-foreground text-xs",children:"No actions"})})]},r.id)})})]})})},Qe=()=>{const{ratingConfigs:n,pagination:a,isLoading:m,deleteRatingConfig:M,activateRatingConfig:u,fetchRatingConfigs:p,fetchRatingConfigsByType:r,goToPage:l,nextPage:d,prevPage:x}=ae(),{searchQuery:E,setSearchQuery:$}=re(),{hasPermission:B}=q(),j=async s=>{B("delete rating configs")&&window.confirm("Are you sure you want to delete this rating configuration?")&&await M(s)},f=async s=>{B("edit rating configs")&&await u(s)},z=async s=>{s==="all"?await p(1):await r(s,1)},G=n.filter(s=>s.is_active).length,V=n.filter(s=>s.type==="task_rating").length,J=n.filter(s=>s.type==="stakeholder_rating").length,F=n.filter(s=>s.type==="final_rating").length,N=()=>{if(!a)return[];const s=[],{current_page:t,last_page:b}=a;t>3&&(s.push(1),t>4&&s.push("ellipsis-start"));for(let I=Math.max(1,t-2);I<=Math.min(b,t+2);I++)s.push(I);return t<b-2&&(t<b-3&&s.push("ellipsis-end"),s.push(b)),s};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(H,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground font-sans",children:"Rating Configurations"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage rating system configurations"})]})]}),B("create rating configs")&&e.jsx(Q,{asChild:!0,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:e.jsxs(L,{to:"/rating-configs/create",children:[e.jsx(ue,{className:"mr-2 h-4 w-4"}),"New Configuration"]})})]}),e.jsx(c,{className:"bg-card border-border",children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"relative max-w-sm",children:[e.jsx(Y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(Z,{placeholder:"Search configurations...",value:E,onChange:s=>$(s.target.value),className:"pl-10 bg-background border-input text-foreground"})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(c,{className:"bg-card border-border",children:[e.jsxs(y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(C,{className:"text-sm font-medium text-muted-foreground",children:"Total Configurations"}),e.jsx(be,{className:"w-4 h-4 text-chart-1"})]}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:a?.total||n.length})})]}),e.jsxs(c,{className:"bg-card border-border",children:[e.jsxs(y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(C,{className:"text-sm font-medium text-muted-foreground",children:"Active"}),e.jsx(je,{className:"w-4 h-4 text-green-500"})]}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:G})})]}),e.jsxs(c,{className:"bg-card border-border",children:[e.jsxs(y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(C,{className:"text-sm font-medium text-muted-foreground",children:"Task Rating"}),e.jsx(fe,{className:"w-4 h-4 text-blue-500"})]}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:V})})]}),e.jsxs(c,{className:"bg-card border-border",children:[e.jsxs(y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(C,{className:"text-sm font-medium text-muted-foreground",children:"Final Rating"}),e.jsx(H,{className:"w-4 h-4 text-purple-500"})]}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:F})})]})]}),e.jsxs(ee,{defaultValue:"all",className:"space-y-4",onValueChange:z,children:[e.jsxs(se,{className:"bg-muted",children:[e.jsxs(w,{value:"all",children:["All (",a?.total||n.length,")"]}),e.jsxs(w,{value:"task_rating",children:["Task Rating (",V,")"]}),e.jsxs(w,{value:"stakeholder_rating",children:["Stakeholder (",J,")"]}),e.jsxs(w,{value:"final_rating",children:["Final Rating (",F,")"]})]}),e.jsxs(_,{value:"all",className:"space-y-4",children:[e.jsx(S,{ratingConfigs:n,isLoading:m,onDelete:j,onActivate:f}),a&&a.last_page>1&&e.jsx(c,{className:"bg-card border-border",children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",a.from||0," to ",a.to||0," of ",a.total," results"]}),e.jsx(k,{children:e.jsxs(T,{children:[e.jsx(i,{children:e.jsx(A,{onClick:x,className:a.current_page===1?"pointer-events-none opacity-50":"cursor-pointer"})}),N().map((s,t)=>e.jsx(i,{children:s==="ellipsis-start"||s==="ellipsis-end"?e.jsx(P,{}):e.jsx(R,{onClick:()=>l(s),isActive:a.current_page===s,className:"cursor-pointer",children:s})},t)),e.jsx(i,{children:e.jsx(D,{onClick:d,className:a.current_page===a.last_page?"pointer-events-none opacity-50":"cursor-pointer"})})]})})]})})})]}),e.jsxs(_,{value:"task_rating",className:"space-y-4",children:[e.jsx(S,{ratingConfigs:n.filter(s=>s.type==="task_rating"),isLoading:m,onDelete:j,onActivate:f}),a&&a.last_page>1&&e.jsx(c,{className:"bg-card border-border",children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",a.from||0," to ",a.to||0," of ",a.total," results"]}),e.jsx(k,{children:e.jsxs(T,{children:[e.jsx(i,{children:e.jsx(A,{onClick:x,className:a.current_page===1?"pointer-events-none opacity-50":"cursor-pointer"})}),N().map((s,t)=>e.jsx(i,{children:s==="ellipsis-start"||s==="ellipsis-end"?e.jsx(P,{}):e.jsx(R,{onClick:()=>l(s),isActive:a.current_page===s,className:"cursor-pointer",children:s})},t)),e.jsx(i,{children:e.jsx(D,{onClick:d,className:a.current_page===a.last_page?"pointer-events-none opacity-50":"cursor-pointer"})})]})})]})})})]}),e.jsxs(_,{value:"stakeholder_rating",className:"space-y-4",children:[e.jsx(S,{ratingConfigs:n.filter(s=>s.type==="stakeholder_rating"),isLoading:m,onDelete:j,onActivate:f}),a&&a.last_page>1&&e.jsx(c,{className:"bg-card border-border",children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",a.from||0," to ",a.to||0," of ",a.total," results"]}),e.jsx(k,{children:e.jsxs(T,{children:[e.jsx(i,{children:e.jsx(A,{onClick:x,className:a.current_page===1?"pointer-events-none opacity-50":"cursor-pointer"})}),N().map((s,t)=>e.jsx(i,{children:s==="ellipsis-start"||s==="ellipsis-end"?e.jsx(P,{}):e.jsx(R,{onClick:()=>l(s),isActive:a.current_page===s,className:"cursor-pointer",children:s})},t)),e.jsx(i,{children:e.jsx(D,{onClick:d,className:a.current_page===a.last_page?"pointer-events-none opacity-50":"cursor-pointer"})})]})})]})})})]}),e.jsxs(_,{value:"final_rating",className:"space-y-4",children:[e.jsx(S,{ratingConfigs:n.filter(s=>s.type==="final_rating"),isLoading:m,onDelete:j,onActivate:f}),a&&a.last_page>1&&e.jsx(c,{className:"bg-card border-border",children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",a.from||0," to ",a.to||0," of ",a.total," results"]}),e.jsx(k,{children:e.jsxs(T,{children:[e.jsx(i,{children:e.jsx(A,{onClick:x,className:a.current_page===1?"pointer-events-none opacity-50":"cursor-pointer"})}),N().map((s,t)=>e.jsx(i,{children:s==="ellipsis-start"||s==="ellipsis-end"?e.jsx(P,{}):e.jsx(R,{onClick:()=>l(s),isActive:a.current_page===s,className:"cursor-pointer",children:s})},t)),e.jsx(i,{children:e.jsx(D,{onClick:d,className:a.current_page===a.last_page?"pointer-events-none opacity-50":"cursor-pointer"})})]})})]})})})]})]})]})};export{Qe as default};
