import{q as C,j as e,D as _,v as A,B as T,w as S,x as g,y as b,A as w,p as E,I as k}from"./index-Zu_vECNa.js";import{C as j,d as f,a as M,b as B}from"./card-BEr3QNnL.js";import{P as I,a as L,b as N,c as H,d as q,e as Q,f as V}from"./pagination-BuOP3ZWf.js";import{u as $}from"./useRoles-zeRXMU3p.js";import{u as F}from"./filtersStore-Bzkg2oTq.js";import{T as G,a as U,b as y,c as l,d as z,e as c}from"./table-BG5bWP2S.js";import{B as P}from"./badge-DxFSLxNv.js";import{E as J}from"./ellipsis-BlRS9ixv.js";import{E as K}from"./eye-CMXziqT6.js";import{S as O}from"./square-pen-nXKqUES0.js";import{T as W}from"./trash-2-CfGhK2lt.js";import{P as X}from"./plus-BVAq3NVV.js";import"./rolesStore-DsHNiK8l.js";import"./permissionService-BsqUotUa.js";const Y=({roles:o,isLoading:r,onDelete:h})=>{const{hasPermission:n}=C();return r?e.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((a,i)=>e.jsx("div",{className:"h-16 bg-muted animate-pulse rounded-lg"},i))}):o.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"No roles found"})}):e.jsx("div",{className:"border border-border rounded-lg bg-card",children:e.jsxs(G,{children:[e.jsx(U,{children:e.jsxs(y,{className:"border-border",children:[e.jsx(l,{className:"text-foreground",children:"Role Name"}),e.jsx(l,{className:"text-foreground",children:"Permissions"}),e.jsx(l,{className:"text-foreground",children:"Guard Name"}),e.jsx(l,{className:"text-foreground",children:"Created"}),e.jsx(l,{className:"text-foreground w-[50px]",children:"Actions"})]})}),e.jsx(z,{children:o.map(a=>{const i=n("view roles"),d=n("edit roles"),m=n("delete roles"),u=i||d||m;return e.jsxs(y,{className:"border-border hover:bg-accent/50",children:[e.jsx(c,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-primary font-medium text-sm",children:a.name.charAt(0).toUpperCase()})}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:a.name})]})}),e.jsx(c,{children:n("view permissions")?e.jsxs(P,{variant:"secondary",className:"text-xs",children:[a.permissions?.length||0," permissions"]}):e.jsx(P,{variant:"outline",className:"text-xs",children:"Hidden"})}),e.jsx(c,{className:"text-muted-foreground text-sm",children:a.guard_name}),e.jsx(c,{className:"text-muted-foreground",children:new Date(a.created_at).toLocaleDateString()}),e.jsx(c,{children:u?e.jsxs(_,{children:[e.jsx(A,{asChild:!0,children:e.jsx(T,{variant:"ghost",className:"h-8 w-8 p-0 hover:bg-accent",children:e.jsx(J,{className:"h-4 w-4"})})}),e.jsxs(S,{align:"end",className:"bg-popover border-border",children:[i&&e.jsx(g,{asChild:!0,className:"hover:bg-accent hover:text-accent-foreground",children:e.jsxs(b,{to:`/roles/${a.id}`,className:"flex items-center",children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),"View"]})}),d&&e.jsx(g,{asChild:!0,className:"hover:bg-accent hover:text-accent-foreground",children:e.jsxs(b,{to:`/roles/${a.id}/edit`,className:"flex items-center",children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Edit"]})}),m&&e.jsxs(g,{onClick:()=>h(a.id),className:"text-destructive hover:bg-destructive hover:text-destructive-foreground",children:[e.jsx(W,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]}):e.jsx("span",{className:"text-muted-foreground text-xs",children:"No actions"})})]},a.id)})})]})})},he=()=>{const{roles:o,pagination:r,isLoading:h,deleteRole:n,goToPage:a,nextPage:i,prevPage:d}=$(),{searchQuery:m,setSearchQuery:u}=F(),{hasPermission:v}=C(),D=async s=>{v("delete roles")&&window.confirm("Are you sure you want to delete this role?")&&await n(s)},R=()=>{if(!r)return[];const s=[],{current_page:t,last_page:x}=r;t>3&&(s.push(1),t>4&&s.push("ellipsis-start"));for(let p=Math.max(1,t-2);p<=Math.min(x,t+2);p++)s.push(p);return t<x-2&&(t<x-3&&s.push("ellipsis-end"),s.push(x)),s};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(w,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground font-sans",children:"Roles"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage system roles and their permissions"})]})]}),v("create roles")&&e.jsx(T,{asChild:!0,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:e.jsxs(b,{to:"/roles/create",children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"Add Role"]})})]}),e.jsx(j,{className:"bg-card border-border",children:e.jsx(f,{className:"p-4",children:e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(E,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(k,{placeholder:"Search roles...",value:m,onChange:s=>u(s.target.value),className:"pl-10 bg-background border-input text-foreground"})]})})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.jsxs(j,{className:"bg-card border-border",children:[e.jsxs(M,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium text-muted-foreground",children:"Total Roles"}),e.jsx(w,{className:"w-4 h-4 text-chart-1"})]}),e.jsx(f,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:r?.total||o.length})})]})}),e.jsx(Y,{roles:o,isLoading:h,onDelete:D}),r&&r.last_page>1&&e.jsx(j,{className:"bg-card border-border",children:e.jsx(f,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",r.from||0," to ",r.to||0," of ",r.total," results"]}),e.jsx(I,{children:e.jsxs(L,{children:[e.jsx(N,{children:e.jsx(H,{onClick:d,className:r.current_page===1?"pointer-events-none opacity-50":"cursor-pointer"})}),R().map((s,t)=>e.jsx(N,{children:s==="ellipsis-start"||s==="ellipsis-end"?e.jsx(q,{}):e.jsx(Q,{onClick:()=>a(s),isActive:r.current_page===s,className:"cursor-pointer",children:s})},t)),e.jsx(N,{children:e.jsx(V,{onClick:i,className:r.current_page===r.last_page?"pointer-events-none opacity-50":"cursor-pointer"})})]})})]})})})]})};export{he as default};
