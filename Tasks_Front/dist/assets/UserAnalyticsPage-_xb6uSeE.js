import{h as N,r as u,j as e,y as v,J as g,B as f,C as _,x as b}from"./index-DB2dH0Gn.js";import{C as r,a as m,b as o,d as i}from"./card-Do0T9gHn.js";import{B as h}from"./badge-DBBjrr1q.js";import{u as y}from"./analyticsStore-Csw_g5sy.js";import{P as w}from"./progress-DPvFmz7d.js";import{a as j}from"./analyticsService-x8RGf70-.js";import{C as k}from"./calendar-DEN2tVaj.js";import{T as C}from"./trending-up-DmzhYcU_.js";import{A as p}from"./arrow-left-C3FmFHG1.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],T=N("award",R);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],L=N("trending-down",A),U=(s,a,n)=>{const{userPerformance:c,isLoading:t,error:x,fetchUserPerformance:l}=y(),d=typeof s=="string"?parseInt(s):s;return u.useEffect(()=>{d&&l(d,a,n)},[d,a,n,l]),{userPerformance:c,isLoading:t,error:x,refreshUserPerformance:()=>l(d,a,n)}},S=({userPerformance:s})=>{const a=t=>j.getPerformanceGrade(t),n=t=>j.getPerformanceColor(t),c=t=>{switch(t){case"improving":return e.jsx(C,{className:"w-4 h-4 text-green-500"});case"declining":return e.jsx(L,{className:"w-4 h-4 text-red-500"});default:return e.jsx("div",{className:"w-4 h-4"})}};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(r,{className:"bg-card border-border",children:[e.jsx(m,{children:e.jsxs(o,{className:"text-foreground flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5"}),"Performance Summary"]})}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Overall Score"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{variant:"outline",style:{backgroundColor:n(s.performance_score)+"20",color:n(s.performance_score)},children:["Grade ",a(s.performance_score)]}),e.jsxs("span",{className:"text-lg font-bold",children:[s.performance_score,"%"]})]})]}),e.jsx(w,{value:s.performance_score,className:"h-3"}),s.period.start&&s.period.end&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(k,{className:"w-4 h-4"}),e.jsxs("span",{children:[new Date(s.period.start).toLocaleDateString()," - "," ",new Date(s.period.end).toLocaleDateString()]})]})]})]}),e.jsxs(r,{className:"bg-card border-border",children:[e.jsx(m,{children:e.jsx(o,{className:"text-foreground",children:"Final Ratings"})}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Current Rating"}),e.jsxs("div",{className:"flex items-center gap-2",children:[c(s.final_ratings.rating_trend),e.jsxs("span",{className:"text-lg font-bold",children:[s.final_ratings.current_rating,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Average Rating"}),e.jsxs("span",{className:"font-medium",children:[s.final_ratings.average_rating,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Periods"}),e.jsx(h,{variant:"outline",children:s.final_ratings.total_periods})]}),e.jsxs("div",{className:"text-xs text-muted-foreground capitalize",children:["Trend: ",s.final_ratings.rating_trend]})]})]}),e.jsxs(r,{className:"bg-card border-border",children:[e.jsx(m,{children:e.jsx(o,{className:"text-foreground",children:"Task Performance"})}),e.jsxs(i,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Completion Rate"}),e.jsxs("span",{className:"font-medium",children:[Math.round(s.task_metrics.task_completion_rate*100),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Tasks Completed"}),e.jsxs("span",{className:"font-medium",children:[s.task_metrics.completed_tasks_count," / ",s.task_metrics.assigned_tasks_count]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Weight"}),e.jsx("span",{className:"font-medium",children:s.task_metrics.total_task_weight})]}),s.task_metrics.avg_task_rating_given>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Avg Rating Given"}),e.jsxs(h,{variant:"outline",children:[s.task_metrics.avg_task_rating_given,"%"]})]})]})]}),e.jsxs(r,{className:"bg-card border-border",children:[e.jsx(m,{children:e.jsx(o,{className:"text-foreground",children:"Ticket Performance"})}),e.jsxs(i,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Resolution Rate"}),e.jsxs("span",{className:"font-medium",children:[Math.round(s.ticket_metrics.resolution_rate*100),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Tickets Resolved"}),e.jsxs("span",{className:"font-medium",children:[s.ticket_metrics.tickets_resolved," / ",s.ticket_metrics.tickets_assigned]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Tickets Requested"}),e.jsx("span",{className:"font-medium",children:s.ticket_metrics.tickets_requested})]}),s.ticket_metrics.avg_resolution_time>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Avg Resolution Time"}),e.jsx("span",{className:"font-medium",children:j.formatDuration(s.ticket_metrics.avg_resolution_time)})]})]})]})]})},$=()=>{const{userId:s}=v(),{userPerformance:a,isLoading:n,error:c}=U(s);if(n)return e.jsx("div",{className:"min-h-screen flex flex-col",children:e.jsxs("div",{className:"flex-1 space-y-6 p-4 md:p-6 max-w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(g,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("div",{className:"h-8 bg-muted animate-pulse rounded w-48"}),e.jsx("div",{className:"h-4 bg-muted animate-pulse rounded w-72 mt-2"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(f,{variant:"outline",size:"sm",asChild:!0,disabled:!0,children:e.jsxs("span",{className:"flex items-center",children:[e.jsx(p,{className:"mr-2 h-4 w-4"}),"Back to Analytics"]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(r,{className:"bg-card border-border",children:e.jsx(i,{className:"p-6",children:e.jsx("div",{className:"h-64 bg-muted animate-pulse rounded-lg"})})}),e.jsx(r,{className:"bg-card border-border",children:e.jsx(i,{className:"p-6",children:e.jsx("div",{className:"h-64 bg-muted animate-pulse rounded-lg"})})})]})]})});if(c||!a)return e.jsx("div",{className:"min-h-screen flex flex-col",children:e.jsx("div",{className:"flex-1 space-y-6 p-4 md:p-6 max-w-full",children:e.jsx(r,{className:"bg-card border-border",children:e.jsx(i,{className:"p-8 text-center",children:e.jsx("p",{className:"text-destructive",children:c||"User analytics not found"})})})})});const t=a.final_ratings?.recent_ratings??[],x=a.final_ratings?.average_rating;return e.jsx("div",{className:"min-h-screen flex flex-col",children:e.jsxs("div",{className:"flex-1 space-y-6 p-4 md:p-6 max-w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(_,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground font-sans",children:"User Analytics"}),e.jsxs("p",{className:"text-muted-foreground",children:["Performance analysis for ",e.jsxs("span",{className:"font-medium",children:["User #",s]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[typeof x=="number"&&e.jsxs(h,{variant:"secondary",className:"text-sm",children:["Avg Final Rating: ",x,"%"]}),e.jsx(f,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(b,{to:"/analytics",className:"flex items-center",children:[e.jsx(p,{className:"mr-2 h-4 w-4"}),"Back to Analytics"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(r,{className:"bg-card border-border",children:[e.jsx(m,{children:e.jsxs(o,{className:"text-foreground flex items-center gap-2",children:[e.jsx(g,{className:"w-5 h-5"}),"Performance Metrics"]})}),e.jsx(i,{className:"p-6",children:e.jsx(S,{userPerformance:a})})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(r,{className:"bg-card border-border",children:[e.jsx(m,{children:e.jsx(o,{className:"text-foreground",children:"Recent Final Ratings"})}),e.jsx(i,{children:t.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No recent ratings"}):e.jsx("div",{className:"space-y-3",children:t.map((l,d)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-foreground",children:[l.final_rating,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[new Date(l.period_start).toLocaleDateString()," —"," ",new Date(l.period_end).toLocaleDateString()]})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"w-20 h-2 bg-accent rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary transition-all",style:{width:`${l.final_rating}%`}})})})]},d))})})]})})]})]})})};export{$ as default};
