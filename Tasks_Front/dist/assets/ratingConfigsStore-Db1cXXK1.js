import{r as o}from"./ratingConfigService-D8M4FryO.js";import{k as g,t as n}from"./index-BOfNqdHU.js";const f=g((a,i)=>({ratingConfigs:[],currentRatingConfig:null,pagination:null,typePagination:{},currentType:null,isLoading:!1,error:null,fetchRatingConfigs:async(s=1)=>{a({isLoading:!0,error:null,currentType:null});try{const e=await o.getRatingConfigs(s);e.success?a({ratingConfigs:e.data,pagination:e.pagination||{current_page:1,total:e.data.length,per_page:15,last_page:1,from:e.data.length>0?1:null,to:e.data.length},isLoading:!1}):(a({error:e.message,isLoading:!1}),n.error(e.message))}catch(e){const r=e.message||"Failed to fetch rating configs";a({error:r,isLoading:!1}),n.error(r)}},fetchRatingConfig:async s=>{a({isLoading:!0,error:null});try{const e=await o.getRatingConfig(s);e.success?a({currentRatingConfig:e.data,isLoading:!1}):(a({error:e.message,isLoading:!1}),n.error(e.message))}catch(e){const r=e.message||"Failed to fetch rating config";a({error:r,isLoading:!1}),n.error(r)}},createRatingConfig:async s=>{a({isLoading:!0,error:null});try{const e=await o.createRatingConfig(s);if(e.success){a({isLoading:!1}),n.success("Rating config created successfully");const r=i().currentType;return r?i().fetchRatingConfigsByType(r):i().fetchRatingConfigs(),e.data}else return a({error:e.message,isLoading:!1}),n.error(e.message),null}catch(e){const r=e.message||"Failed to create rating config";return a({error:r,isLoading:!1}),n.error(r),null}},updateRatingConfig:async(s,e)=>{a({isLoading:!0,error:null});try{const r=await o.updateRatingConfig(s,e);if(r.success){a({currentRatingConfig:r.data,isLoading:!1}),n.success("Rating config updated successfully");const t=i().currentType;return t?i().fetchRatingConfigsByType(t):i().fetchRatingConfigs(),r.data}else return a({error:r.message,isLoading:!1}),n.error(r.message),null}catch(r){const t=r.message||"Failed to update rating config";return a({error:t,isLoading:!1}),n.error(t),null}},deleteRatingConfig:async s=>{a({isLoading:!0,error:null});try{const e=await o.deleteRatingConfig(s);if(e.success){a({isLoading:!1}),n.success("Rating config deleted successfully");const r=i().currentType;return r?i().fetchRatingConfigsByType(r):i().fetchRatingConfigs(),!0}else return a({error:e.message,isLoading:!1}),n.error(e.message),!1}catch(e){const r=e.message||"Failed to delete rating config";return a({error:r,isLoading:!1}),n.error(r),!1}},fetchRatingConfigsByType:async(s,e=1)=>{a({isLoading:!0,error:null,currentType:s});try{const r=await o.getRatingConfigsByType(s,e);r.success?a(t=>({ratingConfigs:r.data,typePagination:{...t.typePagination,[s]:r.pagination||{current_page:1,total:r.data.length,per_page:15,last_page:1,from:r.data.length>0?1:null,to:r.data.length}},isLoading:!1})):(a({error:r.message,isLoading:!1}),n.error(r.message))}catch(r){const t=r.message||"Failed to fetch rating configs by type";a({error:t,isLoading:!1}),n.error(t)}},activateRatingConfig:async s=>{try{const e=await o.activateRatingConfig(s);if(e.success){n.success("Rating config activated successfully"),i().currentRatingConfig?.id===s&&a({currentRatingConfig:e.data});const r=i().currentType;return r?i().fetchRatingConfigsByType(r):i().fetchRatingConfigs(),e.data}else return n.error(e.message),null}catch(e){return n.error(e.message||"Failed to activate rating config"),null}},fetchActiveRatingConfigsByType:async s=>{a({isLoading:!0,error:null});try{const e=await o.getActiveRatingConfigsByType(s);e.success?a({ratingConfigs:e.data,isLoading:!1}):(a({error:e.message,isLoading:!1}),n.error(e.message))}catch(e){const t=e?.response?.data?.message||e.message||"Failed to fetch active rating configs by type";a({error:t,isLoading:!1}),n.error(t)}},clearCurrentRatingConfig:()=>a({currentRatingConfig:null,error:null})}));export{f as u};
