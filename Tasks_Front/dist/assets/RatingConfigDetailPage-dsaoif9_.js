import{K as D,k as _,R as k,j as e,B as d,C as a,f as r,J as h,c as i,d as c,A as R,p as S,q as U}from"./index-C3ZJYr2K.js";import{B as o}from"./badge-C51bFrhW.js";import{A as B,a as P,b as T,c as L,d as z,e as F,f as I,g as O}from"./alert-dialog-83vxw59C.js";import{u as q}from"./useRatingConfig-BWTqU7bd.js";import{R as j}from"./RatingConfigTypeBadge-B4Y59Sqp.js";import{S as f}from"./settings-BRkfdQMT.js";import{A as u}from"./arrow-left-DqDlhkcA.js";import{P as E}from"./play-Bk-ecL1o.js";import{S as H}from"./square-pen-DX0-T_Az.js";import{U as J}from"./user-K9f-5bbj.js";import{C as x}from"./calendar-5LLnmlY3.js";import"./ratingConfigsStore-BvaP7Tka.js";import"./ratingConfigService-6r6Xqxq2.js";const re=()=>{const{id:p}=D(),{ratingConfig:s,isLoading:N,error:g,activateConfig:v}=q(p),{hasPermission:l}=_(),[b,t]=k.useState(!1),y=async()=>{l("edit rating configs")&&t(!0)},w=async()=>{if(!l("edit rating configs")){t(!1);return}await v(),t(!1)},C=()=>{if(!s)return null;const m=s.config_data;return e.jsxs(a,{className:"bg-card border-border",children:[e.jsx(i,{children:e.jsx(c,{className:"text-foreground",children:"Rating Fields"})}),e.jsx(r,{children:e.jsx("div",{className:"space-y-3",children:m.fields.map((n,A)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:n.name}),n.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:n.description})]}),e.jsxs(o,{variant:"outline",className:"text-sm",children:["Max: ",n.max_value]})]},A))})})]})};return N?e.jsx("div",{className:"min-h-screen flex flex-col",children:e.jsxs("div",{className:"flex-1 space-y-6 p-4 md:p-6 max-w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(f,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("div",{className:"h-8 bg-muted animate-pulse rounded w-48"}),e.jsx("div",{className:"h-4 bg-muted animate-pulse rounded w-64 mt-2"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(d,{variant:"outline",size:"sm",disabled:!0,children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),"Back to Configurations"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(a,{className:"bg-card border-border lg:col-span-2",children:e.jsx(r,{className:"p-6",children:e.jsx("div",{className:"h-40 bg-muted animate-pulse rounded"})})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(a,{className:"bg-card border-border",children:e.jsx(r,{className:"p-6",children:e.jsx("div",{className:"h-14 bg-muted animate-pulse rounded"})})}),e.jsx(a,{className:"bg-card border-border",children:e.jsx(r,{className:"p-6",children:e.jsx("div",{className:"h-24 bg-muted animate-pulse rounded"})})}),e.jsx(a,{className:"bg-card border-border",children:e.jsx(r,{className:"p-6",children:e.jsx("div",{className:"h-24 bg-muted animate-pulse rounded"})})})]})]})]})}):g||!s?e.jsx("div",{className:"min-h-screen flex flex-col",children:e.jsx("div",{className:"flex-1 space-y-6 p-4 md:p-6 max-w-full",children:e.jsx(a,{className:"bg-card border-border",children:e.jsx(r,{className:"p-8 text-center",children:e.jsx("p",{className:"text-destructive",children:g||"Rating configuration not found"})})})})}):e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsxs("div",{className:"flex-1 space-y-6 p-4 md:p-6 max-w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(f,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground font-sans",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{type:s.type}),e.jsx(o,{variant:s.is_active?"default":"secondary",className:s.is_active?"text-green-600 bg-green-100":"",children:s.is_active?"Active":"Inactive"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[l("edit rating configs")&&!s.is_active&&e.jsxs(d,{variant:"outline",size:"sm",onClick:y,children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),"Activate"]}),l("edit rating configs")&&e.jsx(d,{asChild:!0,className:"bg-primary text-primary-foreground hover:bg-primary/90",size:"sm",children:e.jsxs(h,{to:`/rating-configs/${s.id}/edit`,children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Edit"]})}),e.jsx(d,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(h,{to:"/rating-configs",className:"flex items-center",children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),"Back to Configurations"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.description&&e.jsxs(a,{className:"bg-card border-border",children:[e.jsx(i,{children:e.jsx(c,{className:"text-foreground",children:"Description"})}),e.jsx(r,{children:e.jsx("p",{className:"text-foreground",children:s.description})})]}),C()]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(a,{className:"bg-card border-border",children:[e.jsx(i,{children:e.jsxs(c,{className:"text-foreground flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"}),"Creator"]})}),e.jsx(r,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(R,{className:"w-10 h-10",children:[typeof s.creator.avatar_url=="string"&&s.creator.avatar_url.trim()!==""&&e.jsx(S,{src:s.creator.avatar_url,alt:s.creator.name||"User avatar",className:"object-cover"}),e.jsx(U,{className:"bg-primary text-primary-foreground",children:s.creator?.name?.charAt(0).toUpperCase()||"U"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:s.creator?.name||"Unknown User"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.creator?.email})]})]})})]}),e.jsxs(a,{className:"bg-card border-border",children:[e.jsx(i,{children:e.jsxs(c,{className:"text-foreground flex items-center gap-2",children:[e.jsx(x,{className:"w-4 h-4"}),"Timeline"]})}),e.jsxs(r,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(x,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Created:"}),e.jsx("span",{className:"text-foreground",children:new Date(s.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(x,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Updated:"}),e.jsx("span",{className:"text-foreground",children:new Date(s.updated_at).toLocaleDateString()})]})]})]}),e.jsxs(a,{className:"bg-card border-border",children:[e.jsx(i,{children:e.jsx(c,{className:"text-foreground",children:"Summary"})}),e.jsxs(r,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Type"}),e.jsx(j,{type:s.type})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Status"}),e.jsx(o,{variant:s.is_active?"default":"secondary",className:s.is_active?"text-green-600 bg-green-100":"",children:s.is_active?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Fields"}),e.jsx(o,{variant:"outline",children:s.config_data.fields.length})]})]})]})]})]})]}),e.jsx(B,{open:b,onOpenChange:m=>!m&&t(!1),children:e.jsxs(P,{className:"sm:max-w-[480px]",children:[e.jsxs(T,{children:[e.jsx(L,{children:"Activate configuration"}),e.jsx(z,{children:"Are you sure you want to activate this rating configuration? This may affect how ratings are calculated."})]}),e.jsxs(F,{children:[e.jsx(I,{onClick:()=>t(!1),children:"Cancel"}),e.jsx(O,{onClick:w,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:"Activate"})]})]})})]})};export{re as default};
