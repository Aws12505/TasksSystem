import{h as je,r as P,a as ge,b as ue,o as fe,j as e,F as Ne,c as Q,d as J,e as H,M as ee,f as K,N as se,O as ae,P as te,Q as re,g as W,I as le,B as x,L as pe,s as ne,aj as be,q as ve,n as D,S,m as R,U as G,p as ce}from"./index--vQxBrGw.js";import{C as c,a as h,b as j,d}from"./card-C8XzxF3O.js";import{T as we,a as ye,b as X,c as Z}from"./tabs-CF6I8q9p.js";import{B as o}from"./badge-BJLzQqS4.js";import{u as ke}from"./ratingsStore-CO8yz2sr.js";import{P as Ce}from"./progress-bEklLTk9.js";import{A as Se,a as Re}from"./avatar-DQT8ryvk.js";import{C as de}from"./calendar-8WbK20_G.js";import{T as xe}from"./trending-up-DC3NCWHf.js";import{C as _e}from"./code-Di_Y4HNo.js";import{R as Te,A as oe}from"./refresh-cw-TTHsiSAH.js";import{E as me}from"./eye-BlLcEmJv.js";import{C as Pe}from"./circle-alert-DT1KPTHs.js";import"./ratingConfigService-BpbGtUpj.js";import"./index-DDSjMhyr.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],O=je("calculator",Fe),Ae=()=>{const{taskRatings:a,stakeholderRatings:t,finalRatings:l,taskRatingConfigs:u,stakeholderRatingConfigs:p,finalRatingConfigs:n,availableTasks:i,availableProjects:L,availableUsers:g,taskRatingsPagination:f,stakeholderRatingsPagination:N,finalRatingsPagination:z,isLoading:_,error:$,fetchTaskRatings:U,fetchStakeholderRatings:b,fetchFinalRatings:v,fetchUserFinalRating:w,fetchTaskRatingConfigs:m,fetchStakeholderRatingConfigs:y,fetchFinalRatingConfigs:M,fetchAvailableTasks:F,fetchAvailableProjects:k,fetchAvailableUsers:C,createTaskRating:V,updateTaskRating:E,createStakeholderRating:B,updateStakeholderRating:I,calculateFinalRating:q}=ke();return P.useEffect(()=>{m(),y(),M(),F(),k(),C()},[m,y,M,F,k,C]),{taskRatings:a,stakeholderRatings:t,finalRatings:l,taskRatingConfigs:u,stakeholderRatingConfigs:p,finalRatingConfigs:n,availableTasks:i,availableProjects:L,availableUsers:g,taskRatingsPagination:f,stakeholderRatingsPagination:N,finalRatingsPagination:z,isLoading:_,error:$,fetchTaskRatings:U,fetchStakeholderRatings:b,fetchFinalRatings:v,fetchUserFinalRating:w,createTaskRating:V,updateTaskRating:E,createStakeholderRating:B,updateStakeholderRating:I,calculateFinalRating:q}},De=fe({user_id:be().min(1,"User is required"),period_start:ne().min(1,"Start date is required"),period_end:ne().min(1,"End date is required")}),Le=({availableUsers:a,onCalculate:t,isLoading:l})=>{const u=ge({resolver:ue(De),defaultValues:{user_id:0,period_start:"",period_end:""}}),p=async n=>{const i={period_start:n.period_start,period_end:n.period_end};await t(n.user_id,i)};return e.jsxs(c,{className:"bg-card border-border",children:[e.jsx(h,{children:e.jsxs(j,{className:"text-foreground flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5"}),"Calculate Final Rating"]})}),e.jsx(d,{children:e.jsx(Ne,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(p),className:"space-y-4",children:[e.jsx(Q,{control:u.control,name:"user_id",render:({field:n})=>e.jsxs(J,{children:[e.jsx(H,{className:"text-foreground",children:"User"}),e.jsxs(ee,{onValueChange:i=>n.onChange(Number(i)),value:n.value?.toString()||"",disabled:l,children:[e.jsx(K,{children:e.jsx(se,{className:"bg-background border-input text-foreground",children:e.jsx(ae,{placeholder:"Select user to calculate rating for"})})}),e.jsx(te,{children:a.map(i=>e.jsx(re,{value:i.id.toString(),children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:i.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:i.email})]})},i.id))})]}),e.jsx(W,{className:"text-destructive"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(Q,{control:u.control,name:"period_start",render:({field:n})=>e.jsxs(J,{children:[e.jsx(H,{className:"text-foreground",children:"Period Start"}),e.jsx(K,{children:e.jsx(le,{type:"date",...n,disabled:l,className:"bg-background border-input text-foreground"})}),e.jsx(W,{className:"text-destructive"})]})}),e.jsx(Q,{control:u.control,name:"period_end",render:({field:n})=>e.jsxs(J,{children:[e.jsx(H,{className:"text-foreground",children:"Period End"}),e.jsx(K,{children:e.jsx(le,{type:"date",...n,disabled:l,className:"bg-background border-input text-foreground"})}),e.jsx(W,{className:"text-destructive"})]})})]}),e.jsxs(x,{type:"submit",disabled:l,className:"w-full bg-primary text-primary-foreground hover:bg-primary/90",children:[l&&e.jsx(pe,{className:"mr-2 h-4 w-4 animate-spin"}),"Calculate Final Rating"]})]})})})]})},Ue=({finalRating:a})=>e.jsxs(c,{className:"bg-card border-border",children:[e.jsx(h,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(j,{className:"text-foreground flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5 text-purple-500"}),"Final Rating #",a.id]}),e.jsxs(o,{variant:"outline",className:"text-xl px-4 py-2 bg-purple-50 text-purple-700",children:[a.final_rating,"%"]})]})}),e.jsxs(d,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Se,{className:"w-10 h-10",children:e.jsx(Re,{className:"bg-primary text-primary-foreground",children:a.user?.name?.charAt(0).toUpperCase()||"U"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:a.user?.name||"Unknown User"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.user?.email})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-4 h-4"}),e.jsxs("span",{children:["From: ",new Date(a.period_start).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-4 h-4"}),e.jsxs("span",{children:["To: ",new Date(a.period_end).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-foreground",children:"Overall Performance"}),e.jsxs("span",{className:"text-xl font-bold text-foreground",children:[a.final_rating,"%"]})]}),e.jsx(Ce,{value:a.final_rating,className:"h-4"})]}),Object.keys(a.variables_used).length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-foreground mb-3 flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4"}),"Variables Used"]}),e.jsx("div",{className:"space-y-2",children:Object.entries(a.variables_used).map(([t,l])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-foreground",children:t}),e.jsx(o,{variant:"outline",children:l})]},t))})]}),a.calculation_steps.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-foreground mb-3 flex items-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4"}),"Calculation Steps"]}),e.jsx("div",{className:"space-y-2",children:a.calculation_steps.map((t,l)=>e.jsxs("div",{className:"p-3 bg-accent/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:["Step ",l+1,":"]}),e.jsx("span",{className:"ml-2 font-mono text-foreground",children:t.expression||t.function||t.variable||`${t.model}.${t.column}`})]}),e.jsx(o,{variant:"outline",children:t.result})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Type: ",t.type,t.operation&&` | Operation: ${t.operation}`]})]},l))})]}),e.jsx("div",{className:"pt-4 border-t border-border",children:e.jsx("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsxs("span",{children:["Calculated on ",new Date(a.calculated_at).toLocaleDateString()]})]})})})]})]}),Ge=()=>{const[a,t]=P.useState(""),[l,u]=P.useState(""),[p,n]=P.useState(""),[i,L]=P.useState({tasks:[],projects:[]}),{finalRatings:g,availableTasks:f,availableProjects:N,availableUsers:z,isLoading:_,calculateFinalRating:$}=Ae(),{hasPermission:U,hasAnyPermission:b}=ve(),v=b(["create task ratings","edit task ratings"]),w=b(["create stakeholder ratings","edit stakeholder ratings"]),m=U("view final ratings"),y=U("calculate final ratings");P.useEffect(()=>{const s=localStorage.getItem("ratings_recently_viewed");s&&L(JSON.parse(s))},[]);const M=async(s,r)=>{y&&await $(s,r)},F=(s,r,he)=>{const ie={id:r,name:he,viewedAt:new Date().toISOString()},T={...i};s==="task"?T.tasks=[ie,...T.tasks.filter(Y=>Y.id!==r)].slice(0,5):T.projects=[ie,...T.projects.filter(Y=>Y.id!==r)].slice(0,5),L(T),localStorage.setItem("ratings_recently_viewed",JSON.stringify(T))},k=(s,r)=>{v&&(F("task",s,r),window.open(`/ratings/tasks/${s}`,"_blank"))},C=(s,r)=>{w&&(F("project",s,r),window.open(`/ratings/projects/${s}/stakeholder`,"_blank"))},V=f.filter(s=>s.name.toLowerCase().includes(a.toLowerCase())||s.description?.toLowerCase().includes(a.toLowerCase())),E=N.filter(s=>s.name.toLowerCase().includes(a.toLowerCase())||s.description?.toLowerCase().includes(a.toLowerCase())),B=m?g.length:0,I=m&&g.length>0?g.reduce((s,r)=>s+r.final_rating,0)/g.length:0,q=m?g.filter(s=>new Date(s.calculated_at)>new Date(Date.now()-720*60*60*1e3)).length:0,A=({message:s})=>e.jsx(c,{className:"bg-card border-border",children:e.jsxs(d,{className:"p-6 text-center",children:[e.jsx(Pe,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:s})]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(D,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground font-sans",children:"Ratings Center"}),e.jsx("p",{className:"text-muted-foreground",children:"Performance evaluation and rating management system"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(x,{variant:"outline",disabled:_,children:[e.jsx(Te,{className:`w-4 h-4 mr-2 ${_?"animate-spin":""}`}),"Refresh"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[v?e.jsxs(c,{className:"bg-card border-border",children:[e.jsx(h,{children:e.jsxs(j,{className:"text-foreground flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5"}),"Task Ratings"]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Select Task"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ee,{value:l,onValueChange:u,children:[e.jsx(se,{className:"flex-1",children:e.jsx(ae,{placeholder:"Choose a task..."})}),e.jsx(te,{className:"max-h-60",children:V.map(s=>e.jsx(re,{value:s.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4 text-primary"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{variant:"outline",className:"text-xs",children:s.status}),e.jsxs(o,{variant:"secondary",className:"text-xs",children:["Weight: ",s.weight]})]})]})]})},s.id))})]}),e.jsxs(x,{disabled:!l,onClick:()=>{const s=f.find(r=>r.id.toString()===l);s&&k(s.id,s.name)},className:"bg-primary text-primary-foreground hover:bg-primary/90",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Rate"]})]})]}),i.tasks.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Recently Rated"}),e.jsx("div",{className:"space-y-2",children:i.tasks.map(s=>e.jsxs(x,{variant:"outline",size:"sm",className:"w-full justify-between text-left",onClick:()=>k(s.id,s.name),children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4"}),s.name]}),e.jsx(oe,{className:"w-4 h-4"})]},s.id))})]})]})]}):e.jsx(A,{message:"You don't have permission to create or edit task ratings"}),w?e.jsxs(c,{className:"bg-card border-border",children:[e.jsx(h,{children:e.jsxs(j,{className:"text-foreground flex items-center gap-2",children:[e.jsx(R,{className:"w-5 h-5"}),"Stakeholder Ratings"]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Select Project"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ee,{value:p,onValueChange:n,children:[e.jsx(se,{className:"flex-1",children:e.jsx(ae,{placeholder:"Choose a project..."})}),e.jsx(te,{className:"max-h-60",children:E.filter(s=>s.stakeholder_will_rate).map(s=>e.jsx(re,{value:s.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-4 h-4 text-primary"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{variant:"outline",className:"text-xs",children:s.status}),e.jsxs(o,{variant:"secondary",className:"text-xs",children:[s.progress_percentage,"% complete"]})]})]})]})},s.id))})]}),e.jsxs(x,{disabled:!p,onClick:()=>{const s=N.find(r=>r.id.toString()===p);s&&C(s.id,s.name)},className:"bg-primary text-primary-foreground hover:bg-primary/90",children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Rate"]})]})]}),i.projects.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Recently Rated"}),e.jsx("div",{className:"space-y-2",children:i.projects.map(s=>e.jsxs(x,{variant:"outline",size:"sm",className:"w-full justify-between text-left",onClick:()=>C(s.id,s.name),children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-4 h-4"}),s.name]}),e.jsx(oe,{className:"w-4 h-4"})]},s.id))})]})]})]}):e.jsx(A,{message:"You don't have permission to create or edit stakeholder ratings"}),b(["create task ratings","edit task ratings","create stakeholder ratings","edit stakeholder ratings"])?e.jsxs(c,{className:"bg-card border-border",children:[e.jsx(h,{children:e.jsxs(j,{className:"text-foreground flex items-center gap-2",children:[e.jsx(ce,{className:"w-5 h-5"}),"Quick Search"]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(le,{placeholder:"Search tasks or projects...",value:a,onChange:s=>t(s.target.value),className:"pl-10"})]}),a&&e.jsxs("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:[v&&e.jsxs("div",{children:[e.jsx("h6",{className:"text-xs font-medium text-muted-foreground mb-2",children:"TASKS"}),V.slice(0,3).map(s=>e.jsxs(x,{variant:"outline",size:"sm",className:"w-full justify-between text-left mb-2",onClick:()=>k(s.id,s.name),children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-xs",children:s.name}),e.jsx(o,{variant:"secondary",className:"text-xs",children:"Task"})]})]}),e.jsx(D,{className:"w-4 h-4"})]},`task-${s.id}`))]}),w&&e.jsxs("div",{children:[e.jsx("h6",{className:"text-xs font-medium text-muted-foreground mb-2",children:"PROJECTS"}),E.filter(s=>s.stakeholder_will_rate).slice(0,3).map(s=>e.jsxs(x,{variant:"outline",size:"sm",className:"w-full justify-between text-left mb-2",onClick:()=>C(s.id,s.name),children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-4 h-4 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-xs",children:s.name}),e.jsx(o,{variant:"secondary",className:"text-xs",children:"Project"})]})]}),e.jsx(G,{className:"w-4 h-4"})]},`project-${s.id}`))]})]})]})]}):e.jsx(A,{message:"You don't have permission to rate tasks or stakeholders"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[e.jsxs(c,{className:"bg-card border-border",children:[e.jsxs(h,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(j,{className:"text-sm font-medium text-muted-foreground",children:"Total Final Ratings"}),e.jsx(D,{className:"w-4 h-4 text-chart-1"})]}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:m?B:"—"})})]}),e.jsxs(c,{className:"bg-card border-border",children:[e.jsxs(h,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(j,{className:"text-sm font-medium text-muted-foreground",children:"Average Rating"}),e.jsx(xe,{className:"w-4 h-4 text-chart-2"})]}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:m?`${Math.round(I)}%`:"—"})})]}),e.jsxs(c,{className:"bg-card border-border",children:[e.jsxs(h,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(j,{className:"text-sm font-medium text-muted-foreground",children:"Available Tasks"}),e.jsx(S,{className:"w-4 h-4 text-chart-3"})]}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:v?f.length:"—"})})]}),e.jsxs(c,{className:"bg-card border-border",children:[e.jsxs(h,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(j,{className:"text-sm font-medium text-muted-foreground",children:"Available Projects"}),e.jsx(R,{className:"w-4 h-4 text-chart-4"})]}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:w?N.filter(s=>s.stakeholder_will_rate).length:"—"})})]}),e.jsxs(c,{className:"bg-card border-border",children:[e.jsxs(h,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(j,{className:"text-sm font-medium text-muted-foreground",children:"This Month"}),e.jsx(O,{className:"w-4 h-4 text-chart-5"})]}),e.jsx(d,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:m?q:"—"})})]})]}),e.jsxs(we,{defaultValue:y?"calculate":m?"history":"browse",className:"space-y-4",children:[e.jsxs(ye,{className:"bg-muted",children:[y&&e.jsx(X,{value:"calculate",children:"Calculate Final Rating"}),m&&e.jsxs(X,{value:"history",children:["Rating History (",g.length,")"]}),b(["create task ratings","edit task ratings","create stakeholder ratings","edit stakeholder ratings"])&&e.jsx(X,{value:"browse",children:"Browse Ratings"})]}),y&&e.jsx(Z,{value:"calculate",children:e.jsx("div",{className:"max-w-2xl",children:e.jsx(Le,{availableUsers:z,onCalculate:M,isLoading:_})})}),m&&e.jsx(Z,{value:"history",children:e.jsx("div",{className:"space-y-6",children:_?e.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((s,r)=>e.jsx("div",{className:"h-32 bg-muted animate-pulse rounded-lg"},r))}):g.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"No final ratings calculated yet"})}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:g.map(s=>e.jsx(Ue,{finalRating:s},s.id))})})}),b(["create task ratings","edit task ratings","create stakeholder ratings","edit stakeholder ratings"])&&e.jsx(Z,{value:"browse",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[v?e.jsxs(c,{className:"bg-card border-border",children:[e.jsx(h,{children:e.jsxs(j,{className:"text-foreground flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5"}),"Browse Tasks"]})}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-4",children:[f.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(S,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(o,{variant:"outline",className:"text-xs",children:s.status}),e.jsxs(o,{variant:"secondary",className:"text-xs",children:["Due: ",new Date(s.due_date).toLocaleDateString()]})]})]})]}),e.jsxs(x,{size:"sm",onClick:()=>k(s.id,s.name),children:[e.jsx(D,{className:"w-4 h-4 mr-1"}),"Rate"]})]},s.id)),f.length>5&&e.jsx("div",{className:"text-center pt-4",children:e.jsxs(x,{variant:"outline",size:"sm",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"View All Tasks (",f.length,")"]})})]})})]}):e.jsx(A,{message:"You don't have permission to rate tasks"}),w?e.jsxs(c,{className:"bg-card border-border",children:[e.jsx(h,{children:e.jsxs(j,{className:"text-foreground flex items-center gap-2",children:[e.jsx(R,{className:"w-5 h-5"}),"Browse Projects"]})}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-4",children:[N.filter(s=>s.stakeholder_will_rate).slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(R,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(o,{variant:"outline",className:"text-xs",children:s.status}),e.jsxs(o,{variant:"secondary",className:"text-xs",children:[s.progress_percentage,"% complete"]})]})]})]}),e.jsxs(x,{size:"sm",onClick:()=>C(s.id,s.name),children:[e.jsx(G,{className:"w-4 h-4 mr-1"}),"Rate"]})]},s.id)),N.filter(s=>s.stakeholder_will_rate).length>5&&e.jsx("div",{className:"text-center pt-4",children:e.jsxs(x,{variant:"outline",size:"sm",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"View All Projects (",N.filter(s=>s.stakeholder_will_rate).length,")"]})})]})})]}):e.jsx(A,{message:"You don't have permission to rate stakeholders"})]})})]})]})};export{Ge as default};
