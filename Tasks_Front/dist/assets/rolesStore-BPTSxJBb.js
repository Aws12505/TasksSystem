import{r as l,p as t}from"./permissionService-BiQt4wXC.js";import{k as c,t as o}from"./index-BOfNqdHU.js";const d=c((r,n)=>({roles:[],currentRole:null,availablePermissions:[],pagination:null,isLoading:!1,error:null,fetchRoles:async(a=1)=>{r({isLoading:!0,error:null});try{const e=await l.getRoles(a);e.success?r({roles:e.data,pagination:e.pagination||{current_page:1,total:e.data.length,per_page:15,last_page:1,from:e.data.length>0?1:null,to:e.data.length},isLoading:!1}):(r({error:e.message,isLoading:!1}),o.error(e.message))}catch(e){const s=e.message||"Failed to fetch roles";r({error:s,isLoading:!1}),o.error(s)}},fetchRole:async a=>{r({isLoading:!0,error:null});try{const e=await l.getRole(a);e.success?r({currentRole:e.data,isLoading:!1}):(r({error:e.message,isLoading:!1}),o.error(e.message))}catch(e){const s=e.message||"Failed to fetch role";r({error:s,isLoading:!1}),o.error(s)}},fetchAvailablePermissions:async()=>{try{const a=await t.getPermissions();a.success&&r({availablePermissions:a.data})}catch(a){console.error("Failed to fetch permissions:",a)}},createRole:async a=>{r({isLoading:!0,error:null});try{const e=await l.createRole(a);return e.success?(r({isLoading:!1}),o.success("Role created successfully"),n().fetchRoles(),e.data):(r({error:e.message,isLoading:!1}),o.error(e.message),null)}catch(e){const s=e.message||"Failed to create role";return r({error:s,isLoading:!1}),o.error(s),null}},updateRole:async(a,e)=>{r({isLoading:!0,error:null});try{const s=await l.updateRole(a,e);return s.success?(r({currentRole:s.data,isLoading:!1}),o.success("Role updated successfully"),n().fetchRoles(),s.data):(r({error:s.message,isLoading:!1}),o.error(s.message),null)}catch(s){const i=s.message||"Failed to update role";return r({error:i,isLoading:!1}),o.error(i),null}},deleteRole:async a=>{r({isLoading:!0,error:null});try{const e=await l.deleteRole(a);return e.success?(r({isLoading:!1}),o.success("Role deleted successfully"),n().fetchRoles(),!0):(r({error:e.message,isLoading:!1}),o.error(e.message),!1)}catch(e){const s=e.message||"Failed to delete role";return r({error:s,isLoading:!1}),o.error(s),!1}},clearCurrentRole:()=>r({currentRole:null,error:null})}));export{d as u};
