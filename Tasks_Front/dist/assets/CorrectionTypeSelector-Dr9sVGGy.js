import{g as k,D as N,j as e,L as E,A as M,p as F,q as H,B as l,a2 as R,ax as _,az as v,aA as y,aB as C,b6 as D,b7 as I,b8 as w}from"./index-Y4t2xSJ4.js";import{T as W,a as $,b as p,c as a,d as P,e as c}from"./table-D3vsoA0b.js";import{B as U}from"./badge-8i_sBa4H.js";import{d as q,e as V,g,c as m,f as j,C as G}from"./clockingCalculations-DW6o_X9M.js";import{C as J}from"./circle-alert-BgPD_ERP.js";import{C as K}from"./chevron-left-nlq4slCJ.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],se=k("download",O);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],X=k("settings-2",Q),te=({records:x,companyTimezone:t,pagination:s,showUser:n=!1,onPageChange:d,isLoading:b=!1,onCorrectionClick:S})=>{const[B,u]=N.useState(!1),[o,T]=N.useState(null);return!x.length&&!b?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"No records found"})}):b?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(E,{className:"w-8 h-8 animate-spin text-muted-foreground"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-lg border border-border overflow-hidden bg-card",children:e.jsxs(W,{children:[e.jsx($,{children:e.jsxs(p,{className:"bg-accent",children:[n&&e.jsx(a,{className:"text-foreground",children:"Employee"}),e.jsx(a,{className:"text-foreground",children:"Date"}),e.jsx(a,{className:"text-foreground",children:"Clock In"}),e.jsx(a,{className:"text-foreground",children:"Clock Out"}),e.jsx(a,{className:"text-foreground",children:"Work Time"}),e.jsx(a,{className:"text-foreground",children:"Break Time"}),e.jsx(a,{className:"text-foreground",children:"Breaks"}),e.jsx(a,{className:"text-foreground",children:"Status"}),e.jsx(a,{className:"text-foreground",children:"Action"})]})}),e.jsx(P,{children:x.map(r=>{const h=q(r.clock_in_utc,r.clock_out_utc,r.break_records),f=V(r.break_records);return e.jsxs(p,{className:"border-border hover:bg-accent/50 cursor-pointer",onClick:()=>{T(r),u(!0)},children:[n&&e.jsx(c,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{className:"h-8 w-8",children:[e.jsx(F,{src:r.user.avatar_url||void 0}),e.jsx(H,{className:"bg-primary text-primary-foreground",children:r.user.name.split(" ").map(i=>i[0]).join("").toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:r.user.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:r.user.email})]})]})}),e.jsx(c,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-foreground",children:g({sessionDate:r.session_date,companyTimezone:t,utcFallback:r.clock_in_utc,locale:"en-US"})}),r.crosses_midnight&&e.jsx(J,{className:"w-4 h-4 text-chart-2"})]})}),e.jsx(c,{className:"text-foreground",children:m(r.clock_in_utc,t).split(", ")[1]}),e.jsx(c,{className:"text-foreground",children:r.clock_out_utc?m(r.clock_out_utc,t).split(", ")[1]:"—"}),e.jsx(c,{children:e.jsx("span",{className:"font-bold text-chart-3 font-mono tabular-nums",children:j(h)})}),e.jsx(c,{children:e.jsx("span",{className:"font-bold text-chart-2 font-mono tabular-nums",children:j(f)})}),e.jsx(c,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-foreground",children:r.break_records?.length||0})]})}),e.jsx(c,{children:e.jsx(U,{variant:r.status==="completed"?"secondary":r.status==="active"?"default":"outline",children:r.status==="completed"?"Completed":r.status==="active"?"Active":"On Break"})}),e.jsx(c,{onClick:i=>i.stopPropagation(),children:e.jsxs(l,{size:"sm",variant:"outline",className:"border-input text-xs",onClick:()=>S?.(r),children:[e.jsx(X,{className:"w-4 h-4 mr-1"}),"Correct"]})})]},r.id)})})]})}),s&&s.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",s.from||0," to ",s.to||0," of ",s.total," records"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>d?.(s.current_page-1),disabled:s.current_page===1,className:"border-input",children:[e.jsx(K,{className:"w-4 h-4"}),"Previous"]}),e.jsxs("span",{className:"text-sm px-4 text-foreground",children:["Page ",s.current_page," of ",s.last_page]}),e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>d?.(s.current_page+1),disabled:s.current_page===s.last_page,className:"border-input",children:["Next",e.jsx(R,{className:"w-4 h-4"})]})]})]}),e.jsx(_,{open:B,onOpenChange:u,children:e.jsxs(v,{className:"bg-card border-border text-foreground max-w-lg",children:[e.jsxs(y,{children:[e.jsx(C,{children:"Session Details"}),e.jsx(D,{className:"text-muted-foreground",children:o?`Date: ${g({sessionDate:o.session_date,companyTimezone:t,utcFallback:o.clock_in_utc,locale:"en-US"})} • ${o.crosses_midnight?"Crossed midnight":"Same day"}`:""})]}),o?.break_records?.length?e.jsx("div",{className:"space-y-4",children:o.break_records.map((r,h)=>{const f=m(r.break_start_utc,t).split(", ")[1],i=r.break_end_utc?m(r.break_end_utc,t).split(", ")[1]:null,A=r.break_end_utc?Math.max(0,Math.floor((new Date(r.break_end_utc).getTime()-new Date(r.break_start_utc).getTime())/1e3)):0;return e.jsxs("div",{className:"rounded-md border border-border p-4 bg-accent",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm font-medium",children:["Break ",h+1," ",r.status==="active"?e.jsx("span",{className:"ml-2 inline-block rounded bg-chart-2 px-2 py-0.5 text-xs text-white",children:"Active"}):null]}),r.status==="completed"?e.jsx("div",{className:"text-sm font-mono tabular-nums text-foreground",children:j(A)}):null]}),e.jsx(I,{className:"my-3 bg-border"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-foreground",children:"Start:"})," ",f]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-foreground",children:"End:"})," ",i??"—"]}),r.description?e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-foreground",children:"Notes:"})," ",r.description]}):null]})]},r.id)})}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"No breaks recorded for this session."}),e.jsx(w,{className:"mt-4",children:e.jsx(l,{variant:"outline",className:"border-input",onClick:()=>u(!1),children:"Close"})})]})})]})},ae=({open:x,onOpenChange:t,session:s,onSelect:n,isLoading:d})=>s?e.jsx(_,{open:x,onOpenChange:t,children:e.jsxs(v,{className:"bg-card border-border",children:[e.jsxs(y,{children:[e.jsx(C,{className:"text-foreground",children:"What do you want to correct?"}),e.jsx(D,{className:"text-muted-foreground",children:"Select the type of correction needed for this record"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 py-4",children:[e.jsxs(l,{onClick:()=>{n("clock_in"),t(!1)},disabled:d,variant:"outline",className:"h-20 flex flex-col items-center justify-center border-input hover:bg-accent",children:[e.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Clock In"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Edit start time"})]}),e.jsxs(l,{onClick:()=>{n("clock_out"),t(!1)},disabled:!s.clock_out_utc||d,variant:"outline",className:"h-20 flex flex-col items-center justify-center border-input hover:bg-accent",children:[e.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Clock Out"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Edit end time"})]}),s.break_records&&s.break_records.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(l,{onClick:()=>{n("break_in",s.break_records[0]?.id),t(!1)},disabled:d,variant:"outline",className:"h-20 flex flex-col items-center justify-center border-input hover:bg-accent",children:[e.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Break Start"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Edit break in"})]}),e.jsxs(l,{onClick:()=>{n("break_out",s.break_records[0]?.id),t(!1)},disabled:!s.break_records[0]?.break_end_utc||d,variant:"outline",className:"h-20 flex flex-col items-center justify-center border-input hover:bg-accent",children:[e.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Break End"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Edit break out"})]})]})]}),e.jsx(w,{children:e.jsx(l,{variant:"outline",onClick:()=>t(!1),disabled:d,className:"border-input",children:"Cancel"})})]})}):null;export{ae as C,se as D,te as R};
