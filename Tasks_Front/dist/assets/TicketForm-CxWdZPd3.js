import{j as e,a as S,b as C,o as _,F as k,c as d,d as o,e as x,f as u,I as T,g as m,R as V,M as j,N as g,O as p,P as b,Q as t,B as w,L as F,al as q,ak as f,s as y}from"./index-BoroKU0h.js";const D=_({title:y().min(1,"Title is required").max(255),description:y().min(1,"Description is required"),type:f(["quick_fix","bug_investigation","user_support"]),priority:f(["low","medium","high","critical"]),assigned_to:q().optional()}),I=_({title:y().min(1,"Title is required").max(255),description:y().min(1,"Description is required"),type:f(["quick_fix","bug_investigation","user_support"]),priority:f(["low","medium","high","critical"]),status:f(["open","in_progress","resolved"]).optional(),assigned_to:q().optional()}),E=({availableUsers:c,typeOptions:v,onSubmit:N,isLoading:n,isAuthenticated:a})=>{const i=S({resolver:C(D),defaultValues:{title:"",description:"",type:"quick_fix",priority:"medium",assigned_to:void 0}}),h=async r=>{const s={title:r.title,description:r.description,type:r.type,priority:r.priority,assigned_to:r.assigned_to};await N(s)};return e.jsx(k,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(h),className:"space-y-6",children:[e.jsx(d,{control:i.control,name:"title",render:({field:r})=>e.jsxs(o,{children:[e.jsx(x,{className:"text-foreground",children:"Title"}),e.jsx(u,{children:e.jsx(T,{placeholder:"Enter ticket title",...r,disabled:n,className:"bg-background border-input text-foreground"})}),e.jsx(m,{className:"text-destructive"})]})}),e.jsx(d,{control:i.control,name:"description",render:({field:r})=>e.jsxs(o,{children:[e.jsx(x,{className:"text-foreground",children:"Description"}),e.jsx(u,{children:e.jsx(V,{placeholder:"Describe the issue or request...",...r,disabled:n,className:"bg-background border-input text-foreground",rows:4})}),e.jsx(m,{className:"text-destructive"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(d,{control:i.control,name:"type",render:({field:r})=>e.jsxs(o,{children:[e.jsx(x,{className:"text-foreground",children:"Type"}),e.jsxs(j,{onValueChange:r.onChange,defaultValue:r.value,disabled:n,children:[e.jsx(u,{children:e.jsx(g,{className:"bg-background border-input text-foreground",children:e.jsx(p,{placeholder:"Select ticket type"})})}),e.jsx(b,{children:v.map(s=>e.jsx(t,{value:s.value,children:e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"font-medium",children:s.label})})},s.value))})]}),e.jsx(m,{className:"text-destructive"})]})}),e.jsx(d,{control:i.control,name:"priority",render:({field:r})=>e.jsxs(o,{children:[e.jsx(x,{className:"text-foreground",children:"Priority"}),e.jsxs(j,{onValueChange:r.onChange,defaultValue:r.value,disabled:n,children:[e.jsx(u,{children:e.jsx(g,{className:"bg-background border-input text-foreground",children:e.jsx(p,{placeholder:"Select priority"})})}),e.jsxs(b,{children:[e.jsx(t,{value:"low",children:"Low"}),e.jsx(t,{value:"medium",children:"Medium"}),e.jsx(t,{value:"high",children:"High"}),e.jsx(t,{value:"critical",children:"Critical"})]})]}),e.jsx(m,{className:"text-destructive"})]})})]}),a&&e.jsx(d,{control:i.control,name:"assigned_to",render:({field:r})=>e.jsxs(o,{children:[e.jsxs(x,{className:"text-foreground",children:["Assign to ",e.jsx("span",{className:"text-xs text-muted-foreground",children:"(optional)"})]}),e.jsxs(j,{onValueChange:s=>r.onChange(s==="unassigned"?void 0:Number(s)),value:r.value===void 0?"unassigned":r.value.toString(),disabled:n,children:[e.jsx(u,{children:e.jsx(g,{className:"bg-background border-input text-foreground",children:e.jsx(p,{placeholder:"Leave unassigned or select a user"})})}),e.jsxs(b,{children:[e.jsx(t,{value:"unassigned",children:"Leave unassigned"}),c.map(s=>e.jsx(t,{value:s.id.toString(),children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.email})]})},s.id))]})]}),e.jsx(m,{className:"text-destructive"})]})}),e.jsxs(w,{type:"submit",disabled:n,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:[n&&e.jsx(F,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Ticket"]})]})})},M=({ticket:c,availableUsers:v,typeOptions:N,onSubmit:n,isLoading:a,isAuthenticated:i})=>{const h=S({resolver:C(I),defaultValues:{title:c.title,description:c.description,type:c.type,priority:c.priority,status:c.status,assigned_to:c.assigned_to||void 0}}),r=async s=>{const l={title:s.title,description:s.description,type:s.type,priority:s.priority,status:s.status,assigned_to:s.assigned_to};await n(l)};return e.jsx(k,{...h,children:e.jsxs("form",{onSubmit:h.handleSubmit(r),className:"space-y-6",children:[e.jsx(d,{control:h.control,name:"title",render:({field:s})=>e.jsxs(o,{children:[e.jsx(x,{className:"text-foreground",children:"Title"}),e.jsx(u,{children:e.jsx(T,{placeholder:"Enter ticket title",...s,disabled:a,className:"bg-background border-input text-foreground"})}),e.jsx(m,{className:"text-destructive"})]})}),e.jsx(d,{control:h.control,name:"description",render:({field:s})=>e.jsxs(o,{children:[e.jsx(x,{className:"text-foreground",children:"Description"}),e.jsx(u,{children:e.jsx(V,{placeholder:"Describe the issue or request...",...s,disabled:a,className:"bg-background border-input text-foreground",rows:4})}),e.jsx(m,{className:"text-destructive"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(d,{control:h.control,name:"type",render:({field:s})=>e.jsxs(o,{children:[e.jsx(x,{className:"text-foreground",children:"Type"}),e.jsxs(j,{onValueChange:s.onChange,defaultValue:s.value,disabled:a,children:[e.jsx(u,{children:e.jsx(g,{className:"bg-background border-input text-foreground",children:e.jsx(p,{placeholder:"Select ticket type"})})}),e.jsx(b,{children:N.map(l=>e.jsx(t,{value:l.value,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:l.label}),e.jsx("span",{className:"text-xs text-muted-foreground",children:l.estimatedTime})]})},l.value))})]}),e.jsx(m,{className:"text-destructive"})]})}),e.jsx(d,{control:h.control,name:"priority",render:({field:s})=>e.jsxs(o,{children:[e.jsx(x,{className:"text-foreground",children:"Priority"}),e.jsxs(j,{onValueChange:s.onChange,defaultValue:s.value,disabled:a,children:[e.jsx(u,{children:e.jsx(g,{className:"bg-background border-input text-foreground",children:e.jsx(p,{placeholder:"Select priority"})})}),e.jsxs(b,{children:[e.jsx(t,{value:"low",children:"Low"}),e.jsx(t,{value:"medium",children:"Medium"}),e.jsx(t,{value:"high",children:"High"}),e.jsx(t,{value:"critical",children:"Critical"})]})]}),e.jsx(m,{className:"text-destructive"})]})}),e.jsx(d,{control:h.control,name:"status",render:({field:s})=>e.jsxs(o,{children:[e.jsx(x,{className:"text-foreground",children:"Status"}),e.jsxs(j,{onValueChange:s.onChange,defaultValue:s.value,disabled:a,children:[e.jsx(u,{children:e.jsx(g,{className:"bg-background border-input text-foreground",children:e.jsx(p,{placeholder:"Select status"})})}),e.jsxs(b,{children:[e.jsx(t,{value:"open",children:"Open"}),e.jsx(t,{value:"in_progress",children:"In Progress"}),e.jsx(t,{value:"resolved",children:"Resolved"})]})]}),e.jsx(m,{className:"text-destructive"})]})})]}),i&&e.jsx(d,{control:h.control,name:"assigned_to",render:({field:s})=>e.jsxs(o,{children:[e.jsxs(x,{className:"text-foreground",children:["Assign to ",e.jsx("span",{className:"text-xs text-muted-foreground",children:"(optional)"})]}),e.jsxs(j,{onValueChange:l=>s.onChange(l==="unassigned"?void 0:Number(l)),value:s.value===void 0?"unassigned":s.value.toString(),disabled:a,children:[e.jsx(u,{children:e.jsx(g,{className:"bg-background border-input text-foreground",children:e.jsx(p,{placeholder:"Leave unassigned or select a user"})})}),e.jsxs(b,{children:[e.jsx(t,{value:"unassigned",children:"Leave unassigned"}),v.map(l=>e.jsx(t,{value:l.id.toString(),children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:l.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:l.email})]})},l.id))]})]}),e.jsx(m,{className:"text-destructive"})]})}),e.jsxs(w,{type:"submit",disabled:a,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:[a&&e.jsx(F,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Ticket"]})]})})},R=({ticket:c,availableUsers:v=[],typeOptions:N,onSubmit:n,isLoading:a,isAuthenticated:i})=>c?e.jsx(M,{ticket:c,availableUsers:v,typeOptions:N,onSubmit:n,isLoading:a,isAuthenticated:i}):e.jsx(E,{availableUsers:v,typeOptions:N,onSubmit:n,isLoading:a,isAuthenticated:i});export{R as T};
