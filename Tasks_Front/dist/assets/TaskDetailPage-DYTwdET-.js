import{h as le,k as ce,t as d,ai as oe,r as C,j as e,U as de,B as p,M as Y,N as Z,O as G,P as J,Q as F,I as z,aj as me,a as ue,b as xe,o as K,F as ge,c as T,d as L,e as A,f as U,g as E,R as he,L as pe,a2 as je,ak as W,s as _,al as fe,D as be,v as Ne,w as ve,x as H,z as ke,q as ye,y as V,S as Q,n as Se}from"./index-Zu_vECNa.js";import{C as D,a as R,b as O,d as M}from"./card-BEr3QNnL.js";import{B as P}from"./badge-DxFSLxNv.js";import{s as w,u as we}from"./subtaskService-HonjCIT3.js";import{a as ee,T as Ce}from"./TaskPriorityBadge-BlTHSliD.js";import{A as _e,a as Pe}from"./avatar-DLajZ5eL.js";import{P as se}from"./plus-BVAq3NVV.js";import{C as ae}from"./checkbox-qw0FV4Ou.js";import{P as Te,a as Le,b as I,c as Ae,d as Ue,e as Fe,f as De}from"./pagination-BuOP3ZWf.js";import{L as Me}from"./list-CSbr7xle.js";import{C as te}from"./calendar-CxcshZSH.js";import{E as Be}from"./ellipsis-BlRS9ixv.js";import{S as re}from"./square-pen-nXKqUES0.js";import{T as Ee}from"./trash-2-CfGhK2lt.js";import{A as ze}from"./arrow-left-WdRhSVc9.js";import"./index-C8ilSr3e.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]],$e=le("weight",qe),Ve=ce((a,i)=>({subtasks:[],currentSubtask:null,pagination:null,taskPagination:{},currentTaskId:null,isLoading:!1,error:null,fetchSubtasksByTask:async(r,t=1)=>{a({isLoading:!0,error:null,currentTaskId:r});try{const s=await w.getSubtasksByTask(r,t);s.success?a(o=>({subtasks:s.data,taskPagination:{...o.taskPagination,[r]:s.pagination||{current_page:1,total:s.data.length,per_page:15,last_page:1,from:s.data.length>0?1:null,to:s.data.length}},pagination:s.pagination||{current_page:1,total:s.data.length,per_page:15,last_page:1,from:s.data.length>0?1:null,to:s.data.length},isLoading:!1})):(a({error:s.message,isLoading:!1}),d.error(s.message))}catch(s){const o=s.message||"Failed to fetch subtasks";a({error:o,isLoading:!1}),d.error(o)}},fetchSubtask:async r=>{a({isLoading:!0,error:null});try{const t=await w.getSubtask(r);t.success?a({currentSubtask:t.data,isLoading:!1}):(a({error:t.message,isLoading:!1}),d.error(t.message))}catch(t){const s=t.message||"Failed to fetch subtask";a({error:s,isLoading:!1}),d.error(s)}},createSubtask:async r=>{a({isLoading:!0,error:null});try{const t=await w.createSubtask(r);return t.success?(a({isLoading:!1}),d.success("Subtask created successfully"),i().fetchSubtasksByTask(r.task_id),t.data):(a({error:t.message,isLoading:!1}),d.error(t.message),null)}catch(t){const s=t.message||"Failed to create subtask";return a({error:s,isLoading:!1}),d.error(s),null}},updateSubtask:async(r,t)=>{a({isLoading:!0,error:null});try{const s=await w.updateSubtask(r,t);return s.success?(a({currentSubtask:s.data,isLoading:!1}),d.success("Subtask updated successfully"),t.task_id&&i().fetchSubtasksByTask(t.task_id),s.data):(a({error:s.message,isLoading:!1}),d.error(s.message),null)}catch(s){const o=s.message||"Failed to update subtask";return a({error:o,isLoading:!1}),d.error(o),null}},updateTaskStatus:async(r,t)=>{try{const s=await oe.updateTaskStatus(r,t);return s.success?(d.success("Task status updated"),s.data):(d.error(s.message),null)}catch(s){return d.error(s.message||"Failed to update task status"),null}},deleteSubtask:async r=>{a({isLoading:!0,error:null});try{const t=await w.deleteSubtask(r);return t.success?(a({isLoading:!1}),d.success("Subtask deleted successfully"),!0):(a({error:t.message,isLoading:!1}),d.error(t.message),!1)}catch(t){const s=t.message||"Failed to delete subtask";return a({error:s,isLoading:!1}),d.error(s),!1}},toggleSubtaskCompletion:async r=>{try{const t=await w.toggleSubtaskCompletion(r);return t.success?(d.success("Subtask completion toggled"),a(s=>({subtasks:s.subtasks.map(o=>o.id===r?t.data:o)})),t.data):(d.error(t.message),null)}catch(t){return d.error(t.message||"Failed to toggle subtask completion"),null}},clearCurrentSubtask:()=>a({currentSubtask:null,error:null})})),ne=a=>{const{subtasks:i,pagination:r,taskPagination:t,currentTaskId:s,isLoading:o,error:x,fetchSubtasksByTask:g,createSubtask:l,updateSubtask:j,updateTaskStatus:u,deleteSubtask:k,toggleSubtaskCompletion:h}=Ve();C.useEffect(()=>{a&&s!==a&&g(a,1)},[a,s,g]);const m=a?t[a]||null:r,f=S=>{a&&g(a,S)};return{subtasks:i,pagination:m,isLoading:o,error:x,fetchSubtasks:S=>g(S),createSubtask:l,updateSubtask:j,updateTaskStatus:u,deleteSubtask:k,toggleCompletion:h,goToPage:f,nextPage:()=>{m&&m.current_page<m.last_page&&f(m.current_page+1)},prevPage:()=>{m&&m.current_page>1&&f(m.current_page-1)}}},Ie=({taskWithAssignments:a,availableUsers:i,onAddUser:r,onUpdateAssignment:t,onRemoveUser:s,isLoading:o=!1})=>{const[x,g]=C.useState(!1),[l,j]=C.useState(""),[u,k]=C.useState(10);if(!a)return null;const h=a.assigned_users||[],m=h.map(c=>c.id),f=i.filter(c=>!m.includes(c.id)),v=a.total_assigned_percentage||0,y=100-v,S=async()=>{if(!l||u<=0)return;await r(Number(l),u)&&(j(""),k(10),g(!1))},q=async(c,b)=>{b<=0||b>100||await t(c,b)};return e.jsxs(D,{className:"bg-card border-border",children:[e.jsxs(R,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(O,{className:"text-foreground flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5"}),"Task Assignments (",h.length,")"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(P,{variant:"outline",className:"text-xs",children:[v,"% assigned"]}),f.length>0&&e.jsxs(p,{size:"sm",onClick:()=>g(!0),className:"bg-primary text-primary-foreground hover:bg-primary/90",disabled:y<=0,children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),"Assign User"]})]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(v,100)}%`}})})]}),e.jsxs(M,{className:"space-y-4",children:[x&&e.jsxs("div",{className:"p-4 border border-border rounded-lg bg-accent/20",children:[e.jsx("h4",{className:"text-sm font-medium text-foreground mb-3",children:"Assign User to Task"}),e.jsxs("div",{className:"flex items-end gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Select User"}),e.jsxs(Y,{value:l,onValueChange:j,children:[e.jsx(Z,{className:"bg-background border-input",children:e.jsx(G,{placeholder:"Choose a user"})}),e.jsx(J,{children:f.map(c=>e.jsx(F,{value:c.id.toString(),children:c.name},c.id))})]})]}),e.jsxs("div",{className:"w-24",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Percentage"}),e.jsx(z,{type:"number",value:u,onChange:c=>k(Number(c.target.value)),min:"1",max:y,className:"bg-background border-input text-foreground"})]}),e.jsx(p,{size:"sm",onClick:S,disabled:!l||u<=0||u>y,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:"Add"}),e.jsx(p,{size:"sm",variant:"outline",onClick:()=>g(!1),children:"Cancel"})]}),y<u&&e.jsxs("p",{className:"text-xs text-destructive mt-2",children:["Only ",y,"% remaining to assign"]})]}),o?e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((c,b)=>e.jsx("div",{className:"h-16 bg-muted animate-pulse rounded-lg"},b))}):h.length===0?e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No users assigned to this task yet."}):h.map(c=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_e,{className:"w-8 h-8",children:e.jsx(Pe,{className:"bg-primary text-primary-foreground text-sm",children:c.name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:c.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:c.email})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20",children:e.jsx(z,{type:"number",value:c.pivot.percentage,onChange:b=>q(c.id,Number(b.target.value)),min:"1",max:"100",className:"text-xs h-8 bg-background border-input text-foreground"})}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"%"}),e.jsx(p,{size:"sm",variant:"ghost",onClick:()=>s(c.id),className:"h-8 w-8 p-0 text-destructive hover:bg-destructive hover:text-destructive-foreground",children:e.jsx(me,{className:"h-4 w-4"})})]})]},c.id)),e.jsxs("div",{className:"pt-2 border-t border-border",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Assigned:"}),e.jsxs("span",{className:`font-medium ${a.is_fully_assigned?"text-chart-3":v>100?"text-destructive":"text-muted-foreground"}`,children:[v,"%"]})]}),v>100&&e.jsx("p",{className:"text-xs text-destructive mt-1",children:"Task is over-assigned. Please adjust percentages."}),a.is_fully_assigned&&e.jsx("p",{className:"text-xs text-chart-3 mt-1",children:"Task is fully assigned."})]})]})]})},Re=K({name:_().min(1,"Subtask name is required").max(255),description:_().optional(),due_date:_().min(1,"Due date is required"),priority:W(["low","medium","high","critical"]),task_id:fe()}),Oe=K({name:_().min(1,"Subtask name is required").max(255),description:_().optional(),due_date:_().min(1,"Due date is required"),priority:W(["low","medium","high","critical"]),is_complete:je().optional()}),X=({subtask:a,taskId:i,onSubmit:r,onCancel:t,isLoading:s})=>{const o=!!a,x=ue({resolver:xe(o?Oe:Re),defaultValues:{name:a?.name||"",description:a?.description||"",due_date:a?.due_date?new Date(a.due_date).toISOString().split("T")[0]:"",priority:a?.priority||"medium",is_complete:a?.is_complete||!1,task_id:i}}),g=async l=>{const j={...l,...i&&{task_id:i}};await r(j)};return e.jsx(ge,{...x,children:e.jsxs("form",{onSubmit:x.handleSubmit(g),className:"space-y-4",children:[e.jsx(T,{control:x.control,name:"name",render:({field:l})=>e.jsxs(L,{children:[e.jsx(A,{className:"text-foreground",children:"Subtask Name"}),e.jsx(U,{children:e.jsx(z,{placeholder:"Enter subtask name",...l,disabled:s,className:"bg-background border-input text-foreground"})}),e.jsx(E,{className:"text-destructive"})]})}),e.jsx(T,{control:x.control,name:"description",render:({field:l})=>e.jsxs(L,{children:[e.jsx(A,{className:"text-foreground",children:"Description"}),e.jsx(U,{children:e.jsx(he,{placeholder:"Enter subtask description (optional)",...l,disabled:s,className:"bg-background border-input text-foreground",rows:2})}),e.jsx(E,{className:"text-destructive"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(T,{control:x.control,name:"due_date",render:({field:l})=>e.jsxs(L,{children:[e.jsx(A,{className:"text-foreground",children:"Due Date"}),e.jsx(U,{children:e.jsx(z,{type:"date",...l,disabled:s,className:"bg-background border-input text-foreground"})}),e.jsx(E,{className:"text-destructive"})]})}),e.jsx(T,{control:x.control,name:"priority",render:({field:l})=>e.jsxs(L,{children:[e.jsx(A,{className:"text-foreground",children:"Priority"}),e.jsxs(Y,{onValueChange:l.onChange,defaultValue:l.value,disabled:s,children:[e.jsx(U,{children:e.jsx(Z,{className:"bg-background border-input text-foreground",children:e.jsx(G,{placeholder:"Select priority"})})}),e.jsxs(J,{children:[e.jsx(F,{value:"low",children:"Low"}),e.jsx(F,{value:"medium",children:"Medium"}),e.jsx(F,{value:"high",children:"High"}),e.jsx(F,{value:"critical",children:"Critical"})]})]}),e.jsx(E,{className:"text-destructive"})]})})]}),o&&e.jsx(T,{control:x.control,name:"is_complete",render:({field:l})=>e.jsxs(L,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(U,{children:e.jsx(ae,{checked:l.value,onCheckedChange:l.onChange,disabled:s})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(A,{className:"text-foreground",children:"Mark as completed"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Check this box if the subtask is completed"})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(p,{type:"submit",size:"sm",disabled:s,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:[s&&e.jsx(pe,{className:"mr-2 h-3 w-3 animate-spin"}),o?"Update":"Create"]}),e.jsx(p,{type:"button",variant:"outline",size:"sm",onClick:t,disabled:s,children:"Cancel"})]})]})})},He=({taskId:a})=>{const{subtasks:i,pagination:r,isLoading:t,createSubtask:s,updateSubtask:o,deleteSubtask:x,toggleCompletion:g,goToPage:l,nextPage:j,prevPage:u}=ne(a),[k,h]=C.useState(!1),[m,f]=C.useState(null),v=async n=>{await s({...n,task_id:a}),h(!1)},y=async n=>{m&&(await o(m.id,n),f(null))},S=async n=>{window.confirm("Are you sure you want to delete this subtask?")&&await x(n)},q=async n=>{await g(n)},c=i.filter(n=>n.is_complete).length,b=i.length>0?Math.round(c/i.length*100):0,ie=()=>{if(!r)return[];const n=[],{current_page:N,last_page:B}=r;N>3&&(n.push(1),N>4&&n.push("ellipsis-start"));for(let $=Math.max(1,N-2);$<=Math.min(B,N+2);$++)n.push($);return N<B-2&&(N<B-3&&n.push("ellipsis-end"),n.push(B)),n};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(D,{className:"bg-card border-border",children:[e.jsxs(R,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(O,{className:"text-foreground flex items-center gap-2",children:[e.jsx(Me,{className:"w-5 h-5"}),"Subtasks (",r?.total||i.length,")"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(P,{variant:"outline",className:"text-xs",children:[c,"/",r?.total||i.length," completed"]}),e.jsxs(P,{variant:"secondary",className:"text-xs",children:[b,"%"]}),e.jsxs(p,{size:"sm",onClick:()=>h(!0),className:"bg-primary text-primary-foreground hover:bg-primary/90",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),"Add Subtask"]})]})]}),i.length>0&&e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-chart-3 h-2 rounded-full transition-all duration-300",style:{width:`${b}%`}})})]}),e.jsxs(M,{className:"space-y-4",children:[k&&e.jsxs("div",{className:"p-4 border border-border rounded-lg bg-accent/20",children:[e.jsx("h4",{className:"text-sm font-medium text-foreground mb-3",children:"Create New Subtask"}),e.jsx(X,{taskId:a,onSubmit:v,onCancel:()=>h(!1),isLoading:t})]}),t?e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((n,N)=>e.jsx("div",{className:"h-20 bg-muted animate-pulse rounded-lg"},N))}):i.length===0?e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No subtasks yet. Create your first subtask to break down this task."}):i.map(n=>e.jsx("div",{children:m?.id===n.id?e.jsxs("div",{className:"p-4 border border-border rounded-lg bg-accent/20",children:[e.jsx("h4",{className:"text-sm font-medium text-foreground mb-3",children:"Edit Subtask"}),e.jsx(X,{subtask:m,taskId:a,onSubmit:y,onCancel:()=>f(null),isLoading:t})]}):e.jsxs("div",{className:"flex items-start justify-between p-4 border border-border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx(ae,{checked:n.is_complete,onCheckedChange:()=>q(n.id),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:`font-medium text-foreground ${n.is_complete?"line-through text-muted-foreground":""}`,children:n.name}),e.jsx(ee,{priority:n.priority})]}),n.description&&e.jsx("p",{className:`text-sm mt-1 ${n.is_complete?"line-through text-muted-foreground":"text-muted-foreground"}`,children:n.description}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(te,{className:"w-3 h-3"}),new Date(n.due_date).toLocaleDateString()]}),n.is_complete&&e.jsx(P,{variant:"outline",className:"text-xs text-chart-3",children:"Completed"})]})]})]}),e.jsxs(be,{children:[e.jsx(Ne,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(Be,{className:"h-4 w-4"})})}),e.jsxs(ve,{align:"end",className:"bg-popover border-border",children:[e.jsxs(H,{onClick:()=>f(n),className:"hover:bg-accent hover:text-accent-foreground",children:[e.jsx(re,{className:"mr-2 h-4 w-4"}),"Edit"]}),e.jsxs(H,{onClick:()=>S(n.id),className:"text-destructive hover:bg-destructive hover:text-destructive-foreground",children:[e.jsx(Ee,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})},n.id))]})]}),r&&r.last_page>1&&e.jsx(D,{className:"bg-card border-border",children:e.jsx(M,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",r.from||0," to ",r.to||0," of ",r.total," results"]}),e.jsx(Te,{children:e.jsxs(Le,{children:[e.jsx(I,{children:e.jsx(Ae,{onClick:u,className:r.current_page===1?"pointer-events-none opacity-50":"cursor-pointer"})}),ie().map((n,N)=>e.jsx(I,{children:n==="ellipsis-start"||n==="ellipsis-end"?e.jsx(Ue,{}):e.jsx(Fe,{onClick:()=>l(n),isActive:r.current_page===n,className:"cursor-pointer",children:n})},N)),e.jsx(I,{children:e.jsx(De,{onClick:j,className:r.current_page===r.last_page?"pointer-events-none opacity-50":"cursor-pointer"})})]})})]})})})]})},cs=()=>{const{id:a}=ke(),{task:i,taskWithAssignments:r,availableUsers:t,isLoading:s,error:o,addUser:x,updateAssignment:g,removeUser:l}=we(a),{updateTaskStatus:j}=ne(),{hasPermission:u,hasAnyPermission:k}=ye();if(s)return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-8 bg-muted animate-pulse rounded w-48"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"h-64 bg-muted animate-pulse rounded-lg"}),e.jsx("div",{className:"h-64 bg-muted animate-pulse rounded-lg"})]})]});if(o||!i)return e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-destructive",children:o||"Task not found"})});const h=async m=>{u("edit tasks")&&await j(i.id,{status:m})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(p,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(V,{to:"/tasks",children:[e.jsx(ze,{className:"mr-2 h-4 w-4"}),"Back to Tasks"]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(Q,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground font-sans",children:i.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{status:i.status}),e.jsx(ee,{priority:i.priority})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[u("edit tasks")&&e.jsxs(e.Fragment,{children:[e.jsx(p,{variant:"outline",size:"sm",onClick:()=>h("in_progress"),disabled:i.status==="in_progress",children:"Mark In Progress"}),e.jsx(p,{variant:"outline",size:"sm",onClick:()=>h("done"),disabled:i.status==="done",children:"Mark Complete"})]}),u("edit tasks")&&e.jsx(p,{asChild:!0,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:e.jsxs(V,{to:`/tasks/${i.id}/edit`,children:[e.jsx(re,{className:"mr-2 h-4 w-4"}),"Edit Task"]})}),k(["create task ratings","edit task ratings"])&&e.jsx(p,{asChild:!0,variant:"outline",children:e.jsxs(V,{to:`/ratings/tasks/${i.id}`,children:[e.jsx(Se,{className:"mr-2 h-4 w-4"}),"Rate Task"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs(D,{className:"bg-card border-border",children:[e.jsx(R,{children:e.jsxs(O,{className:"text-foreground flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4"}),"Task Information"]})}),e.jsxs(M,{className:"space-y-4",children:[i.description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Description"}),e.jsx("p",{className:"text-foreground",children:i.description})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Section"}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:i.section?.name||"Unknown Section"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Project: ",i.section?.project?.name||"Unknown Project"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Weight"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"w-4 h-4 text-muted-foreground"}),e.jsx(P,{variant:"outline",className:"text-sm",children:i.weight})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Due Date"}),e.jsxs("p",{className:"text-sm text-foreground flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4"}),new Date(i.due_date).toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Subtasks"}),e.jsxs(P,{variant:"secondary",className:"text-sm",children:[i.subtasks?.length||0," subtasks"]})]})]})]}),u("edit tasks")&&e.jsx(Ie,{taskWithAssignments:r,availableUsers:t,onAddUser:x,onUpdateAssignment:g,onRemoveUser:l,isLoading:s})]}),e.jsx("div",{className:"lg:col-span-2",children:u("view subtasks")?e.jsx(He,{taskId:i.id}):e.jsx(D,{className:"bg-card border-border",children:e.jsx(M,{className:"p-6 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"You don't have permission to view subtasks"})})})})]})]})};export{cs as default};
