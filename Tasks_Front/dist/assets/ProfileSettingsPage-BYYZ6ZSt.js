import{r as t,j as e,C as N,f as P,I as n,B as b,t as w}from"./index-CH0ELVhY.js";import{u as S}from"./useProfile-DfXzYJI3.js";import{L as c}from"./label-DI3SyrnA.js";function L(){const{me:s,loading:f,saveProfile:v}=S(),[d,o]=t.useState(""),[m,u]=t.useState(""),[x,h]=t.useState(null),[r,i]=t.useState(null);t.useEffect(()=>{s&&(o(s.name),u(s.email),i(s.avatar_url||null))},[s]);const p=a=>{const l=a.target.files?.[0]||null;if(h(l),l){const g=URL.createObjectURL(l);i(g)}else i(s?.avatar_url||null)},j=async a=>{a.preventDefault(),await v({name:d,email:m,avatar:x||void 0})&&(x&&URL.revokeObjectURL(r||""),w.success("Saved"))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Profile information"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Update your name, email, and photo"})]}),e.jsx(N,{children:e.jsx(P,{className:"pt-6",children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"name",children:"Name"}),e.jsx(n,{id:"name",value:d,onChange:a=>o(a.target.value),required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"email",children:"Email address"}),e.jsx(n,{id:"email",type:"email",value:m,onChange:a=>u(a.target.value),required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"avatar",children:"Photo"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-14 w-14 rounded-full overflow-hidden bg-muted",children:r&&e.jsx("img",{src:r,alt:"avatar preview",className:"h-full w-full object-cover"})}),e.jsx(n,{id:"avatar",type:"file",accept:"image/*",onChange:p,className:"max-w-xs"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"JPG/PNG/WebP, up to 2MB."})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(b,{disabled:f,children:"Save"})})]})})})]})}export{L as default};
