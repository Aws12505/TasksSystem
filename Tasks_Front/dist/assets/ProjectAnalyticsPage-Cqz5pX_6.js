import{r as f,y as N,j as e,B as p,x as b,m as y,U as j,S as u,n as _}from"./index-CLnmuTsT.js";import{C as a,a as t,b as r,d as l}from"./card-nZHOKDYn.js";import{B as d}from"./badge-DIlLlDgn.js";import{P as v}from"./progress-CEx_PbLP.js";import{u as w}from"./analyticsStore-CkwY2oGi.js";import{A as k}from"./arrow-left-8pt3QYXv.js";import{T as A}from"./target-Be1VUPFK.js";import{C as g}from"./clock-CAGjK-fP.js";import"./analyticsService-CnRvz7dM.js";const C=(n,s,i)=>{const{projectAnalytics:o,isLoading:m,error:c,fetchProjectAnalytics:h}=w(),x=typeof n=="string"?parseInt(n):n;return f.useEffect(()=>{x&&h(x,s,i)},[x,s,i,h]),{projectAnalytics:o,isLoading:m,error:c,refreshProjectAnalytics:()=>h(x,s,i)}},R=()=>{const{projectId:n}=N(),{projectAnalytics:s,isLoading:i,error:o}=C(n);if(i)return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-8 bg-muted animate-pulse rounded w-48"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"h-64 bg-muted animate-pulse rounded-lg"}),e.jsx("div",{className:"h-64 bg-muted animate-pulse rounded-lg"})]})]});if(o||!s)return e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-destructive",children:o||"Project analytics not found"})});const m=c=>{switch(c){case"excellent":return"text-green-600 bg-green-100";case"good":return"text-blue-600 bg-blue-100";case"fair":return"text-yellow-600 bg-yellow-100";case"poor":return"text-red-600 bg-red-100";default:return"text-muted-foreground bg-muted"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(p,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(b,{to:"/analytics",children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),"Back to Analytics"]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(y,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground font-sans",children:s.basic_info.name}),e.jsx("p",{className:"text-muted-foreground",children:"Project Analytics & Health Score"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(a,{className:"bg-card border-border",children:[e.jsx(t,{children:e.jsx(r,{className:"text-foreground",children:"Project Info"})}),e.jsxs(l,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Status"}),e.jsx(d,{variant:"outline",className:"capitalize",children:s.basic_info.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Progress"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{value:s.basic_info.progress_percentage,className:"flex-1"}),e.jsxs("span",{className:"text-sm font-medium",children:[s.basic_info.progress_percentage,"%"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Stakeholder"}),e.jsx("p",{className:"text-foreground",children:s.basic_info.stakeholder_name})]})]})]}),e.jsxs(a,{className:"bg-card border-border",children:[e.jsx(t,{children:e.jsxs(r,{className:"text-foreground flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5"}),"Health Score"]})}),e.jsxs(l,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-foreground",children:s.health_score.overall_score}),e.jsx(d,{variant:"outline",className:m(s.health_score.health_status),children:s.health_score.health_status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Completion"}),e.jsx("span",{children:s.health_score.completion_score})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Quality"}),e.jsx("span",{children:s.health_score.quality_score})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Timeline"}),e.jsx("span",{children:s.health_score.timeline_score})]})]})]})]}),e.jsxs(a,{className:"bg-card border-border",children:[e.jsx(t,{children:e.jsxs(r,{className:"text-foreground flex items-center gap-2",children:[e.jsx(j,{className:"w-5 h-5"}),"Team Analytics"]})}),e.jsxs(l,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Team Size"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:s.team_analytics.team_size})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Assignment"}),e.jsxs("p",{className:"text-lg font-medium text-foreground",children:[s.team_analytics.avg_assignment_percentage.toFixed(1),"%"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(a,{className:"bg-card border-border",children:[e.jsxs(t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium text-muted-foreground",children:"Total Tasks"}),e.jsx(u,{className:"w-4 h-4 text-chart-1"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold text-foreground",children:s.task_analytics.total_tasks}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Weight: ",s.task_analytics.total_weight]})]})]}),e.jsxs(a,{className:"bg-card border-border",children:[e.jsxs(t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium text-muted-foreground",children:"Completed Tasks"}),e.jsx(u,{className:"w-4 h-4 text-green-500"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold text-foreground",children:s.task_analytics.completed_tasks}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Weight: ",s.task_analytics.completed_weight]})]})]}),e.jsxs(a,{className:"bg-card border-border",children:[e.jsxs(t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium text-muted-foreground",children:"In Progress"}),e.jsx(g,{className:"w-4 h-4 text-yellow-500"})]}),e.jsx(l,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:s.task_analytics.in_progress_tasks})})]}),e.jsxs(a,{className:"bg-card border-border",children:[e.jsxs(t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium text-muted-foreground",children:"Overdue"}),e.jsx(g,{className:"w-4 h-4 text-red-500"})]}),e.jsx(l,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:s.task_analytics.overdue_tasks})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(a,{className:"bg-card border-border",children:[e.jsx(t,{children:e.jsxs(r,{className:"text-foreground flex items-center gap-2",children:[e.jsx(_,{className:"w-5 h-5"}),"Task Ratings"]})}),e.jsxs(l,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Count"}),e.jsx("span",{className:"font-medium",children:s.rating_analytics.task_ratings.count})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Average"}),e.jsxs(d,{variant:"outline",className:"text-yellow-600 bg-yellow-100",children:[s.rating_analytics.task_ratings.average,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Highest"}),e.jsxs("span",{className:"font-medium",children:[s.rating_analytics.task_ratings.highest,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Lowest"}),e.jsxs("span",{className:"font-medium",children:[s.rating_analytics.task_ratings.lowest,"%"]})]})]})]}),e.jsxs(a,{className:"bg-card border-border",children:[e.jsx(t,{children:e.jsxs(r,{className:"text-foreground flex items-center gap-2",children:[e.jsx(j,{className:"w-5 h-5"}),"Stakeholder Ratings"]})}),e.jsxs(l,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Count"}),e.jsx("span",{className:"font-medium",children:s.rating_analytics.stakeholder_ratings.count})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Average"}),e.jsxs(d,{variant:"outline",className:"text-blue-600 bg-blue-100",children:[s.rating_analytics.stakeholder_ratings.average,"%"]})]}),s.rating_analytics.stakeholder_ratings.latest>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Latest"}),e.jsxs("span",{className:"font-medium",children:[s.rating_analytics.stakeholder_ratings.latest,"%"]})]})]})]})]}),s.team_analytics.team_members.length>0&&e.jsxs(a,{className:"bg-card border-border",children:[e.jsx(t,{children:e.jsx(r,{className:"text-foreground",children:"Team Members"})}),e.jsx(l,{children:e.jsx("div",{className:"space-y-3",children:s.team_analytics.team_members.map(c=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:c.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[c.task_count," tasks"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs(d,{variant:"outline",children:[c.total_assignment_percentage.toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"workload"})]})]},c.user_id))})})]})]})};export{R as default};
