import{h as I,j as e,D as M,q as R,B as S,v as H,w as n,x as p,T,p as F,I as Q}from"./index-BIXuByyq.js";import{C as c,d as i,a as m,b as h}from"./card-DXKjgZZu.js";import{T as V,a as $,b as C,c as k}from"./tabs-C6Mxc1Lv.js";import{u as O}from"./useTickets-BMSojvno.js";import{u as X}from"./filtersStore-KkYnU9VE.js";import{T as z,a as G,b as A,c as t,d as J,e as l}from"./table-Df7jZcpg.js";import{A as U,a as D}from"./avatar-BLUoJbb6.js";import{B as K}from"./badge-w_G-QZAg.js";import{T as W,a as Y,b as Z}from"./TicketPriorityBadge-3b9EeSdn.js";import{E as ee}from"./ellipsis-BzFAVc6a.js";import{E as se}from"./eye-DPB64O2K.js";import{S as re}from"./square-pen-D1mPz8ko.js";import{U as ae,a as te}from"./user-x-BDlz5Kvz.js";import{C as le}from"./circle-check-big-Ce8MNy9s.js";import{T as ne}from"./trash-2-xlj9cGPo.js";import{P as ce}from"./plus-Dd03PpEI.js";import{C as ie}from"./clock-BdXjUZfM.js";import{C as oe}from"./circle-check-BJLv5Jtv.js";import"./ticketsStore-CIwyUu3f.js";import"./index-DjKBNkem.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],xe=I("circle-alert",de),B=({tickets:a,isLoading:o,onDelete:d,onClaim:u,onComplete:j,onUnassign:g,showActions:x=!0})=>o?e.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((s,f)=>e.jsx("div",{className:"h-16 bg-muted animate-pulse rounded-lg"},f))}):a.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"No tickets found"})}):e.jsx("div",{className:"border border-border rounded-lg bg-card",children:e.jsxs(z,{children:[e.jsx(G,{children:e.jsxs(A,{className:"border-border",children:[e.jsx(t,{className:"text-foreground",children:"Title"}),e.jsx(t,{className:"text-foreground",children:"Type"}),e.jsx(t,{className:"text-foreground",children:"Status"}),e.jsx(t,{className:"text-foreground",children:"Priority"}),e.jsx(t,{className:"text-foreground",children:"Requester"}),e.jsx(t,{className:"text-foreground",children:"Assignee"}),e.jsx(t,{className:"text-foreground",children:"Created"}),x&&e.jsx(t,{className:"text-foreground w-[50px]",children:"Actions"})]})}),e.jsx(J,{children:a.map(s=>e.jsxs(A,{className:"border-border hover:bg-accent/50",children:[e.jsx(l,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:s.description})]})}),e.jsx(l,{children:e.jsx(W,{type:s.type})}),e.jsx(l,{children:e.jsx(Y,{status:s.status})}),e.jsx(l,{children:e.jsx(Z,{priority:s.priority})}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"w-6 h-6",children:e.jsx(D,{className:"bg-primary text-primary-foreground text-xs",children:s.requester?.name?.charAt(0).toUpperCase()||"U"})}),e.jsx("span",{className:"text-sm text-foreground",children:s.requester?.name||"Unknown User"})]})}),e.jsx(l,{children:s.assignee?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"w-6 h-6",children:e.jsx(D,{className:"bg-chart-2 text-white text-xs",children:s.assignee.name?.charAt(0).toUpperCase()||"A"})}),e.jsx("span",{className:"text-sm text-foreground",children:s.assignee.name})]}):e.jsx(K,{variant:"outline",className:"text-xs",children:"Unassigned"})}),e.jsx(l,{className:"text-muted-foreground",children:new Date(s.created_at).toLocaleDateString()}),x&&e.jsx(l,{children:e.jsxs(M,{children:[e.jsx(R,{asChild:!0,children:e.jsx(S,{variant:"ghost",className:"h-8 w-8 p-0 hover:bg-accent",children:e.jsx(ee,{className:"h-4 w-4"})})}),e.jsxs(H,{align:"end",className:"bg-popover border-border",children:[e.jsx(n,{asChild:!0,className:"hover:bg-accent hover:text-accent-foreground",children:e.jsxs(p,{to:`/tickets/${s.id}`,className:"flex items-center",children:[e.jsx(se,{className:"mr-2 h-4 w-4"}),"View"]})}),e.jsx(n,{asChild:!0,className:"hover:bg-accent hover:text-accent-foreground",children:e.jsxs(p,{to:`/tickets/${s.id}/edit`,className:"flex items-center",children:[e.jsx(re,{className:"mr-2 h-4 w-4"}),"Edit"]})}),s.is_available&&e.jsxs(n,{onClick:()=>u(s.id),className:"hover:bg-accent hover:text-accent-foreground",children:[e.jsx(ae,{className:"mr-2 h-4 w-4"}),"Claim"]}),s.is_assigned&&s.status==="in_progress"&&e.jsxs(n,{onClick:()=>j(s.id),className:"hover:bg-accent hover:text-accent-foreground",children:[e.jsx(le,{className:"mr-2 h-4 w-4"}),"Complete"]}),s.is_assigned&&s.status!=="resolved"&&e.jsxs(n,{onClick:()=>g(s.id),className:"hover:bg-accent hover:text-accent-foreground",children:[e.jsx(te,{className:"mr-2 h-4 w-4"}),"Unassign"]}),e.jsxs(n,{onClick:()=>d(s.id),className:"text-destructive hover:bg-destructive hover:text-destructive-foreground",children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},s.id))})]})}),_e=()=>{const{tickets:a,availableTickets:o,isLoading:d,deleteTicket:u,claimTicket:j,assignTicket:g,completeTicket:x,unassignTicket:s}=O(),{searchQuery:f,setSearchQuery:_}=X(),N=async r=>{window.confirm("Are you sure you want to delete this ticket?")&&await u(r)},b=async r=>{await j(r)},v=async(r,L)=>{await g(r,L)},y=async r=>{await x(r)},w=async r=>{window.confirm("Are you sure you want to unassign this ticket?")&&await s(r)},P=a.filter(r=>r.status==="open").length,q=a.filter(r=>r.status==="in_progress").length,E=a.filter(r=>r.status==="resolved").length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(T,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground font-sans",children:"Tickets"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage support tickets and track resolution"})]})]}),e.jsx(S,{asChild:!0,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:e.jsxs(p,{to:"/tickets/create",children:[e.jsx(ce,{className:"mr-2 h-4 w-4"}),"New Ticket"]})})]}),e.jsx(c,{className:"bg-card border-border",children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"relative max-w-sm",children:[e.jsx(F,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(Q,{placeholder:"Search tickets...",value:f,onChange:r=>_(r.target.value),className:"pl-10 bg-background border-input text-foreground"})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(c,{className:"bg-card border-border",children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium text-muted-foreground",children:"Total Tickets"}),e.jsx(T,{className:"w-4 h-4 text-chart-1"})]}),e.jsx(i,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:a.length})})]}),e.jsxs(c,{className:"bg-card border-border",children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium text-muted-foreground",children:"Open"}),e.jsx(xe,{className:"w-4 h-4 text-red-500"})]}),e.jsx(i,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:P})})]}),e.jsxs(c,{className:"bg-card border-border",children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium text-muted-foreground",children:"In Progress"}),e.jsx(ie,{className:"w-4 h-4 text-yellow-500"})]}),e.jsx(i,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:q})})]}),e.jsxs(c,{className:"bg-card border-border",children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium text-muted-foreground",children:"Resolved"}),e.jsx(oe,{className:"w-4 h-4 text-green-500"})]}),e.jsx(i,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:E})})]})]}),e.jsxs(V,{defaultValue:"all",className:"space-y-4",children:[e.jsxs($,{className:"bg-muted",children:[e.jsxs(C,{value:"all",children:["All Tickets (",a.length,")"]}),e.jsxs(C,{value:"available",children:["Available (",o.length,")"]})]}),e.jsx(k,{value:"all",children:e.jsx(B,{tickets:a,isLoading:d,onDelete:N,onClaim:b,onAssign:v,onComplete:y,onUnassign:w})}),e.jsx(k,{value:"available",children:e.jsx(B,{tickets:o,isLoading:d,onDelete:N,onClaim:b,onAssign:v,onComplete:y,onUnassign:w})})]})]})};export{_e as default};
