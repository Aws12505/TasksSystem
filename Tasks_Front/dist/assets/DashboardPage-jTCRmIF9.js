import{g as D,t as v,h as W,i as Q,n as E,k as G,l as P,m as J,p as K,q as S,r as b,v as L,w as Z,x as w,y as ee,j as e,C as c,c as i,d,f as o,z as T,A as C,S as se,D as F,E as y,F as z,U as A,T as H,G as U,H as X,J as R,K as te,M as ae,N as re,O as ne,P as le,Q as ce,R as ie,L as O}from"./index-ClQ2iEwo.js";import{C as M}from"./circle-check-CmMcYAKI.js";import{B as q}from"./badge-Dke9IkX-.js";import{C as V}from"./circle-alert-CWaFpwDu.js";import{T as de}from"./trending-up-C2X1ezNk.js";import{T as $}from"./trophy-Bf4AXGuY.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],B=D("briefcase",oe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],me=D("chart-column",xe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],ue=D("chart-pie",he);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],pe=D("circle-play",je);function _(s,a){const t=+v(s)-+v(a);return t<0?-1:t>0?1:t}function fe(s){return W(s,Date.now())}function ge(s){return a=>{const r=(s?Math[s]:Math.trunc)(a);return r===0?0:r}}function Ne(s,a){return+v(s)-+v(a)}function ye(s,a){const t=v(s,a?.in);return t.setHours(23,59,59,999),t}function ve(s,a){const t=v(s,a?.in);return+ye(t,a)==+Q(t,a)}function be(s,a,t){const[r,n,m]=E(t?.in,s,s,a),h=_(n,m),l=Math.abs(G(n,m));if(l<1)return 0;n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-h*l);let u=_(n,m)===-h;ve(r)&&l===1&&_(r,m)===1&&(u=!1);const j=h*(l-+u);return j===0?0:j}function we(s,a,t){const r=Ne(s,a)/1e3;return ge(t?.roundingMethod)(r)}function _e(s,a,t){const r=J(),n=t?.locale??r.locale??K,m=2520,h=_(s,a);if(isNaN(h))throw new RangeError("Invalid time value");const l=Object.assign({},t,{addSuffix:t?.addSuffix,comparison:h}),[u,j]=E(t?.in,...h>0?[a,s]:[s,a]),p=we(j,u),Y=(P(j)-P(u))/1e3,x=Math.round((p-Y)/60);let g;if(x<2)return t?.includeSeconds?p<5?n.formatDistance("lessThanXSeconds",5,l):p<10?n.formatDistance("lessThanXSeconds",10,l):p<20?n.formatDistance("lessThanXSeconds",20,l):p<40?n.formatDistance("halfAMinute",0,l):p<60?n.formatDistance("lessThanXMinutes",1,l):n.formatDistance("xMinutes",1,l):x===0?n.formatDistance("lessThanXMinutes",1,l):n.formatDistance("xMinutes",x,l);if(x<45)return n.formatDistance("xMinutes",x,l);if(x<90)return n.formatDistance("aboutXHours",1,l);if(x<S){const f=Math.round(x/60);return n.formatDistance("aboutXHours",f,l)}else{if(x<m)return n.formatDistance("xDays",1,l);if(x<b){const f=Math.round(x/S);return n.formatDistance("xDays",f,l)}else if(x<b*2)return g=Math.round(x/b),n.formatDistance("aboutXMonths",g,l)}if(g=be(j,u),g<12){const f=Math.round(x/b);return n.formatDistance("xMonths",f,l)}else{const f=g%12,k=Math.trunc(g/12);return f<3?n.formatDistance("aboutXYears",k,l):f<9?n.formatDistance("overXYears",k,l):n.formatDistance("almostXYears",k+1,l)}}function Me(s,a){return _e(s,fe(s),a)}class De{async getEmployeeDashboard(){return L.get("/dashboard/employee")}async getManagerAnalytics(a="today"){return L.get("/dashboard/analytics",{period:a})}}const I=new De,ke=Z((s,a)=>({employeeDashboard:null,managerAnalytics:null,currentPeriod:"today",isLoading:!1,error:null,fetchEmployeeDashboard:async()=>{s({isLoading:!0,error:null});try{const t=await I.getEmployeeDashboard();t.success&&t.data?s({employeeDashboard:t.data,isLoading:!1}):(s({error:t.message||"Failed to fetch dashboard",isLoading:!1}),w.error(t.message||"Failed to fetch dashboard"))}catch(t){const r=t.message||"Failed to fetch dashboard";s({error:r,isLoading:!1}),w.error(r)}},fetchManagerAnalytics:async t=>{s({isLoading:!0,error:null,currentPeriod:t});try{const r=await I.getManagerAnalytics(t);r.success&&r.data?s({managerAnalytics:r.data,isLoading:!1}):(s({error:r.message||"Failed to fetch analytics",isLoading:!1}),w.error(r.message||"Failed to fetch analytics"))}catch(r){const n=r.message||"Failed to fetch analytics";s({error:n,isLoading:!1}),w.error(n)}},setPeriod:t=>{s({currentPeriod:t}),a().fetchManagerAnalytics(t)},clearError:()=>s({error:null})})),Te=()=>{const{employeeDashboard:s,managerAnalytics:a,currentPeriod:t,isLoading:r,error:n,fetchEmployeeDashboard:m,fetchManagerAnalytics:h,setPeriod:l,clearError:u}=ke(),{hasPermission:j}=ee(),p=j("view analytics");return{employeeDashboard:s,managerAnalytics:a,currentPeriod:t,isLoading:r,error:n,fetchEmployeeDashboard:m,fetchManagerAnalytics:h,setPeriod:l,clearError:u,canViewAnalytics:p}},Ce=({data:s})=>e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(c,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"My Tasks"}),e.jsx(M,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.assigned_tasks.total}),e.jsxs("div",{className:"mt-2 space-y-1 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(T,{className:"h-3 w-3"})," Pending"]}),e.jsx("span",{className:"font-medium",children:s.assigned_tasks.pending})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(pe,{className:"h-3 w-3"})," In Progress"]}),e.jsx("span",{className:"font-medium",children:s.assigned_tasks.in_progress})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(M,{className:"h-3 w-3 text-green-600"})," Done"]}),e.jsx("span",{className:"font-medium text-green-600",children:s.assigned_tasks.done})]})]})]})]}),e.jsxs(c,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Projects"}),e.jsx(B,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.projects.total}),e.jsxs("div",{className:"mt-2 space-y-1 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"As Stakeholder"}),e.jsx("span",{className:"font-medium",children:s.projects.as_stakeholder})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"As Contributor"}),e.jsx("span",{className:"font-medium",children:s.projects.as_contributor})]})]})]})]}),e.jsxs(c,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Help Requests"}),e.jsx(C,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.help_requests.helped_others}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Times helped others"}),e.jsxs("div",{className:"mt-2 space-y-1 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Requested Help"}),e.jsx("span",{className:"font-medium",children:s.help_requests.requested})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Pending"}),e.jsx("span",{className:"font-medium",children:s.help_requests.pending})]})]})]})]}),e.jsxs(c,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"This Week"}),e.jsx(se,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.this_week.tasks_completed}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tasks completed"}),e.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Helped Colleagues"}),e.jsx("span",{className:"font-medium",children:s.this_week.helped_colleagues})]})})]})]})]}),Ae={low:"bg-gray-500",medium:"bg-blue-500",high:"bg-orange-500",critical:"bg-red-500"},Pe=({tasks:s})=>{const a=F();return s.length===0?e.jsxs(c,{children:[e.jsx(i,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5"}),"Upcoming Tasks"]})}),e.jsx(o,{children:e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No upcoming tasks in the next 7 days"})})]}):e.jsxs(c,{children:[e.jsx(i,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5"}),"Upcoming Tasks (",s.length,")"]})}),e.jsx(o,{children:e.jsx("div",{className:"space-y-3",children:s.map(t=>e.jsx("div",{onClick:()=>a(`/projects/${t.project.id}`),className:"flex items-start justify-between p-3 border rounded-lg hover:bg-accent cursor-pointer transition-colors",children:e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:t.name}),e.jsx(q,{variant:"outline",className:`${Ae[t.priority]} text-white text-xs`,children:t.priority})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.project.name}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(y,{className:"h-3 w-3"}),z(new Date(t.due_date),"MMM d, yyyy")]}),e.jsxs("span",{className:`flex items-center gap-1 ${t.days_until_due<=2?"text-red-600 font-medium":""}`,children:[e.jsx(V,{className:"h-3 w-3"}),t.days_until_due===0?"Due today":`${t.days_until_due} days left`]})]})]})},t.id))})})]})},Se=({activities:s})=>s.length===0?e.jsxs(c,{children:[e.jsx(i,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5"}),"Recent Activity"]})}),e.jsx(o,{children:e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No recent activity"})})]}):e.jsxs(c,{children:[e.jsx(i,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5"}),"Recent Activity"]})}),e.jsx(o,{children:e.jsx("div",{className:"space-y-3",children:s.map((a,t)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[e.jsx("div",{className:`p-2 rounded-full ${a.type==="task_completed"?"bg-green-100":"bg-blue-100"}`,children:a.type==="task_completed"?e.jsx(M,{className:"h-4 w-4 text-green-600"}):e.jsx(A,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:a.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.project}),e.jsx("p",{className:"text-xs text-muted-foreground",children:Me(new Date(a.timestamp),{addSuffix:!0})})]})]},t))})})]}),N=({title:s,value:a,description:t,icon:r,trend:n})=>e.jsxs(c,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:s}),r&&e.jsx(r,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a}),t&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t}),n&&e.jsxs("p",{className:`text-xs mt-1 ${n.isPositive?"text-green-600":"text-red-600"}`,children:[n.isPositive?"↑":"↓"," ",Math.abs(n.value),"%"]})]})]}),Le=({data:s})=>e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(N,{title:"Total Employees",value:s.total_employees,icon:A,description:"Active team members"}),e.jsx(N,{title:"Active Projects",value:s.active_projects,icon:B,description:"In progress or pending"}),e.jsx(N,{title:"Tasks Completed",value:s.completed_tasks,icon:M,description:`Out of ${s.total_tasks} total tasks`}),e.jsx(N,{title:"Completion Rate",value:`${s.average_task_completion_rate}%`,icon:de,description:"Average task completion"}),e.jsx(N,{title:"Pending Help Requests",value:s.pending_help_requests,icon:C,description:"Awaiting assistance"}),e.jsx(N,{title:"Open Tickets",value:s.open_tickets,icon:H,description:"Need attention"})]}),Oe=({performers:s})=>{const a=t=>t.split(" ").map(r=>r[0]).join("").toUpperCase().slice(0,2);return s.length===0?e.jsxs(c,{children:[e.jsx(i,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5"}),"Top Performers"]})}),e.jsx(o,{children:e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No performance data available"})})]}):e.jsxs(c,{children:[e.jsx(i,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5"}),"Top Performers"]})}),e.jsx(o,{children:e.jsx("div",{className:"space-y-4",children:s.map((t,r)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full font-bold text-sm ${r===0?"bg-yellow-100 text-yellow-700":r===1?"bg-gray-100 text-gray-700":r===2?"bg-orange-100 text-orange-700":"bg-muted text-muted-foreground"}`,children:r+1}),e.jsxs(U,{className:"h-10 w-10",children:[e.jsx(X,{src:t.avatar_url||void 0,alt:t.user_name}),e.jsx(R,{children:a(t.user_name)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:t.user_name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.completed_tasks," tasks completed"]})]})]},t.user_id))})})]})},$e=({data:s})=>{const a=Object.values(s.by_status).reduce((t,r)=>t+r,0);return e.jsxs(c,{children:[e.jsx(i,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-5 w-5"}),"Task Distribution"]})}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-3",children:"By Status"}),e.jsx("div",{className:"space-y-2",children:Object.entries(s.by_status).map(([t,r])=>{const n=a>0?r/a*100:0;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"capitalize",children:t.replace("_"," ")}),e.jsx("span",{className:"font-medium",children:r})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary rounded-full transition-all",style:{width:`${n}%`}})})]},t)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-3",children:"By Priority"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(s.by_priority).map(([t,r])=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsx("span",{className:"text-xs capitalize",children:t}),e.jsx("span",{className:"text-sm font-bold",children:r})]},t))})]}),s.overdue>0&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("p",{className:"text-sm font-medium text-red-800",children:[s.overdue," overdue task",s.overdue!==1?"s":""]})})]})})]})},Ie=({data:s})=>{const a=Object.values(s.by_status).reduce((r,n)=>r+n,0),t={pending:"bg-gray-500",in_progress:"bg-blue-500",done:"bg-green-500",rated:"bg-purple-500"};return e.jsxs(c,{children:[e.jsx(i,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-5 w-5"}),"Project Status"]})}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-2",children:Object.entries(s.by_status).map(([r,n])=>{const m=a>0?n/a*100:0;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:"capitalize flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded ${t[r]}`}),r.replace("_"," ")]}),e.jsxs("span",{className:"font-medium",children:[n," (",m.toFixed(0),"%)"]})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${t[r]} rounded-full transition-all`,style:{width:`${m}%`}})})]},r)})}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Average Progress"}),e.jsxs("span",{className:"text-lg font-bold",children:[s.average_progress.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-green-500 rounded-full transition-all",style:{width:`${s.average_progress}%`}})})]}),s.at_risk>0&&e.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("p",{className:"text-sm font-medium text-yellow-800",children:["⚠️ ",s.at_risk," project",s.at_risk!==1?"s":""," at risk"]}),e.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"Less than 50% complete"})]})]})})]})},Ee=({helpRequests:s,tickets:a})=>{const t=r=>r.split(" ").map(n=>n[0]).join("").toUpperCase().slice(0,2);return e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(c,{children:[e.jsx(i,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),"Help Requests"]})}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold",children:s.total}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total"})]}),e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:s.completed}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed"})]}),e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:s.pending}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending"})]})]}),s.top_helpers.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Top Helpers"}),e.jsx("div",{className:"space-y-2",children:s.top_helpers.map(r=>e.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded",children:[e.jsxs(U,{className:"h-8 w-8",children:[e.jsx(X,{src:r.avatar_url||void 0,alt:r.user_name}),e.jsx(R,{className:"text-xs",children:t(r.user_name)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:r.user_name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[r.help_count," helps"]})]})]},r.user_id))})]})]})})]}),e.jsxs(c,{children:[e.jsx(i,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5"}),"Tickets"]})}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold",children:a.total}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total"})]}),e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:a.open}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Open"})]}),e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:a.in_progress}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"In Progress"})]})]}),e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-sm font-medium text-green-800",children:["✓ ",a.resolved," Resolved"]})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"By Type"}),e.jsx("div",{className:"space-y-2",children:Object.entries(a.by_type).map(([r,n])=>e.jsxs("div",{className:"flex justify-between items-center p-2 border rounded",children:[e.jsx("span",{className:"text-xs capitalize",children:r.replace("_"," ")}),e.jsx("span",{className:"text-sm font-bold",children:n})]},r))})]})]})})]})]})},Fe={low:"bg-gray-500",medium:"bg-blue-500",high:"bg-orange-500",critical:"bg-red-500"},ze=({deadlines:s})=>{const a=F();return s.length===0?e.jsxs(c,{children:[e.jsx(i,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5"}),"Upcoming Deadlines"]})}),e.jsx(o,{children:e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No upcoming deadlines in the next 7 days"})})]}):e.jsxs(c,{children:[e.jsx(i,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5"}),"Upcoming Deadlines (",s.length,")"]})}),e.jsx(o,{children:e.jsx("div",{className:"space-y-2",children:s.map(t=>e.jsxs("div",{onClick:()=>a(`/projects/${t.project.id}`),className:"flex items-center justify-between p-3 border rounded-lg hover:bg-accent cursor-pointer transition-colors",children:[e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:t.name}),e.jsx(q,{variant:"outline",className:`${Fe[t.priority]} text-white text-xs`,children:t.priority})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.project.name})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(A,{className:"h-3 w-3"}),t.assigned_users_count]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(y,{className:"h-3 w-3"}),z(new Date(t.due_date),"MMM d")]}),e.jsxs("span",{className:`flex items-center gap-1 font-medium ${t.days_until_due<=2?"text-red-600":""}`,children:[e.jsx(V,{className:"h-3 w-3"}),t.days_until_due===0?"Today":`${t.days_until_due}d`]})]})]},t.id))})})]})},He=[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"this_week",label:"This Week"},{value:"last_week",label:"Last Week"},{value:"month_to_date",label:"Month to Date"},{value:"this_month",label:"This Month"},{value:"last_month",label:"Last Month"}],Ue=({value:s,onChange:a})=>e.jsxs(te,{value:s,onValueChange:a,children:[e.jsx(ae,{className:"w-[200px]",children:e.jsx(re,{placeholder:"Select period"})}),e.jsx(ne,{children:He.map(t=>e.jsx(le,{value:t.value,children:t.label},t.value))})]}),We=()=>{const{user:s}=ce(),{employeeDashboard:a,managerAnalytics:t,currentPeriod:r,isLoading:n,fetchEmployeeDashboard:m,fetchManagerAnalytics:h,setPeriod:l,canViewAnalytics:u}=Te();return ie.useEffect(()=>{m(),u&&h(r)},[]),n&&!a?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(O,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsx("div",{className:"min-h-screen flex flex-col",children:e.jsxs("div",{className:"flex-1 space-y-6 p-4 md:p-6 max-w-full",children:[e.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),e.jsxs("p",{className:"text-muted-foreground",children:["Welcome back, ",s?.name,"!"]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"My Overview"}),a&&e.jsxs(e.Fragment,{children:[e.jsx(Ce,{data:a.overview}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsx(Pe,{tasks:a.upcoming_tasks}),e.jsx(Se,{activities:a.recent_activity})]})]})]}),u&&e.jsxs("div",{className:"space-y-6 pt-6 border-t",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Team Analytics"}),e.jsx(Ue,{value:r,onChange:l})]}),n&&!t?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(O,{className:"h-8 w-8 animate-spin text-primary"})}):t?e.jsxs(e.Fragment,{children:[e.jsx(Le,{data:t.overview}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsx(Ie,{data:t.project_status}),e.jsx($e,{data:t.task_distribution}),e.jsx(Oe,{performers:t.top_performers})]}),e.jsx(Ee,{helpRequests:t.help_requests_stats,tickets:t.tickets_stats}),e.jsx(ze,{deadlines:t.upcoming_deadlines})]}):null]})]})})};export{We as default};
