import{g as C,D,j as e,L as V,A as G,p as J,q as K,B as c,a2 as Q,ax as I,az as R,aA as F,aB as P,l as B,b6 as W,C as x,f as h,b7 as X,b8 as q}from"./index-CWGGQyJw.js";import{T as Y,a as Z,b as S,c as d,d as z,e as n}from"./table-Ckciv9dm.js";import{B as N}from"./badge-CM5FMrFK.js";import{d as T,e as y,g as A,c as u,f as j,C as v}from"./clockingCalculations-kWnqBsMF.js";import{C as E}from"./circle-alert-Bv7puXRS.js";import{C as L}from"./chevron-left-B6fsIvOp.js";import{C as ee}from"./calendar-B4HjMRcn.js";import{U as se}from"./user-Bfxme41I.js";import{P as $}from"./play-DXAffkeL.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ue=C("download",ae);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],M=C("settings-2",re);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],H=C("square",te),je=({records:p,companyTimezone:t,pagination:r,showUser:i=!1,onPageChange:o,isLoading:b=!1,onCorrectionClick:m})=>{const[k,l]=D.useState(!1),[a,U]=D.useState(null);return!p.length&&!b?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"No records found"})}):b?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(V,{className:"w-8 h-8 animate-spin text-muted-foreground"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-lg border border-border overflow-hidden bg-card",children:e.jsxs(Y,{children:[e.jsx(Z,{children:e.jsxs(S,{className:"bg-accent",children:[i&&e.jsx(d,{className:"text-foreground",children:"Employee"}),e.jsx(d,{className:"text-foreground",children:"Date"}),e.jsx(d,{className:"text-foreground",children:"Clock In"}),e.jsx(d,{className:"text-foreground",children:"Clock Out"}),e.jsx(d,{className:"text-foreground",children:"Work Time"}),e.jsx(d,{className:"text-foreground",children:"Break Time"}),e.jsx(d,{className:"text-foreground",children:"Breaks"}),e.jsx(d,{className:"text-foreground",children:"Status"}),e.jsx(d,{className:"text-foreground",children:"Action"})]})}),e.jsx(z,{children:p.map(s=>{const _=T(s.clock_in_utc,s.clock_out_utc,s.break_records),w=y(s.break_records);return e.jsxs(S,{className:"border-border hover:bg-accent/50 cursor-pointer",onClick:()=>{U(s),l(!0)},children:[i&&e.jsx(n,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(G,{className:"h-8 w-8",children:[e.jsx(J,{src:s.user.avatar_url||void 0}),e.jsx(K,{className:"bg-primary text-primary-foreground",children:s.user.name.split(" ").map(f=>f[0]).join("").toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:s.user.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.user.email})]})]})}),e.jsx(n,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-foreground",children:A({sessionDate:s.session_date,companyTimezone:t,utcFallback:s.clock_in_utc,locale:"en-US"})}),s.crosses_midnight&&e.jsx(E,{className:"w-4 h-4 text-chart-2"})]})}),e.jsx(n,{className:"text-foreground",children:u(s.clock_in_utc,t).split(", ")[1]}),e.jsx(n,{className:"text-foreground",children:s.clock_out_utc?u(s.clock_out_utc,t).split(", ")[1]:"—"}),e.jsx(n,{children:e.jsx("span",{className:"font-bold text-chart-3 font-mono tabular-nums",children:j(_)})}),e.jsx(n,{children:e.jsx("span",{className:"font-bold text-chart-2 font-mono tabular-nums",children:j(w)})}),e.jsx(n,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-foreground",children:s.break_records?.length||0})]})}),e.jsx(n,{children:e.jsx(N,{variant:s.status==="completed"?"secondary":s.status==="active"?"default":"outline",children:s.status==="completed"?"Completed":s.status==="active"?"Active":"On Break"})}),e.jsx(n,{onClick:f=>f.stopPropagation(),children:e.jsxs(c,{size:"sm",variant:"outline",className:"border-input text-xs",onClick:()=>m?.(s),children:[e.jsx(M,{className:"w-4 h-4 mr-1"}),"Correct"]})})]},s.id)})})]})}),r&&r.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",r.from||0," to ",r.to||0," of ",r.total," records"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>o?.(r.current_page-1),disabled:r.current_page===1,className:"border-input",children:[e.jsx(L,{className:"w-4 h-4"}),"Previous"]}),e.jsxs("span",{className:"text-sm px-4 text-foreground",children:["Page ",r.current_page," of ",r.last_page]}),e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>o?.(r.current_page+1),disabled:r.current_page===r.last_page,className:"border-input",children:["Next",e.jsx(Q,{className:"w-4 h-4"})]})]})]}),e.jsx(I,{open:k,onOpenChange:l,children:e.jsxs(R,{className:"bg-card border-border text-foreground w-[95vw] max-w-4xl p-0 overflow-hidden",children:[e.jsx(F,{className:"sticky top-0 z-20 bg-gradient-to-r from-card to-accent/30 border-b border-border px-6 py-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(P,{className:"flex items-center gap-2 text-xl",children:[e.jsx(B,{className:"w-5 h-5 text-chart-1"}),"Session Details"]}),e.jsx(W,{className:"text-muted-foreground mt-1",children:a&&e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ee,{className:"w-4 h-4"}),A({sessionDate:a.session_date,companyTimezone:t,utcFallback:a.clock_in_utc,locale:"en-US"})]}),a.crosses_midnight&&e.jsxs(N,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(E,{className:"w-3 h-3"}),"Crossed midnight"]}),i&&a.user&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(se,{className:"w-4 h-4"}),a.user.name]})]})})]}),e.jsx(N,{variant:a?.status==="completed"?"secondary":a?.status==="active"?"default":"outline",className:"text-sm px-3 py-1",children:a?.status==="completed"?"Completed":a?.status==="active"?"Active":"On Break"})]})}),e.jsxs("div",{className:"max-h-[70vh] overflow-y-auto px-6 py-6 space-y-6",children:[a&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(x,{className:"bg-accent/50 border-border",children:e.jsxs(h,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-1",children:[e.jsx($,{className:"w-4 h-4 text-chart-1"}),"Clock In"]}),e.jsx("div",{className:"font-medium text-sm",children:u(a.clock_in_utc,t)})]})}),e.jsx(x,{className:"bg-accent/50 border-border",children:e.jsxs(h,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-1",children:[e.jsx(H,{className:"w-4 h-4 text-chart-2"}),"Clock Out"]}),e.jsx("div",{className:"font-medium text-sm",children:a.clock_out_utc?u(a.clock_out_utc,t):"—"})]})}),e.jsx(x,{className:"bg-accent/50 border-border",children:e.jsxs(h,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-1",children:[e.jsx(B,{className:"w-4 h-4 text-chart-3"}),"Work Time"]}),e.jsx("div",{className:"font-mono tabular-nums font-medium text-chart-3",children:j(T(a.clock_in_utc,a.clock_out_utc,a.break_records))})]})}),e.jsx(x,{className:"bg-accent/50 border-border",children:e.jsxs(h,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-1",children:[e.jsx(v,{className:"w-4 h-4 text-chart-2"}),"Break Time"]}),e.jsx("div",{className:"font-mono tabular-nums font-medium text-chart-2",children:j(y(a.break_records))})]})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5 text-chart-2"}),"Breaks",e.jsx(N,{variant:"secondary",className:"ml-2",children:a?.break_records?.length||0})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total: ",j(y(a?.break_records||[]))]})]}),a?.break_records?.length?e.jsx("div",{className:"space-y-3",children:a.break_records.map((s,_)=>{const w=u(s.break_start_utc,t).split(", ")[1],f=s.break_end_utc?u(s.break_end_utc,t).split(", ")[1]:null,O=s.break_end_utc?Math.max(0,Math.floor((new Date(s.break_end_utc).getTime()-new Date(s.break_start_utc).getTime())/1e3)):0,g=s.status==="active";return e.jsx(x,{className:`border-l-4 ${g?"border-l-chart-2 bg-chart-2/5":"border-l-chart-1 bg-accent"} transition-all duration-200 hover:shadow-md`,children:e.jsxs(h,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${g?"bg-chart-2 animate-pulse":"bg-chart-1"}`}),e.jsxs("div",{className:"font-medium",children:["Break ",_+1]}),g&&e.jsx(N,{variant:"default",className:"bg-chart-2 text-white",children:"Active"})]}),!g&&e.jsx("div",{className:"font-mono tabular-nums font-semibold text-chart-1",children:j(O)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-4 h-4 text-chart-1"}),e.jsx("span",{className:"text-muted-foreground",children:"Start:"}),e.jsx("span",{className:"font-medium",children:w})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4 text-chart-2"}),e.jsx("span",{className:"text-muted-foreground",children:"End:"}),e.jsx("span",{className:"font-medium",children:f??"—"})]})]}),s.description&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(X,{className:"my-2"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-muted-foreground min-w-12",children:"Notes:"}),e.jsx("span",{className:"text-foreground bg-accent px-3 py-2 rounded-md border border-border flex-1",children:s.description})]})]})]})]})},s.id)})}):e.jsx(x,{className:"border-border bg-accent/50",children:e.jsxs(h,{className:"p-8 text-center",children:[e.jsx(v,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"text-muted-foreground",children:"No breaks recorded for this session"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"All breaks will appear here when taken"})]})})]})]}),e.jsx(q,{className:"sticky bottom-0 z-20 bg-card/95 backdrop-blur supports-[backdrop-filter]:bg-card/70 border-t border-border px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Timezone: ",t]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:"outline",className:"border-input",onClick:()=>l(!1),children:"Close"}),m&&a&&e.jsxs(c,{variant:"default",onClick:()=>{l(!1),m(a)},children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Correct Session"]})]})]})})]})})]})},fe=({open:p,onOpenChange:t,session:r,onSelect:i,isLoading:o})=>{if(!r)return null;const b=!!r.break_records?.length;return e.jsx(I,{open:p,onOpenChange:t,children:e.jsxs(R,{className:"bg-card border-border",children:[e.jsxs(F,{children:[e.jsx(P,{className:"text-foreground",children:"What do you want to correct?"}),e.jsx(W,{className:"text-muted-foreground",children:"Select the type of correction needed for this record"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 py-4",children:[e.jsxs(c,{onClick:()=>{i("clock_in"),t(!1)},disabled:o,variant:"outline",className:"h-20 flex flex-col items-center justify-center border-input hover:bg-accent",children:[e.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Clock In"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Edit start time"})]}),e.jsxs(c,{onClick:()=>{i("clock_out"),t(!1)},disabled:!r.clock_out_utc||o,variant:"outline",className:"h-20 flex flex-col items-center justify-center border-input hover:bg-accent",children:[e.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Clock Out"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Edit end time"})]})]}),b&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm font-medium text-foreground",children:"Breaks"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:r.break_records.map((m,k)=>{const l=`Break ${k+1}`;return e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{onClick:()=>{i("break_in",m.id),t(!1)},disabled:o,variant:"outline",className:"flex-1 h-12 justify-between border-input hover:bg-accent",title:`${l} start`,children:[l,": Start"]}),e.jsxs(c,{onClick:()=>{i("break_out",m.id),t(!1)},disabled:!m.break_end_utc||o,variant:"outline",className:"flex-1 h-12 justify-between border-input hover:bg-accent",title:`${l} end`,children:[l,": End"]})]},m.id)})})]}),e.jsx(q,{className:"pt-2",children:e.jsx(c,{variant:"outline",onClick:()=>t(!1),disabled:o,className:"border-input",children:"Cancel"})})]})})};export{fe as C,ue as D,je as R};
