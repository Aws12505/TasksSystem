import{h as j,r as f,j as e,z as u,B as p,y as N,E as v}from"./index-BOfNqdHU.js";import{C as n,a as c,b as l,d}from"./card-VRr8nV95.js";import{u as _}from"./analyticsStore-BZJxmIrl.js";import{B as h}from"./badge-XdKDng72.js";import{P as y}from"./progress-CnaZBuOY.js";import{a as g}from"./analyticsService-BVUwXy1e.js";import{C as b}from"./calendar-Mvv9E9t0.js";import{T as w}from"./trending-up-DjOgL2L_.js";import{A as k}from"./arrow-left-nl7Vto6a.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],T=j("award",C);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],A=j("trending-down",R),L=(s,a,r)=>{const{userPerformance:i,isLoading:t,error:m,fetchUserPerformance:x}=_(),o=typeof s=="string"?parseInt(s):s;return f.useEffect(()=>{o&&x(o,a,r)},[o,a,r,x]),{userPerformance:i,isLoading:t,error:m,refreshUserPerformance:()=>x(o,a,r)}},U=({userPerformance:s})=>{const a=t=>g.getPerformanceGrade(t),r=t=>g.getPerformanceColor(t),i=t=>{switch(t){case"improving":return e.jsx(w,{className:"w-4 h-4 text-green-500"});case"declining":return e.jsx(A,{className:"w-4 h-4 text-red-500"});default:return e.jsx("div",{className:"w-4 h-4"})}};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(n,{className:"bg-card border-border",children:[e.jsx(c,{children:e.jsxs(l,{className:"text-foreground flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5"}),"Performance Summary"]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Overall Score"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{variant:"outline",style:{backgroundColor:r(s.performance_score)+"20",color:r(s.performance_score)},children:["Grade ",a(s.performance_score)]}),e.jsxs("span",{className:"text-lg font-bold",children:[s.performance_score,"%"]})]})]}),e.jsx(y,{value:s.performance_score,className:"h-3"}),s.period.start&&s.period.end&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(b,{className:"w-4 h-4"}),e.jsxs("span",{children:[new Date(s.period.start).toLocaleDateString()," - "," ",new Date(s.period.end).toLocaleDateString()]})]})]})]}),e.jsxs(n,{className:"bg-card border-border",children:[e.jsx(c,{children:e.jsx(l,{className:"text-foreground",children:"Final Ratings"})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Current Rating"}),e.jsxs("div",{className:"flex items-center gap-2",children:[i(s.final_ratings.rating_trend),e.jsxs("span",{className:"text-lg font-bold",children:[s.final_ratings.current_rating,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Average Rating"}),e.jsxs("span",{className:"font-medium",children:[s.final_ratings.average_rating,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Periods"}),e.jsx(h,{variant:"outline",children:s.final_ratings.total_periods})]}),e.jsxs("div",{className:"text-xs text-muted-foreground capitalize",children:["Trend: ",s.final_ratings.rating_trend]})]})]}),e.jsxs(n,{className:"bg-card border-border",children:[e.jsx(c,{children:e.jsx(l,{className:"text-foreground",children:"Task Performance"})}),e.jsxs(d,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Completion Rate"}),e.jsxs("span",{className:"font-medium",children:[Math.round(s.task_metrics.task_completion_rate*100),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Tasks Completed"}),e.jsxs("span",{className:"font-medium",children:[s.task_metrics.completed_tasks_count," / ",s.task_metrics.assigned_tasks_count]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Weight"}),e.jsx("span",{className:"font-medium",children:s.task_metrics.total_task_weight})]}),s.task_metrics.avg_task_rating_given>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Avg Rating Given"}),e.jsxs(h,{variant:"outline",children:[s.task_metrics.avg_task_rating_given,"%"]})]})]})]}),e.jsxs(n,{className:"bg-card border-border",children:[e.jsx(c,{children:e.jsx(l,{className:"text-foreground",children:"Ticket Performance"})}),e.jsxs(d,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Resolution Rate"}),e.jsxs("span",{className:"font-medium",children:[Math.round(s.ticket_metrics.resolution_rate*100),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Tickets Resolved"}),e.jsxs("span",{className:"font-medium",children:[s.ticket_metrics.tickets_resolved," / ",s.ticket_metrics.tickets_assigned]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Tickets Requested"}),e.jsx("span",{className:"font-medium",children:s.ticket_metrics.tickets_requested})]}),s.ticket_metrics.avg_resolution_time>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Avg Resolution Time"}),e.jsx("span",{className:"font-medium",children:g.formatDuration(s.ticket_metrics.avg_resolution_time)})]})]})]})]})},I=()=>{const{userId:s}=u(),{userPerformance:a,isLoading:r,error:i}=L(s);return r?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-8 bg-muted animate-pulse rounded w-48"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"h-64 bg-muted animate-pulse rounded-lg"}),e.jsx("div",{className:"h-64 bg-muted animate-pulse rounded-lg"})]})]}):i||!a?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-destructive",children:i||"User analytics not found"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(p,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(N,{to:"/analytics",children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),"Back to Analytics"]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(v,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground font-sans",children:"User Analytics"}),e.jsxs("p",{className:"text-muted-foreground",children:["Performance analysis for User #",s]})]})]})]}),e.jsx(U,{userPerformance:a}),a.final_ratings.recent_ratings.length>0&&e.jsxs(n,{className:"bg-card border-border",children:[e.jsx(c,{children:e.jsx(l,{className:"text-foreground",children:"Recent Final Ratings"})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-3",children:a.final_ratings.recent_ratings.map((t,m)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-foreground",children:[t.final_rating,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[new Date(t.period_start).toLocaleDateString()," - "," ",new Date(t.period_end).toLocaleDateString()]})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"w-20 h-2 bg-accent rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary transition-all",style:{width:`${t.final_rating}%`}})})})]},m))})})]})]})};export{I as default};
