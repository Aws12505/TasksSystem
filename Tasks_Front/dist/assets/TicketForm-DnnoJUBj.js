import{j as e,a as C,b as S,o as k,I as _,V as T,r as h,v as j,w as g,x as p,y as n,B as V,L as w,R as E,s as b,as as F,ar as y}from"./index-BpYXyGyg.js";import{F as D,a as o,b as d,c as x,d as u,e as m}from"./form-BkkuNIYl.js";const R=l=>k({title:b().min(1,"Title is required").max(255),description:b().min(1,"Description is required"),type:y(["quick_fix","bug_investigation","user_support"]),priority:y(["low","medium","high","critical"]),assigned_to:F().optional(),requester_name:l?b().min(1,"Your name is required").max(255):b().max(255).optional()}),I=k({title:b().min(1,"Title is required").max(255),description:b().min(1,"Description is required"),type:y(["quick_fix","bug_investigation","user_support"]),priority:y(["low","medium","high","critical"]),status:y(["open","in_progress","resolved"]).optional(),assigned_to:F().optional(),requester_name:b().max(255).optional()}),M=({availableUsers:l,typeOptions:v,onSubmit:N,isLoading:c,isAuthenticated:a})=>{const f=E.useMemo(()=>R(!a),[a]),t=C({resolver:S(f),defaultValues:{title:"",description:"",type:"quick_fix",priority:"medium",assigned_to:void 0,requester_name:""}}),q=async r=>{const s={title:r.title,description:r.description,type:r.type,priority:r.priority,assigned_to:r.assigned_to,...r.requester_name?{requester_name:r.requester_name}:{}};await N(s)};return e.jsx(D,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(q),className:"space-y-6",children:[e.jsx(o,{control:t.control,name:"title",render:({field:r})=>e.jsxs(d,{children:[e.jsx(x,{className:"text-foreground",children:"Title"}),e.jsx(u,{children:e.jsx(_,{placeholder:"Enter ticket title",...r,disabled:c,className:"bg-background border-input text-foreground"})}),e.jsx(m,{className:"text-destructive"})]})}),e.jsx(o,{control:t.control,name:"description",render:({field:r})=>e.jsxs(d,{children:[e.jsx(x,{className:"text-foreground",children:"Description"}),e.jsx(u,{children:e.jsx(T,{placeholder:"Describe the issue or request...",...r,disabled:c,className:"bg-background border-input text-foreground",rows:4})}),e.jsx(m,{className:"text-destructive"})]})}),!a&&e.jsx(o,{control:t.control,name:"requester_name",render:({field:r})=>e.jsxs(d,{children:[e.jsx(x,{className:"text-foreground",children:"Your name"}),e.jsx(u,{children:e.jsx(_,{placeholder:"Enter your name",...r,disabled:c,className:"bg-background border-input text-foreground"})}),e.jsx(m,{className:"text-destructive"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(o,{control:t.control,name:"type",render:({field:r})=>e.jsxs(d,{children:[e.jsx(x,{className:"text-foreground",children:"Type"}),e.jsxs(h,{onValueChange:r.onChange,defaultValue:r.value,disabled:c,children:[e.jsx(u,{children:e.jsx(j,{className:"bg-background border-input text-foreground",children:e.jsx(g,{placeholder:"Select ticket type"})})}),e.jsx(p,{children:v.map(s=>e.jsx(n,{value:s.value,children:e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"font-medium",children:s.label})})},s.value))})]}),e.jsx(m,{className:"text-destructive"})]})}),e.jsx(o,{control:t.control,name:"priority",render:({field:r})=>e.jsxs(d,{children:[e.jsx(x,{className:"text-foreground",children:"Priority"}),e.jsxs(h,{onValueChange:r.onChange,defaultValue:r.value,disabled:c,children:[e.jsx(u,{children:e.jsx(j,{className:"bg-background border-input text-foreground",children:e.jsx(g,{placeholder:"Select priority"})})}),e.jsxs(p,{children:[e.jsx(n,{value:"low",children:"Low"}),e.jsx(n,{value:"medium",children:"Medium"}),e.jsx(n,{value:"high",children:"High"}),e.jsx(n,{value:"critical",children:"Critical"})]})]}),e.jsx(m,{className:"text-destructive"})]})})]}),a&&e.jsx(o,{control:t.control,name:"assigned_to",render:({field:r})=>e.jsxs(d,{children:[e.jsxs(x,{className:"text-foreground",children:["Assign to ",e.jsx("span",{className:"text-xs text-muted-foreground",children:"(optional)"})]}),e.jsxs(h,{onValueChange:s=>r.onChange(s==="unassigned"?void 0:Number(s)),value:r.value===void 0?"unassigned":r.value.toString(),disabled:c,children:[e.jsx(u,{children:e.jsx(j,{className:"bg-background border-input text-foreground",children:e.jsx(g,{placeholder:"Leave unassigned or select a user"})})}),e.jsxs(p,{children:[e.jsx(n,{value:"unassigned",children:"Leave unassigned"}),l.map(s=>e.jsx(n,{value:s.id.toString(),children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.email})]})},s.id))]})]}),e.jsx(m,{className:"text-destructive"})]})}),e.jsxs(V,{type:"submit",disabled:c,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:[c&&e.jsx(w,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Ticket"]})]})})},P=({ticket:l,availableUsers:v,typeOptions:N,onSubmit:c,isLoading:a,isAuthenticated:f})=>{const t=C({resolver:S(I),defaultValues:{title:l.title,description:l.description,type:l.type,priority:l.priority,status:l.status,assigned_to:l.assigned_to||void 0,requester_name:l.requester_name||""}}),q=async s=>{const i={title:s.title,description:s.description,type:s.type,priority:s.priority,status:s.status,assigned_to:s.assigned_to,requester_name:s.requester_name};await c(i)},r=!l.requester;return e.jsx(D,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(q),className:"space-y-6",children:[e.jsx(o,{control:t.control,name:"title",render:({field:s})=>e.jsxs(d,{children:[e.jsx(x,{className:"text-foreground",children:"Title"}),e.jsx(u,{children:e.jsx(_,{placeholder:"Enter ticket title",...s,disabled:a,className:"bg-background border-input text-foreground"})}),e.jsx(m,{className:"text-destructive"})]})}),e.jsx(o,{control:t.control,name:"description",render:({field:s})=>e.jsxs(d,{children:[e.jsx(x,{className:"text-foreground",children:"Description"}),e.jsx(u,{children:e.jsx(T,{placeholder:"Describe the issue or request...",...s,disabled:a,className:"bg-background border-input text-foreground",rows:4})}),e.jsx(m,{className:"text-destructive"})]})}),r&&e.jsx(o,{control:t.control,name:"requester_name",render:({field:s})=>e.jsxs(d,{children:[e.jsx(x,{className:"text-foreground",children:"Requester Name"}),e.jsx(u,{children:e.jsx(_,{placeholder:"Enter requester name",...s,disabled:a,className:"bg-background border-input text-foreground"})}),e.jsx(m,{className:"text-destructive"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(o,{control:t.control,name:"type",render:({field:s})=>e.jsxs(d,{children:[e.jsx(x,{className:"text-foreground",children:"Type"}),e.jsxs(h,{onValueChange:s.onChange,defaultValue:s.value,disabled:a,children:[e.jsx(u,{children:e.jsx(j,{className:"bg-background border-input text-foreground",children:e.jsx(g,{placeholder:"Select ticket type"})})}),e.jsx(p,{children:N.map(i=>e.jsx(n,{value:i.value,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:i.label}),e.jsx("span",{className:"text-xs text-muted-foreground",children:i.estimatedTime})]})},i.value))})]}),e.jsx(m,{className:"text-destructive"})]})}),e.jsx(o,{control:t.control,name:"priority",render:({field:s})=>e.jsxs(d,{children:[e.jsx(x,{className:"text-foreground",children:"Priority"}),e.jsxs(h,{onValueChange:s.onChange,defaultValue:s.value,disabled:a,children:[e.jsx(u,{children:e.jsx(j,{className:"bg-background border-input text-foreground",children:e.jsx(g,{placeholder:"Select priority"})})}),e.jsxs(p,{children:[e.jsx(n,{value:"low",children:"Low"}),e.jsx(n,{value:"medium",children:"Medium"}),e.jsx(n,{value:"high",children:"High"}),e.jsx(n,{value:"critical",children:"Critical"})]})]}),e.jsx(m,{className:"text-destructive"})]})}),e.jsx(o,{control:t.control,name:"status",render:({field:s})=>e.jsxs(d,{children:[e.jsx(x,{className:"text-foreground",children:"Status"}),e.jsxs(h,{onValueChange:s.onChange,defaultValue:s.value,disabled:a,children:[e.jsx(u,{children:e.jsx(j,{className:"bg-background border-input text-foreground",children:e.jsx(g,{placeholder:"Select status"})})}),e.jsxs(p,{children:[e.jsx(n,{value:"open",children:"Open"}),e.jsx(n,{value:"in_progress",children:"In Progress"}),e.jsx(n,{value:"resolved",children:"Resolved"})]})]}),e.jsx(m,{className:"text-destructive"})]})})]}),f&&e.jsx(o,{control:t.control,name:"assigned_to",render:({field:s})=>e.jsxs(d,{children:[e.jsxs(x,{className:"text-foreground",children:["Assign to ",e.jsx("span",{className:"text-xs text-muted-foreground",children:"(optional)"})]}),e.jsxs(h,{onValueChange:i=>s.onChange(i==="unassigned"?void 0:Number(i)),value:s.value===void 0?"unassigned":s.value.toString(),disabled:a,children:[e.jsx(u,{children:e.jsx(j,{className:"bg-background border-input text-foreground",children:e.jsx(g,{placeholder:"Leave unassigned or select a user"})})}),e.jsxs(p,{children:[e.jsx(n,{value:"unassigned",children:"Leave unassigned"}),v.map(i=>e.jsx(n,{value:i.id.toString(),children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:i.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:i.email})]})},i.id))]})]}),e.jsx(m,{className:"text-destructive"})]})}),e.jsxs(V,{type:"submit",disabled:a,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:[a&&e.jsx(w,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Ticket"]})]})})},Y=({ticket:l,availableUsers:v=[],typeOptions:N,onSubmit:c,isLoading:a,isAuthenticated:f})=>l?e.jsx(P,{ticket:l,availableUsers:v,typeOptions:N,onSubmit:c,isLoading:a,isAuthenticated:f}):e.jsx(M,{availableUsers:v,typeOptions:N,onSubmit:c,isLoading:a,isAuthenticated:f});export{Y as T};
